webpackJsonp([0],{"+3/4":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("TToO"),i=function(e){function t(t){e.call(this),this.scheduler=t}return Object(r.__extends)(t,e),t.create=function(e){return new t(e)},t.dispatch=function(e){e.subscriber.complete()},t.prototype._subscribe=function(e){var n=this.scheduler;if(n)return n.schedule(t.dispatch,0,{subscriber:e});e.complete()},t}(n("YaPU").a)},"+CnV":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){var t,r=n("AMGY").a.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}()},"+DgU":function(e,t,n){"use strict";var r=s(n("//Fk")),i=s(n("Zrlr")),o=s(n("wxAW"));function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(t,n,r,o){(0,i.default)(this,e),this.state={prevToken:r,nextToken:o,source:n,items:t}}return(0,o.default)(e,[{key:"nextPage",value:function(){return this.hasNextPage?this.state.source(this.state.nextToken):r.default.reject(new Error("No next page"))}},{key:"prevPage",value:function(){return this.hasPrevPage?this.state.source(this.state.prevToken):r.default.reject(new Error("No previous page"))}},{key:"hasNextPage",get:function(){return!!this.state.nextToken}},{key:"hasPrevPage",get:function(){return!!this.state.prevToken}},{key:"items",get:function(){return this.state.items}}]),e}();t.RestPaginator=a},"+E39":function(e,t,n){e.exports=!n("S82l")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"+MLA":function(e,t,n){var r=n("EqjI"),i=n("06OY").onFreeze;n("uqUo")("freeze",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},"+ZMJ":function(e,t,n){var r=n("lOnJ");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},"+fTR":function(e,t,n){var r=n("OMJi"),i=n("oYPl"),o=n("/+tP");function s(e){o.call(this,e),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay(),this.factor_=s.DEFAULT_FACTOR,e&&void 0!==e.factor&&(i.checkArgument(e.factor>1,"Exponential factor should be greater than 1 but got %s.",e.factor),this.factor_=e.factor)}r.inherits(s,o),s.DEFAULT_FACTOR=2,s.prototype.next_=function(){return this.backoffDelay_=Math.min(this.nextBackoffDelay_,this.getMaxDelay()),this.nextBackoffDelay_=this.backoffDelay_*this.factor_,this.backoffDelay_},s.prototype.reset_=function(){this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()},e.exports=s},"+rEi":function(e,t,n){"use strict";var r=f(n("Xxa5")),i=f(n("RRo+")),o=f(n("Zx67")),s=f(n("Zrlr")),a=f(n("zwoO")),u=f(n("wxAW")),c=f(n("Pf15")),l=f(n("//Fk"));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e,t,n,r){return new(n||(n=l.default))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var d=n("vzCy"),p=function(e){function t(e,n,r,u){(0,s.default)(this,t);var c=(0,a.default)(this,(t.__proto__||(0,o.default)(t)).call(this));if(c.channel=n,c.services=e,c.state={sid:u,typingTimeout:null,isTyping:!1,identity:r.identity,roleSid:r.roleSid||null,lastConsumedMessageIndex:(0,i.default)(r.lastConsumedMessageIndex)?r.lastConsumedMessageIndex:null,lastConsumptionTimestamp:r.lastConsumptionTimestamp?new Date(r.lastConsumptionTimestamp):null,userInfo:r.userInfo},!r.identity)throw new Error("Received invalid Member object from server: Missing identity.");return c}return(0,c.default)(t,d.EventEmitter),(0,u.default)(t,[{key:"sid",get:function(){return this.state.sid}},{key:"identity",get:function(){return this.state.identity}},{key:"isTyping",get:function(){return this.state.isTyping}},{key:"lastConsumedMessageIndex",get:function(){return this.state.lastConsumedMessageIndex}},{key:"lastConsumptionTimestamp",get:function(){return this.state.lastConsumptionTimestamp}},{key:"roleSid",get:function(){return this.state.roleSid}}]),(0,u.default)(t,[{key:"_startTyping",value:function(e){var t=this;return clearTimeout(this.state.typingTimeout),this.state.isTyping=!0,this.emit("typingStarted",this),this.channel.emit("typingStarted",this),this.state.typingTimeout=setTimeout(function(){return t._endTyping()},e),this}},{key:"_endTyping",value:function(){this.state.typingTimeout&&(this.state.isTyping=!1,this.emit("typingEnded",this),this.channel.emit("typingEnded",this),clearInterval(this.state.typingTimeout),this.state.typingTimeout=null)}},{key:"_update",value:function(e){var t=!1;if(e.roleSid&&this.state.roleSid!==e.roleSid&&(this.state.roleSid=e.roleSid,t=!0),!(0,i.default)(e.lastConsumedMessageIndex)&&null!==e.lastConsumedMessageIndex||this.state.lastConsumedMessageIndex===e.lastConsumedMessageIndex||(this.state.lastConsumedMessageIndex=e.lastConsumedMessageIndex,t=!0),e.lastConsumptionTimestamp){var n=new Date(e.lastConsumptionTimestamp);this.state.lastConsumptionTimestamp&&this.state.lastConsumptionTimestamp.getTime()===n.getTime()||(this.state.lastConsumptionTimestamp=n,t=!0)}return t&&this.emit("updated",this),this}},{key:"getUserDescriptor",value:function(){return h(this,void 0,void 0,r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.services.users.getUserDescriptor(this.state.identity));case 1:case"end":return e.stop()}},e,this)}))}},{key:"getUser",value:function(){return h(this,void 0,void 0,r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.services.users.getUser(this.state.identity,this.state.userInfo));case 1:case"end":return e.stop()}},e,this)}))}},{key:"remove",value:function(){return this.channel.removeMember(this)}}]),t}();t.Member=p},"+tPU":function(e,t,n){n("xGkn");for(var r=n("7KvD"),i=n("hJx8"),o=n("/bQp"),s=n("dSzd")("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var c=a[u],l=r[c],f=l&&l.prototype;f&&!f[s]&&i(f,s,c),o[c]=o.Array}},"/+tP":function(e,t,n){function r(e){return void 0!==e&&null!==e}function i(e){if(r((e=e||{}).initialDelay)&&e.initialDelay<1)throw new Error("The initial timeout must be greater than 0.");if(r(e.maxDelay)&&e.maxDelay<1)throw new Error("The maximal timeout must be greater than 0.");if(this.initialDelay_=e.initialDelay||100,this.maxDelay_=e.maxDelay||1e4,this.maxDelay_<=this.initialDelay_)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");if(r(e.randomisationFactor)&&(e.randomisationFactor<0||e.randomisationFactor>1))throw new Error("The randomisation factor must be between 0 and 1.");this.randomisationFactor_=e.randomisationFactor||0}n("vzCy"),n("OMJi"),i.prototype.getMaxDelay=function(){return this.maxDelay_},i.prototype.getInitialDelay=function(){return this.initialDelay_},i.prototype.next=function(){var e=this.next_(),t=1+Math.random()*this.randomisationFactor_;return Math.round(e*t)},i.prototype.next_=function(){throw new Error("BackoffStrategy.next_() unimplemented.")},i.prototype.reset=function(){this.reset_()},i.prototype.reset_=function(){throw new Error("BackoffStrategy.reset_() unimplemented.")},e.exports=i},"//Fk":function(e,t,n){e.exports={default:n("U5ju"),__esModule:!0}},"/bQp":function(e,t){e.exports={}},"/iUD":function(e,t,n){"use strict";t.a=function(e){return"function"==typeof e}},"/n6Q":function(e,t,n){n("zQR9"),n("+tPU"),e.exports=n("Kh4W").f("iterator")},"/nXB":function(e,t,n){"use strict";t.a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=Number.POSITIVE_INFINITY,a=null,u=e[e.length-1];return Object(o.a)(u)?(a=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof u&&(n=e.pop()),null===a&&1===e.length&&e[0]instanceof r.a?e[0]:Object(s.a)(n)(new i.a(e,a))};var r=n("YaPU"),i=n("Veqx"),o=n("1Q68"),s=n("8D5t")},0:function(e,t,n){e.exports=n("x35b")},"0/AJ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i="undefined"==typeof XMLHttpRequest?n(2).XMLHttpRequest:XMLHttpRequest,o=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this)}return r(e,null,[{key:"request",value:function(e,t){return new Promise(function(n,r){var o=new i;for(var s in o.open(e,t.url,!0),o.onreadystatechange=function(){if(4===o.readyState){var e,t=(e=o.getAllResponseHeaders())?e.split("\r\n").map(function(e){return e.split(": ")}).filter(function(e){return 2===e.length&&e[1].length>0}).reduce(function(e,t){return e[t[0]]=t[1],e},{}):{},i=function(e){var t=e.getResponseHeader("Content-Type");if(!t||0!==t.indexOf("application/json")||0===e.responseText.length)return e.responseText;try{return JSON.parse(e.responseText)}catch(t){return e.responseText}}(o);200<=o.status&&o.status<300?n({status:o.status,headers:t,body:i}):r({status:o.status,description:o.statusText,headers:t,body:i})}},t.headers)o.setRequestHeader(s,t.headers[s]),"Content-Type"===s&&"application/json"===t.headers[s]&&(t.body=JSON.stringify(t.body));o.send(t.body)})}},{key:"get",value:function(e){return this.request("GET",e)}},{key:"post",value:function(e){return this.request("POST",e)}},{key:"put",value:function(e){return this.request("PUT",e)}},{key:"delete",value:function(e){return this.request("DELETE",e)}}]),e}();t.default=o,e.exports=o,e.exports=t.default},"06OY":function(e,t,n){var r=n("3Eo+")("meta"),i=n("EqjI"),o=n("D2L2"),s=n("evD5").f,a=0,u=Object.isExtensible||function(){return!0},c=!n("S82l")(function(){return u(Object.preventExtensions({}))}),l=function(e){s(e,r,{value:{i:"O"+ ++a,w:{}}})},f=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},onFreeze:function(e){return c&&f.NEED&&u(e)&&!o(e,r)&&l(e),e}}},"0P3J":function(e,t,n){"use strict";t.a=function(){return function(e){return e.lift(new o(e))}};var r=n("TToO"),i=n("OVmG"),o=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new s(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),s=function(e){function t(t,n){e.call(this,t),this.connectable=n}return Object(r.__extends)(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(i.a)},"0Qa9":function(e,t,n){(function(t,n){var r;r=function(){return function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof _dereq_&&_dereq_;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){return i(t[s][1][e]||e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){"use strict";t.exports=function(e){var t=e._SomePromiseArray;function n(e){var n=new t(e),r=n.promise();return n.setHowMany(1),n.setUnwrap(),n.init(),r}e.any=function(e){return n(e)},e.prototype.any=function(){return n(this)}}},{}],2:[function(e,n,r){"use strict";var i;try{throw new Error}catch(e){i=e}var o=e("./schedule"),s=e("./queue"),a=e("./util");function u(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new s(16),this._normalQueue=new s(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=o}function c(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function l(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function f(e){this._normalQueue._pushOne(e),this._queueTick()}u.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},u.prototype.hasCustomScheduler=function(){return this._customScheduler},u.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},u.prototype.disableTrampolineIfNecessary=function(){a.hasDevTools&&(this._trampolineEnabled=!1)},u.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},u.prototype.fatalError=function(e,n){n?(t.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),t.exit(2)):this.throwLater(e)},u.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},a.hasDevTools?(u.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?c.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})},u.prototype.invoke=function(e,t,n){this._trampolineEnabled?l.call(this,e,t,n):this._schedule(function(){e.call(t,n)})},u.prototype.settlePromises=function(e){this._trampolineEnabled?f.call(this,e):this._schedule(function(){e._settlePromises()})}):(u.prototype.invokeLater=c,u.prototype.invoke=l,u.prototype.settlePromises=f),u.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var n=e.shift(),r=e.shift();t.call(n,r)}else t._settlePromises()}},u.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},u.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},u.prototype._reset=function(){this._isTickUsed=!1},n.exports=u,n.exports.firstLineError=i},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var i=!1,o=function(e,t){this._reject(t)},s=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(o,o,null,this,e)},a=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},u=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(o){i||(i=!0,e.prototype._propagateFrom=r.propagateFromFunction(),e.prototype._boundValue=r.boundValueFunction());var c=n(o),l=new e(t);l._propagateFrom(this,1);var f=this._target();if(l._setBoundTo(c),c instanceof e){var h={promiseRejectionQueued:!1,promise:l,target:f,bindingPromise:c};f._then(t,s,void 0,l,h),c._then(a,u,void 0,l,h),l._setOnCancel(c)}else l._resolveCallback(f);return l},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},e.bind=function(t,n){return e.resolve(n).bind(t)}}},{}],4:[function(e,t,n){"use strict";var r;"undefined"!=typeof Promise&&(r=Promise);var i=e("./promise")();i.noConflict=function(){try{Promise===i&&(Promise=r)}catch(e){}return i},t.exports=i},{"./promise":22}],5:[function(e,t,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}t.exports=function(t){var n=e("./util"),r=n.canEvaluate;function i(e){return function(e,r){var i;if(null!=e&&(i=e[r]),"function"!=typeof i){var o="Object "+n.classString(e)+" has no method '"+n.toString(r)+"'";throw new t.TypeError(o)}return i}(e,this.pop()).apply(e,this)}function o(e){return e[this]}function s(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(i,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t;if("number"==typeof e)t=s;else if(r){var n=(void 0)(e);t=null!==n?n:o}else t=o;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var o=e("./util"),s=o.tryCatch,a=o.errorObj,u=t._async;t.prototype.break=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(o.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var r=s(e).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),u.throwLater(r.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){"use strict";t.exports=function(t){var n=e("./util"),r=e("./es5").keys,i=n.tryCatch,o=n.errorObj;return function(e,s,a){return function(u){var c=a._boundValue();e:for(var l=0;l<e.length;++l){var f=e[l];if(f===Error||null!=f&&f.prototype instanceof Error){if(u instanceof f)return i(s).call(c,u)}else if("function"==typeof f){var h=i(f).call(c,u);if(h===o)return h;if(h)return i(s).call(c,u)}else if(n.isObject(u)){for(var d=r(f),p=0;p<d.length;++p){var v=d[p];if(f[v]!=u[v])continue e}return i(s).call(c,u)}}return t}}}},{"./es5":13,"./util":36}],8:[function(e,t,n){"use strict";t.exports=function(e){var t=!1,n=[];function r(){this._trace=new r.CapturedTrace(i())}function i(){var e=n.length-1;if(e>=0)return n[e]}return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},r.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},r.prototype._popContext=function(){if(void 0!==this._trace){var e=n.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},r.CapturedTrace=null,r.create=function(){if(t)return new r},r.deactivateLongStackTraces=function(){},r.activateLongStackTraces=function(){var n=e.prototype._pushContext,o=e.prototype._popContext,s=e._peekContext,a=e.prototype._peekContext,u=e.prototype._promiseCreated;r.deactivateLongStackTraces=function(){e.prototype._pushContext=n,e.prototype._popContext=o,e._peekContext=s,e.prototype._peekContext=a,e.prototype._promiseCreated=u,t=!1},t=!0,e.prototype._pushContext=r.prototype._pushContext,e.prototype._popContext=r.prototype._popContext,e._peekContext=e.prototype._peekContext=i,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},r}},{}],9:[function(e,n,r){"use strict";n.exports=function(n,r){var i,o,s,a=n._getDomain,u=n._async,c=e("./errors").Warning,l=e("./util"),f=l.canAttachTrace,h=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,d=/\((?:timers\.js):\d+:\d+\)/,p=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,v=null,y=null,m=!1,_=!(0==l.env("BLUEBIRD_DEBUG")),g=!(0==l.env("BLUEBIRD_WARNINGS")||!_&&!l.env("BLUEBIRD_WARNINGS")),b=!(0==l.env("BLUEBIRD_LONG_STACK_TRACES")||!_&&!l.env("BLUEBIRD_LONG_STACK_TRACES")),w=0!=l.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(g||!!l.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var e=this;setTimeout(function(){e._notifyUnhandledRejection()},1)}},n.prototype._notifyUnhandledRejectionIsHandled=function(){z("rejectionHandled",i,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),z("unhandledRejection",o,e,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(e,t,n){return L(e,t,n||this)},n.onPossiblyUnhandledRejection=function(e){var t=a();o="function"==typeof e?null===t?e:l.domainBind(t,e):void 0},n.onUnhandledRejectionHandled=function(e){var t=a();i="function"==typeof e?null===t?e:l.domainBind(t,e):void 0};var k=function(){};n.longStackTraces=function(){if(u.haveItemsQueued()&&!Y.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!Y.longStackTraces&&W()){var e=n.prototype._captureStackTrace,t=n.prototype._attachExtraTrace;Y.longStackTraces=!0,k=function(){if(u.haveItemsQueued()&&!Y.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=e,n.prototype._attachExtraTrace=t,r.deactivateLongStackTraces(),u.enableTrampoline(),Y.longStackTraces=!1},n.prototype._captureStackTrace=F,n.prototype._attachExtraTrace=U,r.activateLongStackTraces(),u.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return Y.longStackTraces&&W()};var x=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return l.global.dispatchEvent(e),function(e,t){var n=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!l.global.dispatchEvent(n)}}return"function"==typeof Event?(e=new Event("CustomEvent"),l.global.dispatchEvent(e),function(e,t){var n=new Event(e.toLowerCase(),{cancelable:!0});return n.detail=t,!l.global.dispatchEvent(n)}):((e=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),l.global.dispatchEvent(e),function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e.toLowerCase(),!1,!0,t),!l.global.dispatchEvent(n)})}catch(e){}return function(){return!1}}(),C=l.isNode?function(){return t.emit.apply(t,arguments)}:l.global?function(e){var t="on"+e.toLowerCase(),n=l.global[t];return!!n&&(n.apply(l.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function E(e,t){return{promise:t}}var S={promiseCreated:E,promiseFulfilled:E,promiseRejected:E,promiseResolved:E,promiseCancelled:E,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:E},T=function(e){var t=!1;try{t=C.apply(null,arguments)}catch(e){u.throwLater(e),t=!0}var n=!1;try{n=x(e,S[e].apply(null,arguments))}catch(e){u.throwLater(e),n=!0}return n||t};function O(){return!1}function P(e,t,n){var r=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+l.toString(e));r._attachCancellationCallback(e)})}catch(e){return e}}function A(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?l.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function I(){return this._onCancelField}function M(e){this._onCancelField=e}function R(){this._cancellationParent=void 0,this._onCancelField=void 0}function j(e,t){if(0!=(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}n.config=function(e){if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?n.longStackTraces():!e.longStackTraces&&n.hasLongStackTraces()&&k()),"warnings"in e){var t=e.warnings;Y.warnings=!!t,w=Y.warnings,l.isObject(t)&&"wForgottenReturn"in t&&(w=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!Y.cancellation){if(u.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=R,n.prototype._propagateFrom=j,n.prototype._onCancel=I,n.prototype._setOnCancel=M,n.prototype._attachCancellationCallback=A,n.prototype._execute=P,N=j,Y.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!Y.monitoring?(Y.monitoring=!0,n.prototype._fireEvent=T):!e.monitoring&&Y.monitoring&&(Y.monitoring=!1,n.prototype._fireEvent=O)),n},n.prototype._fireEvent=O,n.prototype._execute=function(e,t,n){try{e(t,n)}catch(e){return e}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(e){},n.prototype._attachCancellationCallback=function(e){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(e,t){};var N=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)};function D(){var e=this._boundTo;return void 0!==e&&e instanceof n?e.isFulfilled()?e.value():void 0:e}function F(){this._trace=new J(this._peekContext())}function U(e,t){if(f(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=B(e);l.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),l.notEnumerableProp(e,"__stackCleaned__",!0)}}}function L(e,t,r){if(Y.warnings){var i,o=new c(e);if(t)r._attachExtraTrace(o);else if(Y.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(o);else{var s=B(o);o.stack=s.message+"\n"+s.stack.join("\n")}T("warning",o)||q(o,"",!0)}}function V(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],i="    (No stack trace)"===r||v.test(r),o=i&&G(r);i&&!o&&(m&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function B(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&t.length>0?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||v.test(r))break}return n>0&&"SyntaxError"!=e.name&&(t=t.slice(n)),t}(e):["    (No stack trace)"],{message:n,stack:"SyntaxError"==e.name?t:V(t)}}function q(e,t,n){var r;"undefined"!=typeof console&&(r=l.isObject(e)?t+y(e.stack,e):t+String(e),"function"==typeof s?s(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r))}function z(e,t,n,r){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(e){u.throwLater(e)}"unhandledRejection"===e?T(e,n,r)||i||q(n,"Unhandled rejection "):T(e,r)}function H(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{if(t=e&&"function"==typeof e.toString?e.toString():l.toString(e),/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+function(e){return e.length<41?e:e.substr(0,38)+"..."}(t)+">, no stack trace)"}function W(){return"function"==typeof K}var G=function(){return!1},Z=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function Q(e){var t=e.match(Z);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function J(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);K(this,J),t>32&&this.uncycle()}l.inherits(J,Error),r.CapturedTrace=J,J.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],n={},r=0,i=this;void 0!==i;++r)t.push(i),i=i._parent;for(r=(e=this._length=r)-1;r>=0;--r){var o=t[r].stack;void 0===n[o]&&(n[o]=r)}for(r=0;r<e;++r){var s=n[t[r].stack];if(void 0!==s&&s!==r){s>0&&(t[s-1]._parent=void 0,t[s-1]._length=1),t[r]._parent=void 0,t[r]._length=1;var a=r>0?t[r-1]:this;s<e-1?(a._parent=t[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var u=a._length+1,c=r-2;c>=0;--c)t[c]._length=u,u++;return}}}},J.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=B(e),n=t.message,r=[t.stack],i=this;void 0!==i;)r.push(V(i.stack.split("\n"))),i=i._parent;!function(e){for(var t=e[0],n=1;n<e.length;++n){for(var r=e[n],i=t.length-1,o=t[i],s=-1,a=r.length-1;a>=0;--a)if(r[a]===o){s=a;break}for(a=s;a>=0&&t[i]===r[a];--a)t.pop(),i--;t=r}}(r),function(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}(r),l.notEnumerableProp(e,"stack",function(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}(n,r)),l.notEnumerableProp(e,"__stackCleaned__",!0)}};var K=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():H(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,v=e,y=t;var n=Error.captureStackTrace;return G=function(e){return h.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var r,i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return v=/@/,y=t,m=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(e){r="stack"in e}return"stack"in i||!r||"number"!=typeof Error.stackTraceLimit?(y=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?H(t):t.toString()},null):(v=e,y=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(s=function(e){console.warn(e)},l.isNode&&t.stderr.isTTY?s=function(e,t){console.warn((t?"\x1b[33m":"\x1b[31m")+e+"\x1b[0m\n")}:l.isNode||"string"!=typeof(new Error).stack||(s=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var Y={warnings:g,longStackTraces:!1,cancellation:!1,monitoring:!1};return b&&n.longStackTraces(),{longStackTraces:function(){return Y.longStackTraces},warnings:function(){return Y.warnings},cancellation:function(){return Y.cancellation},monitoring:function(){return Y.monitoring},propagateFromFunction:function(){return N},boundValueFunction:function(){return D},checkForgottenReturns:function(e,t,n,r,i){if(void 0===e&&null!==t&&w){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var o="",s="";if(t._trace){for(var a=t._trace.stack.split("\n"),u=V(a),c=u.length-1;c>=0;--c){var l=u[c];if(!d.test(l)){var f=l.match(p);f&&(o="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(u.length>0){var h=u[0];for(c=0;c<a.length;++c)if(a[c]===h){c>0&&(s="\n"+a[c-1]);break}}}r._warn("a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+s,!0,t)}},setBounds:function(e,t){if(W()){for(var n,r,i=e.stack.split("\n"),o=t.stack.split("\n"),s=-1,a=-1,u=0;u<i.length;++u)if(c=Q(i[u])){n=c.fileName,s=c.line;break}for(u=0;u<o.length;++u){var c;if(c=Q(o[u])){r=c.fileName,a=c.line;break}}s<0||a<0||!n||!r||n!==r||s>=a||(G=function(e){if(h.test(e))return!0;var t=Q(e);return!!(t&&t.fileName===n&&s<=t.line&&t.line<=a)})}},warn:L,deprecated:function(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),L(n)},CapturedTrace:J,fireDomEvent:x,fireGlobalEvent:C}}},{"./errors":12,"./util":36}],10:[function(e,t,n){"use strict";t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1];return this.caught(e,function(){throw t})},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var r=arguments[1];return r instanceof e&&r.suppressUnhandledRejections(),this.caught(n,function(){return r})}}},{}],11:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.reduce,r=e.all;function i(){return r(this)}e.prototype.each=function(e){return n(this,e,t,0)._then(i,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return n(this,e,t,t)},e.each=function(e,r){return n(e,r,t,0)._then(i,void 0,void 0,e,void 0)},e.mapSeries=function(e,r){return n(e,r,t,t)}}},{}],12:[function(e,t,n){"use strict";var r,i,o=e("./es5"),s=o.freeze,a=e("./util"),u=a.inherits,c=a.notEnumerableProp;function l(e,t){function n(r){if(!(this instanceof n))return new n(r);c(this,"message","string"==typeof r?r:t),c(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return u(n,Error),n}var f=l("Warning","warning"),h=l("CancellationError","cancellation error"),d=l("TimeoutError","timeout error"),p=l("AggregateError","aggregate error");try{r=TypeError,i=RangeError}catch(e){r=l("TypeError","type error"),i=l("RangeError","range error")}for(var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),y=0;y<v.length;++y)"function"==typeof Array.prototype[v[y]]&&(p.prototype[v[y]]=Array.prototype[v[y]]);o.defineProperty(p.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),p.prototype.isOperational=!0;var m=0;function _(e){if(!(this instanceof _))return new _(e);c(this,"name","OperationalError"),c(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(c(this,"message",e.message),c(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}p.prototype.toString=function(){var e=Array(4*m+1).join(" "),t="\n"+e+"AggregateError of:\n";m++,e=Array(4*m+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];t+=(r=i.join("\n"))+"\n"}return m--,t},u(_,Error);var g=Error.__BluebirdErrorTypes__;g||(g=s({CancellationError:h,TimeoutError:d,OperationalError:_,RejectionError:_,AggregateError:p}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:g,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:r,RangeError:i,CancellationError:g.CancellationError,OperationalError:g.OperationalError,TimeoutError:g.TimeoutError,AggregateError:g.AggregateError,Warning:f}},{"./es5":13,"./util":36}],13:[function(e,t,n){var r=function(){"use strict";return void 0===this}();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t};t.exports={isArray:function(e){try{return"[object Array]"===o.call(e)}catch(e){return!1}},keys:a,names:a,defineProperty:function(e,t,n){return e[t]=n.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(e){return s}},isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,r){return n(this,e,r,t)},e.filter=function(e,r,i){return n(e,r,i,t)}}},{}],15:[function(e,t,n){"use strict";t.exports=function(t,n,r){var i=e("./util"),o=t.CancellationError,s=i.errorObj,a=e("./catch_filter")(r);function u(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function c(e){this.finallyHandler=e}function l(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function f(){return d.call(this,this.promise._target()._settledValue())}function h(e){if(!l(this,e))return s.e=e,s}function d(e){var i=this.promise,a=this.handler;if(!this.called){this.called=!0;var u=this.isFinallyHandler()?a.call(i._boundValue()):a.call(i._boundValue(),e);if(u===r)return u;if(void 0!==u){i._setReturnedNonUndefined();var d=n(u,i);if(d instanceof t){if(null!=this.cancelPromise){if(d._isCancelled()){var p=new o("late cancellation observer");return i._attachExtraTrace(p),s.e=p,s}d.isPending()&&d._attachCancellationCallback(new c(this))}return d._then(f,h,void 0,this,void 0)}}}return i.isRejected()?(l(this),s.e=e,s):(l(this),e)}return u.prototype.isFinallyHandler=function(){return 0===this.type},c.prototype._resultCancelled=function(){l(this.finallyHandler)},t.prototype._passThrough=function(e,t,n,r){return"function"!=typeof e?this.then():this._then(n,r,void 0,new u(this,t,e),void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThrough(e,0,d,d)},t.prototype.tap=function(e){return this._passThrough(e,1,d)},t.prototype.tapCatch=function(e){var n=arguments.length;if(1===n)return this._passThrough(e,1,void 0,d);var r,o=new Array(n-1),s=0;for(r=0;r<n-1;++r){var u=arguments[r];if(!i.isObject(u))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+i.classString(u)));o[s++]=u}return o.length=s,this._passThrough(a(o,arguments[r],this),1,void 0,d)},u}},{"./catch_filter":7,"./util":36}],16:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,s){var a=e("./errors").TypeError,u=e("./util"),c=u.errorObj,l=u.tryCatch,f=[];function h(e,n,i,o){if(s.cancellation()){var a=new t(r),u=this._finallyPromise=new t(r);this._promise=a.lastly(function(){return u}),a._captureStackTrace(),a._setOnCancel(this)}else(this._promise=new t(r))._captureStackTrace();this._stack=o,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(f):f,this._yieldedPromise=null,this._cancellationPhase=!1}u.inherits(h,o),h.prototype._isResolved=function(){return null===this._promise},h.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},h.prototype._promiseCancelled=function(){if(!this._isResolved()){var e;if("undefined"!=typeof this._generator.return)this._promise._pushContext(),e=l(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),e=l(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},h.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=l(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},h.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=l(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},h.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},h.prototype.promise=function(){return this._promise},h.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},h.prototype._continue=function(e){var n=this._promise;if(e===c)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(e.e,!1);var r=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(o instanceof t||null!==(o=function(e,n,r){for(var o=0;o<n.length;++o){r._pushContext();var s=l(n[o])(e);if(r._popContext(),s===c){r._pushContext();var a=t.reject(c.e);return r._popContext(),a}var u=i(s,r);if(u instanceof t)return u}return null}(o,this._yieldHandlers,this._promise))){var s=(o=o._target())._bitField;0==(50397184&s)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&s)?t._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&s)?t._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new a("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},t.coroutine=function(e,t){if("function"!=typeof e)throw new a("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,r=h,i=(new Error).stack;return function(){var t=e.apply(this,arguments),o=new r(void 0,void 0,n,i),s=o.promise();return o._generator=t,o._promiseFulfilled(void 0),s}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new a("expecting a function but got "+u.classString(e));f.push(e)},t.spawn=function(e){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new h(e,this),i=r.promise();return r._run(t.spawn),i}}},{"./errors":12,"./util":36}],17:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,s){e("./util"),t.join=function(){var e,t=arguments.length-1;t>0&&"function"==typeof arguments[t]&&(e=arguments[t]);var r=[].slice.call(arguments);e&&r.pop();var i=new n(r).promise();return void 0!==e?i.spread(e):i}}},{"./util":36}],18:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,s){var a=t._getDomain,u=e("./util"),c=u.tryCatch,l=u.errorObj,f=t._async;function h(e,t,n,r){this.constructor$(e),this._promise._captureStackTrace();var i=a();this._callback=null===i?t:u.domainBind(i,t),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],f.invoke(this._asyncInit,this,void 0)}function d(e,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+u.classString(n));var s=0;if(void 0!==i){if("object"!=typeof i||null===i)return t.reject(new TypeError("options argument must be an object but it is "+u.classString(i)));if("number"!=typeof i.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+u.classString(i.concurrency)));s=i.concurrency}return new h(e,n,s="number"==typeof s&&isFinite(s)&&s>=1?s:0,o).promise()}u.inherits(h,n),h.prototype._asyncInit=function(){this._init$(void 0,-2)},h.prototype._init=function(){},h.prototype._promiseFulfilled=function(e,n){var r=this._values,o=this.length(),a=this._preservedValues,u=this._limit;if(n<0){if(r[n=-1*n-1]=e,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return r[n]=e,this._queue.push(n),!1;null!==a&&(a[n]=e);var f=this._promise,h=this._callback,d=f._boundValue();f._pushContext();var p=c(h).call(d,e,n,o),v=f._popContext();if(s.checkForgottenReturns(p,v,null!==a?"Promise.filter":"Promise.map",f),p===l)return this._reject(p.e),!0;var y=i(p,this._promise);if(y instanceof t){var m=(y=y._target())._bitField;if(0==(50397184&m))return u>=1&&this._inFlight++,r[n]=y,y._proxy(this,-1*(n+1)),!1;if(0==(33554432&m))return 0!=(16777216&m)?(this._reject(y._reason()),!0):(this._cancel(),!0);p=y._value()}r[n]=p}return++this._totalResolved>=o&&(null!==a?this._filter(r,a):this._resolve(r),!0)},h.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},h.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),i=0,o=0;o<n;++o)e[o]&&(r[i++]=t[o]);r.length=i,this._resolve(r)},h.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return d(this,e,t,null)},t.map=function(e,t,n,r){return d(e,t,n,r)}}},{"./util":36}],19:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o){var s=e("./util"),a=s.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+s.classString(e));return function(){var r=new t(n);r._captureStackTrace(),r._pushContext();var i=a(e).apply(this,arguments),s=r._popContext();return o.checkForgottenReturns(i,s,"Promise.method",r),r._resolveFromSyncValue(i),r}},t.attempt=t.try=function(e){if("function"!=typeof e)return i("expecting a function but got "+s.classString(e));var r,u=new t(n);if(u._captureStackTrace(),u._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],l=arguments[2];r=s.isArray(c)?a(e).apply(l,c):a(e).call(l,c)}else r=a(e)();var f=u._popContext();return o.checkForgottenReturns(r,f,"Promise.try",u),u._resolveFromSyncValue(r),u},t.prototype._resolveFromSyncValue=function(e){e===s.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,n){"use strict";var r=e("./util"),i=r.maybeWrapAsError,o=e("./errors").OperationalError,s=e("./es5"),a=/^(?:name|message|stack|cause)$/;t.exports=function(e,t){return function(n,u){if(null!==e){if(n){var c=function(e){var t;if(function(e){return e instanceof Error&&s.getPrototypeOf(e)===Error.prototype}(e)){(t=new o(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var n=s.keys(e),i=0;i<n.length;++i){var u=n[i];a.test(u)||(t[u]=e[u])}return t}return r.markAsOriginatingFromRejection(e),e}(i(n));e._attachExtraTrace(c),e._reject(c)}else if(t){var l=[].slice.call(arguments,1);e._fulfill(l)}else e._fulfill(u);e=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,n){"use strict";t.exports=function(t){var n=e("./util"),r=t._async,i=n.tryCatch,o=n.errorObj;function s(e,t){if(!n.isArray(e))return a.call(this,e,t);var s=i(t).apply(this._boundValue(),[null].concat(e));s===o&&r.throwLater(s.e)}function a(e,t){var n=this._boundValue(),s=void 0===e?i(t).call(n,null):i(t).call(n,null,e);s===o&&r.throwLater(s.e)}function u(e,t){if(!e){var n=new Error(e+"");n.cause=e,e=n}var s=i(t).call(this._boundValue(),e);s===o&&r.throwLater(s.e)}t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var n=a;void 0!==t&&Object(t).spread&&(n=s),this._then(n,u,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,n,r){"use strict";n.exports=function(){var r=function(){return new p("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},i=function(){return new P.PromiseInspection(this._target())},o=function(e){return P.reject(new p(e))};function s(){}var a,u={},c=e("./util");c.notEnumerableProp(P,"_getDomain",a=c.isNode?function(){var e=t.domain;return void 0===e&&(e=null),e}:function(){return null});var l=e("./es5"),f=e("./async"),h=new f;l.defineProperty(P,"_async",{value:h});var d=e("./errors"),p=P.TypeError=d.TypeError;P.RangeError=d.RangeError;var v=P.CancellationError=d.CancellationError;P.TimeoutError=d.TimeoutError,P.OperationalError=d.OperationalError,P.RejectionError=d.OperationalError,P.AggregateError=d.AggregateError;var y=function(){},m={},_={},g=e("./thenables")(P,y),b=e("./promise_array")(P,y,g,o,s),w=e("./context")(P),k=w.create,x=e("./debuggability")(P,w),C=e("./finally")(P,g,_),E=e("./catch_filter")(_),S=e("./nodeback"),T=c.errorObj,O=c.tryCatch;function P(e){e!==y&&function(e,t){if(null==e||e.constructor!==P)throw new p("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new p("expecting a function but got "+c.classString(t))}(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function A(e){this.promise._resolveCallback(e)}function I(e){this.promise._rejectCallback(e,!1)}function M(e){var t=new P(y);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}return P.prototype.toString=function(){return"[object Promise]"},P.prototype.caught=P.prototype.catch=function(e){var t=arguments.length;if(t>1){var n,r=new Array(t-1),i=0;for(n=0;n<t-1;++n){var s=arguments[n];if(!c.isObject(s))return o("Catch statement predicate: expecting an object but got "+c.classString(s));r[i++]=s}return r.length=i,this.then(void 0,E(r,e=arguments[n],this))}return this.then(void 0,e)},P.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},P.prototype.then=function(e,t){if(x.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+c.classString(e);arguments.length>1&&(n+=", "+c.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},P.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},P.prototype.spread=function(e){return"function"!=typeof e?o("expecting a function but got "+c.classString(e)):this.all()._then(e,void 0,void 0,m,void 0)},P.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},P.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new b(this).promise()},P.prototype.error=function(e){return this.caught(c.originatesFromRejection,e)},P.getNewLibraryCopy=n.exports,P.is=function(e){return e instanceof P},P.fromNode=P.fromCallback=function(e){var t=new P(y);t._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=O(e)(S(t,n));return r===T&&t._rejectCallback(r.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},P.all=function(e){return new b(e).promise()},P.resolve=P.fulfilled=P.cast=function(e){var t=g(e);return t instanceof P||((t=new P(y))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},P.reject=P.rejected=function(e){var t=new P(y);return t._captureStackTrace(),t._rejectCallback(e,!0),t},P.setScheduler=function(e){if("function"!=typeof e)throw new p("expecting a function but got "+c.classString(e));return h.setScheduler(e)},P.prototype._then=function(e,t,n,r,i){var o=void 0!==i,s=o?i:new P(y),u=this._target(),l=u._bitField;o||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&l)?this._boundValue():u===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var f=a();if(0!=(50397184&l)){var d,p,m=u._settlePromiseCtx;0!=(33554432&l)?(p=u._rejectionHandler0,d=e):0!=(16777216&l)?(p=u._fulfillmentHandler0,d=t,u._unsetRejectionIsUnhandled()):(m=u._settlePromiseLateCancellationObserver,p=new v("late cancellation observer"),u._attachExtraTrace(p),d=t),h.invoke(m,u,{handler:null===f?d:"function"==typeof d&&c.domainBind(f,d),promise:s,receiver:r,value:p})}else u._addCallbacks(e,t,s,r,f);return s},P.prototype._length=function(){return 65535&this._bitField},P.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},P.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},P.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},P.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},P.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},P.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},P.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},P.prototype._isFinal=function(){return(4194304&this._bitField)>0},P.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},P.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},P.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},P.prototype._setAsyncGuaranteed=function(){h.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},P.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==u)return void 0===t&&this._isBound()?this._boundValue():t},P.prototype._promiseAt=function(e){return this[4*e-4+2]},P.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},P.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},P.prototype._boundValue=function(){},P.prototype._migrateCallback0=function(e){var t=e._fulfillmentHandler0,n=e._rejectionHandler0,r=e._promise0,i=e._receiverAt(0);void 0===i&&(i=u),this._addCallbacks(t,n,r,i,null)},P.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),i=e._promiseAt(t),o=e._receiverAt(t);void 0===o&&(o=u),this._addCallbacks(n,r,i,o,null)},P.prototype._addCallbacks=function(e,t,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof e&&(this._fulfillmentHandler0=null===i?e:c.domainBind(i,e)),"function"==typeof t&&(this._rejectionHandler0=null===i?t:c.domainBind(i,t));else{var s=4*o-4;this[s+2]=n,this[s+3]=r,"function"==typeof e&&(this[s+0]=null===i?e:c.domainBind(i,e)),"function"==typeof t&&(this[s+1]=null===i?t:c.domainBind(i,t))}return this._setLength(o+1),o},P.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},P.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(r(),!1);var n=g(e,this);if(!(n instanceof P))return this._fulfill(e);t&&this._propagateFrom(n,2);var i=n._target();if(i!==this){var o=i._bitField;if(0==(50397184&o)){var s=this._length();s>0&&i._migrateCallback0(this);for(var a=1;a<s;++a)i._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if(0!=(33554432&o))this._fulfill(i._value());else if(0!=(16777216&o))this._reject(i._reason());else{var u=new v("late cancellation observer");i._attachExtraTrace(u),this._reject(u)}}else this._reject(r())}},P.prototype._rejectCallback=function(e,t,n){var r=c.ensureErrorObject(e),i=r===e;if(!i&&!n&&x.warnings()){var o="a promise was rejected with a non-error: "+c.classString(e);this._warn(o,!0)}this._attachExtraTrace(r,!!t&&i),this._reject(e)},P.prototype._resolveFromExecutor=function(e){if(e!==y){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1,this._popContext(),void 0!==r&&t._rejectCallback(r,!0)}},P.prototype._settlePromiseFromHandler=function(e,t,n,r){var i=r._bitField;if(0==(65536&i)){var o;r._pushContext(),t===m?n&&"number"==typeof n.length?o=O(e).apply(this._boundValue(),n):(o=T).e=new p("cannot .spread() a non-array: "+c.classString(n)):o=O(e).call(t,n);var s=r._popContext();0==(65536&(i=r._bitField))&&(o===_?r._reject(n):o===T?r._rejectCallback(o.e,!1):(x.checkForgottenReturns(o,s,"",r,this),r._resolveCallback(o)))}},P.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},P.prototype._followee=function(){return this._rejectionHandler0},P.prototype._setFollowee=function(e){this._rejectionHandler0=e},P.prototype._settlePromise=function(e,t,n,r){var o=e instanceof P,a=this._bitField,u=0!=(134217728&a);0!=(65536&a)?(o&&e._invokeInternalOnCancel(),n instanceof C&&n.isFinallyHandler()?(n.cancelPromise=e,O(t).call(n,r)===T&&e._reject(T.e)):t===i?e._fulfill(i.call(n)):n instanceof s?n._promiseCancelled(e):o||e instanceof b?e._cancel():n.cancel()):"function"==typeof t?o?(u&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,n,r,e)):t.call(n,r,e):n instanceof s?n._isResolved()||(0!=(33554432&a)?n._promiseFulfilled(r,e):n._promiseRejected(r,e)):o&&(u&&e._setAsyncGuaranteed(),0!=(33554432&a)?e._fulfill(r):e._reject(r))},P.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,r=e.receiver,i=e.value;"function"==typeof t?n instanceof P?this._settlePromiseFromHandler(t,r,i,n):t.call(r,i,n):n instanceof P&&n._reject(i)},P.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},P.prototype._settlePromise0=function(e,t,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,e,i,t)},P.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},P.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=r();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!=(134217728&t)?this._settlePromises():h.settlePromises(this))}},P.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return h.fatalError(e,c.isNode);(65535&t)>0?h.settlePromises(this):this._ensurePossibleRejectionHandled()}},P.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},P.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},P.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!=(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},P.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},P.defer=P.pending=function(){return x.deprecated("Promise.defer","new Promise"),{promise:new P(y),resolve:A,reject:I}},c.notEnumerableProp(P,"_makeSelfResolutionError",r),e("./method")(P,y,g,o,x),e("./bind")(P,y,g,x),e("./cancel")(P,b,o,x),e("./direct_resolve")(P),e("./synchronous_inspection")(P),e("./join")(P,b,g,y,h,a),P.Promise=P,P.version="3.5.1",e("./map.js")(P,b,o,g,y,x),e("./call_get.js")(P),e("./using.js")(P,o,g,k,y,x),e("./timers.js")(P,y,x),e("./generators.js")(P,o,y,g,s,x),e("./nodeify.js")(P),e("./promisify.js")(P,y),e("./props.js")(P,b,g,o),e("./race.js")(P,y,g,o),e("./reduce.js")(P,b,o,g,y,x),e("./settle.js")(P,b,x),e("./some.js")(P,b,o),e("./filter.js")(P,y),e("./each.js")(P,y),e("./any.js")(P),c.toFastProperties(P),c.toFastProperties(P.prototype),M({a:1}),M({b:2}),M({c:3}),M(1),M(function(){}),M(void 0),M(!1),M(new P(y)),x.setBounds(f.firstLineError,c.lastLineError),P}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o){var s=e("./util");function a(e){var r=this._promise=new t(n);e instanceof t&&r._propagateFrom(e,3),r._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return s.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function e(n,o){var a=r(this._values,this._promise);if(a instanceof t){var u=(a=a._target())._bitField;if(this._values=a,0==(50397184&u))return this._promise._setAsyncGuaranteed(),a._then(e,this._reject,void 0,this,o);if(0==(33554432&u))return 0!=(16777216&u)?this._reject(a._reason()):this._cancel();a=a._value()}if(null!==(a=s.asArray(a)))0!==a.length?this._iterate(a):-5===o?this._resolveEmptyArray():this._resolve(function(e){switch(o){case-2:return[];case-3:return{};case-6:return new Map}}());else{var c=i("expecting an array or an iterable object but got "+s.classString(a)).reason();this._promise._rejectCallback(c,!1)}},a.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,s=null,a=0;a<n;++a){var u=r(e[a],i);s=u instanceof t?(u=u._target())._bitField:null,o?null!==s&&u.suppressUnhandledRejections():null!==s?0==(50397184&s)?(u._proxy(this,a),this._values[a]=u):o=0!=(33554432&s)?this._promiseFulfilled(u._value(),a):0!=(16777216&s)?this._promiseRejected(u._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(u,a)}o||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},a.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(e){return e},a}},{"./util":36}],24:[function(e,t,n){"use strict";t.exports=function(t,n){var r={},i=e("./util"),o=e("./nodeback"),s=i.withAppended,a=i.maybeWrapAsError,u=i.canEvaluate,c=e("./errors").TypeError,l={__isPromisified__:!0},f=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),h=function(e){return i.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e};function d(e){return!f.test(e)}function p(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function v(e,t,n){var r=i.getDataPropertyOrDefault(e,t+n,l);return!!r&&p(r)}var y=function(e){return e.replace(/([$])/,"\\$")},m=u?void 0:function(e,u,c,l,f,h){var d=function(){return this}(),p=e;function v(){var i=u;u===r&&(i=this);var c=new t(n);c._captureStackTrace();var l="string"==typeof p&&this!==d?this[p]:e,f=o(c,h);try{l.apply(i,s(arguments,f))}catch(e){c._rejectCallback(a(e),!0,!0)}return c._isFateSealed()||c._setAsyncGuaranteed(),c}return"string"==typeof p&&(e=l),i.notEnumerableProp(v,"__isPromisified__",!0),v};function _(e,t,n,o,s){for(var a=new RegExp(y(t)+"$"),u=function(e,t,n,r){for(var o=i.inheritedDataKeys(e),s=[],a=0;a<o.length;++a){var u=o[a],l=e[u],f=r===h||h(u,l,e);"function"!=typeof l||p(l)||v(e,u,t)||!r(u,l,e,f)||s.push(u,l)}return function(e,t,n){for(var r=0;r<e.length;r+=2){var i=e[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<e.length;s+=2)if(e[s]===o)throw new c("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}(s,t,n),s}(e,t,a,n),l=0,f=u.length;l<f;l+=2){var d=u[l],_=u[l+1],g=d+t;if(o===m)e[g]=m(d,r,d,_,t,s);else{var b=o(_,function(){return m(d,r,d,_,t,s)});i.notEnumerableProp(b,"__isPromisified__",!0),e[g]=b}}return i.toFastProperties(e),e}t.promisify=function(e,t){if("function"!=typeof e)throw new c("expecting a function but got "+i.classString(e));if(p(e))return e;var n=function(e,n,r){return m(e,n,void 0,e,null,!!t.multiArgs)}(e,void 0===(t=Object(t)).context?r:t.context);return i.copyDescriptors(e,n,d),n},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new c("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(t=Object(t)).multiArgs,r=t.suffix;"string"!=typeof r&&(r="Async");var o=t.filter;"function"!=typeof o&&(o=h);var s=t.promisifier;if("function"!=typeof s&&(s=m),!i.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=i.inheritedDataKeys(e),u=0;u<a.length;++u){var l=e[a[u]];"constructor"!==a[u]&&i.isClass(l)&&(_(l.prototype,r,o,s,n),_(l,r,o,s,n))}return _(e,r,o,s,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var o,s=e("./util"),a=s.isObject,u=e("./es5");"function"==typeof Map&&(o=Map);var c=function(){var e=0,t=0;function n(n,r){this[e]=n,this[e+t]=r,e++}return function(r){t=r.size,e=0;var i=new Array(2*r.size);return r.forEach(n,i),i}}();function l(e){var t,n=!1;if(void 0!==o&&e instanceof o)t=c(e),n=!0;else{var r=u.keys(e),i=r.length;t=new Array(2*i);for(var s=0;s<i;++s){var a=r[s];t[s]=e[a],t[s+i]=a}}this.constructor$(t),this._isMap=n,this._init$(void 0,n?-6:-3)}function f(e){var n,o=r(e);return a(o)?(n=o instanceof t?o._then(t.props,void 0,void 0,void 0,void 0):new l(o).promise(),o instanceof t&&n._propagateFrom(o,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}s.inherits(l,n),l.prototype._init=function(){},l.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(e){for(var t=new o,n=e.length/2|0,r=0;r<n;++r)t.set(e[n+r],e[r]);return t}(this._values);else{n={};for(var r=this.length(),i=0,s=this.length();i<s;++i)n[this._values[i+r]]=this._values[i]}return this._resolve(n),!0}return!1},l.prototype.shouldCopyValues=function(){return!1},l.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return f(this)},t.props=function(e){return f(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,n){"use strict";function r(e){this._capacity=e,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(e){return this._capacity<e},r.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},r.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=n,this._length=r},r.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,function(e,t,n,r,i){for(var o=0;o<i;++o)n[o+r]=e[o+0],e[o+0]=void 0}(this,0,this,t,this._front+this._length&t-1)},t.exports=r},{}],27:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var o=e("./util"),s=function(e){return e.then(function(t){return a(t,e)})};function a(e,a){var u=r(e);if(u instanceof t)return s(u);if(null===(e=o.asArray(e)))return i("expecting an array or an iterable object but got "+o.classString(e));var c=new t(n);void 0!==a&&c._propagateFrom(a,3);for(var l=c._fulfill,f=c._reject,h=0,d=e.length;h<d;++h){var p=e[h];(void 0!==p||h in e)&&t.cast(p)._then(l,f,void 0,c,null)}return c}t.race=function(e){return a(e,void 0)},t.prototype.race=function(){return a(this,void 0)}}},{"./util":36}],28:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,s){var a=t._getDomain,u=e("./util"),c=u.tryCatch;function l(e,n,r,i){this.constructor$(e);var s=a();this._fn=null===s?n:u.domainBind(s,n),void 0!==r&&(r=t.resolve(r))._attachCancellationCallback(this),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function f(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function h(e,t,n,i){return"function"!=typeof t?r("expecting a function but got "+u.classString(t)):new l(e,t,n,i).promise()}function d(e){this.accum=e,this.array._gotAccum(e);var n=i(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(p,void 0,void 0,this,void 0)):p.call(this,n)}function p(e){var n,r=this.array,i=r._promise,o=c(r._fn);i._pushContext(),(n=void 0!==r._eachValues?o.call(i._boundValue(),e,this.index,this.length):o.call(i._boundValue(),this.accum,e,this.index,this.length))instanceof t&&(r._currentCancellable=n);var a=i._popContext();return s.checkForgottenReturns(n,a,void 0!==r._eachValues?"Promise.each":"Promise.reduce",i),n}u.inherits(l,n),l.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==o&&this._eachValues.push(e)},l.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},l.prototype._init=function(){},l.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},l.prototype.shouldCopyValues=function(){return!1},l.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},l.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel())},l.prototype._iterate=function(e){var n,r;this._values=e;var i=e.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=t.resolve(e[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<i;++r)n=n._then(d,void 0,void 0,{accum:null,value:e[r],index:r,length:i,array:this},void 0);void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(f,f,void 0,n,this)},t.prototype.reduce=function(e,t){return h(this,e,t,null)},t.reduce=function(e,t,n,r){return h(e,t,n,r)}}},{"./util":36}],29:[function(e,r,i){"use strict";var o,s,a,u,c,l=e("./util"),f=l.getNativePromise();if(l.isNode&&"undefined"==typeof MutationObserver){var h=n.setImmediate,d=t.nextTick;o=l.isRecentNode?function(e){h.call(n,e)}:function(e){d.call(t,e)}}else if("function"==typeof f&&"function"==typeof f.resolve){var p=f.resolve();o=function(e){p.then(e)}}else o="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:(s=document.createElement("div"),a={attributes:!0},u=!1,c=document.createElement("div"),new MutationObserver(function(){s.classList.toggle("foo"),u=!1}).observe(c,a),function(e){var t=new MutationObserver(function(){t.disconnect(),e()});t.observe(s,a),u||(u=!0,c.classList.toggle("foo"))});r.exports=o},{"./util":36}],30:[function(e,t,n){"use strict";t.exports=function(t,n,r){var i=t.PromiseInspection;function o(e){this.constructor$(e)}e("./util").inherits(o,n),o.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(e,t){var n=new i;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},o.prototype._promiseRejected=function(e,t){var n=new i;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},t.settle=function(e){return r.deprecated(".settle()",".reflect()"),new o(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,n){"use strict";t.exports=function(t,n,r){var i=e("./util"),o=e("./errors").RangeError,s=e("./errors").AggregateError,a=i.isArray,u={};function c(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function l(e,t){if((0|t)!==t||t<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new c(e),i=n.promise();return n.setHowMany(t),n.init(),i}i.inherits(c,n),c.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var e=a(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(e){this._howMany=e},c.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},c.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},c.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(u),this._checkOutcome())},c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new s,t=this.length();t<this._values.length;++t)this._values[t]!==u&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(e){this._values.push(e)},c.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(e){return new o("Input array must contain at least "+this._howMany+" items but contains only "+e+" items")},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return l(e,t)},t.prototype.some=function(e){return l(this,e)},t._SomePromiseArray=c}},{"./errors":12,"./util":36}],32:[function(e,t,n){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},s=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return s.call(this._target())},e.prototype.isRejected=function(){return o.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return a.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,n){"use strict";t.exports=function(t,n){var r=e("./util"),i=r.errorObj,o=r.isObject,s={}.hasOwnProperty;return function(e,a){if(o(e)){if(e instanceof t)return e;var u=function(e){try{return function(e){return e.then}(e)}catch(e){return i.e=e,i}}(e);if(u===i){a&&a._pushContext();var c=t.reject(u.e);return a&&a._popContext(),c}if("function"==typeof u)return function(e){try{return s.call(e,"_promise0")}catch(e){return!1}}(e)?(c=new t(n),e._then(c._fulfill,c._reject,void 0,c,null),c):function(e,o,s){var a=new t(n),u=a;s&&s._pushContext(),a._captureStackTrace(),s&&s._popContext();var c=!0,l=r.tryCatch(o).call(e,function(e){a&&(a._resolveCallback(e),a=null)},function(e){a&&(a._rejectCallback(e,c,!0),a=null)});return c=!1,a&&l===i&&(a._rejectCallback(l.e,!0,!0),a=null),u}(e,u,a)}return e}}},{"./util":36}],34:[function(e,t,n){"use strict";t.exports=function(t,n,r){var i=e("./util"),o=t.TimeoutError;function s(e){this.handle=e}s.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(e){return u(+this).thenReturn(e)},u=t.delay=function(e,i){var o,u;return void 0!==i?(o=t.resolve(i)._then(a,null,null,e,void 0),r.cancellation()&&i instanceof t&&o._setOnCancel(i)):(o=new t(n),u=setTimeout(function(){o._fulfill()},+e),r.cancellation()&&o._setOnCancel(new s(u)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};function c(e){return clearTimeout(this.handle),e}function l(e){throw clearTimeout(this.handle),e}t.prototype.delay=function(e){return u(e,this)},t.prototype.timeout=function(e,t){var n,a;e=+e;var u=new s(setTimeout(function(){n.isPending()&&function(e,t,n){var r;r="string"!=typeof t?t instanceof Error?t:new o("operation timed out"):new o(t),i.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._reject(r),null!=n&&n.cancel()}(n,t,a)},e));return r.cancellation()?(a=this.then(),(n=a._then(c,l,void 0,u,void 0))._setOnCancel(u)):n=this._then(c,l,void 0,u,void 0),n}}},{"./util":36}],35:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,s){var a=e("./util"),u=e("./errors").TypeError,c=e("./util").inherits,l=a.errorObj,f=a.tryCatch,h={};function d(e){setTimeout(function(){throw e},0)}function p(e,t,n){this._data=e,this._promise=t,this._context=n}function v(e,t,n){this.constructor$(e,t,n)}function y(e){return p.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function m(e){this.length=e,this.promise=null,this[e-1]=null}p.prototype.data=function(){return this._data},p.prototype.promise=function(){return this._promise},p.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():h},p.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=t!==h?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},p.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},c(v,p),v.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},m.prototype._resultCancelled=function(){for(var e=this.length,n=0;n<e;++n){var r=this[n];r instanceof t&&r.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return n("you must pass at least 2 arguments to Promise.using");var i,u=arguments[e-1];if("function"!=typeof u)return n("expecting a function but got "+a.classString(u));var c=!0;2===e&&Array.isArray(arguments[0])?(e=(i=arguments[0]).length,c=!1):(i=arguments,e--);for(var h=new m(e),v=0;v<e;++v){var _=i[v];if(p.isDisposer(_)){var g=_;(_=_.promise())._setDisposable(g)}else{var b=r(_);b instanceof t&&(_=b._then(y,null,null,{resources:h,index:v},void 0))}h[v]=_}var w=new Array(h.length);for(v=0;v<w.length;++v)w[v]=t.resolve(h[v]).reflect();var k=t.all(w).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return l.e=n.error(),l;if(!n.isFulfilled())return void k.cancel();e[t]=n.value()}x._pushContext(),u=f(u);var r=c?u.apply(void 0,e):u(e),i=x._popContext();return s.checkForgottenReturns(r,i,"Promise.using",x),r}),x=k.lastly(function(){var e=new t.PromiseInspection(k);return function(e,n){var i=0,s=e.length,a=new t(o);return function o(){if(i>=s)return a._fulfill();var u=function(e){var t=r(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}(e[i++]);if(u instanceof t&&u._isDisposable()){try{u=r(u._getDisposer().tryDispose(n),e.promise)}catch(e){return d(e)}if(u instanceof t)return u._then(o,d,null,null,null)}o()}(),a}(h,e)});return h.promise=x,x._setOnCancel(h),x},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new v(e,this,i());throw new u}}},{"./errors":12,"./util":36}],36:[function(e,r,i){"use strict";var o,s=e("./es5"),a="undefined"==typeof navigator,u={e:{}},c="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof n?n:void 0!==this?this:null;function l(){try{var e=o;return o=null,e.apply(this,arguments)}catch(e){return u.e=e,u}}function f(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function h(e,t,n){return f(e)?e:(s.defineProperty(e,t,{value:n,configurable:!0,enumerable:!1,writable:!0}),e)}var d=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(s.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var r=[],i=Object.create(null);null!=e&&!t(e);){var o;try{o=n(e)}catch(e){return r}for(var a=0;a<o.length;++a){var u=o[a];if(!i[u]){i[u]=!0;var c=Object.getOwnPropertyDescriptor(e,u);null!=c&&null==c.get&&null==c.set&&r.push(u)}}e=s.getPrototypeOf(e)}return r}}var r={}.hasOwnProperty;return function(n){if(t(n))return[];var i=[];e:for(var o in n)if(r.call(n,o))i.push(o);else{for(var s=0;s<e.length;++s)if(r.call(e[s],o))continue e;i.push(o)}return i}}(),p=/this\s*\.\s*\S+\s*=/,v=/^[a-z$_][a-z$_0-9]*$/i;function y(e){try{return e+""}catch(e){return"[no string representation]"}}function m(e){return e instanceof Error||null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function _(e){return m(e)&&s.propertyIsWritable(e,"stack")}var g="stack"in new Error?function(e){return _(e)?e:new Error(y(e))}:function(e){if(_(e))return e;try{throw new Error(y(e))}catch(e){return e}};function b(e){return{}.toString.call(e)}var w=function(e){return s.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var k="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n};w=function(e){return s.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?k(e):null}}var x,C="undefined"!=typeof t&&"[object process]"===b(t).toLowerCase(),E="undefined"!=typeof t&&"undefined"!=typeof t.env,S={isClass:function(e){try{if("function"==typeof e){var t=s.names(e.prototype),n=s.isES5&&t.length>1,r=t.length>0&&!(1===t.length&&"constructor"===t[0]),i=p.test(e+"")&&s.names(e).length>0;if(n||r||i)return!0}return!1}catch(e){return!1}},isIdentifier:function(e){return v.test(e)},inheritedDataKeys:d,getDataPropertyOrDefault:function(e,t,n){if(!s.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0},thrower:function(e){throw e},isArray:s.isArray,asArray:w,notEnumerableProp:h,isPrimitive:f,isObject:function(e){return"function"==typeof e||"object"==typeof e&&null!==e},isError:m,canEvaluate:a,errorObj:u,tryCatch:function(e){return o=e,l},inherits:function(e,t){var n={}.hasOwnProperty;function r(){for(var r in this.constructor=e,this.constructor$=t,t.prototype)n.call(t.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=t.prototype[r])}return r.prototype=t.prototype,e.prototype=new r,e.prototype},withAppended:function(e,t){var n,r=e.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=e[n];return i[n]=t,i},maybeWrapAsError:function(e){return f(e)?new Error(y(e)):e},toFastProperties:function(e){function t(){}t.prototype=e;for(var n=8;n--;)new t;return e},filledRange:function(e,t,n){for(var r=new Array(e),i=0;i<e;++i)r[i]=t+i+n;return r},toString:y,canAttachTrace:_,ensureErrorObject:g,originatesFromRejection:function(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)},markAsOriginatingFromRejection:function(e){try{h(e,"isOperational",!0)}catch(e){}},classString:b,copyDescriptors:function(e,t,n){for(var r=s.names(e),i=0;i<r.length;++i){var o=r[i];if(n(o))try{s.defineProperty(t,o,s.getDescriptor(e,o))}catch(e){}}},hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:C,hasEnvVariables:E,env:function(e){return E?t.env[e]:void 0},global:c,getNativePromise:function(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(e){}},domainBind:function(e,t){return e.bind(t)}};S.isRecentNode=S.isNode&&(0===(x=t.versions.node.split(".").map(Number))[0]&&x[1]>10||x[0]>0),S.isNode&&S.toFastProperties(t);try{throw new Error}catch(e){S.lastLineError=e}r.exports=S},{"./es5":13}]},{},[4])(4)},e.exports=r(),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(t,n("W2nU"),n("DuR2"))},"0m72":function(e,t,n){"use strict";var r=h(n("mvHQ")),i=h(n("Xxa5")),o=h(n("ifoU")),s=h(n("Zx67")),a=h(n("Zrlr")),u=h(n("wxAW")),c=h(n("zwoO")),l=h(n("Pf15")),f=h(n("//Fk"));function h(e){return e&&e.__esModule?e:{default:e}}var d=function(e,t,n,r){return new(n||(n=f.default))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var p=n("vzCy"),v=n("P35s"),y=n("b1mB"),m=n("WuwA"),_=v.Logger.scope(""),g=function(e){function t(e,n){(0,a.default)(this,t);var r=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this));return r.channel=e,r.services=n,r.messagesByIndex=new o.default,r.messagesListPromise=null,r}return(0,l.default)(t,p.EventEmitter),(0,u.default)(t,[{key:"subscribe",value:function(e){var t=this;return this.messagesListPromise=this.messagesListPromise||this.services.syncClient.list({id:e,mode:"open_existing"}).then(function(e){return e.on("itemAdded",function(e){var n=new y.Message(t.channel,t.services,e.item.index,e.item.value);t.messagesByIndex.has(n.index)?_.debug("Message arrived, but already known and ignored",t.channel.sid,n.index):(t.messagesByIndex.set(n.index,n),n.on("updated",function(){return t.emit("messageUpdated",n)}),t.emit("messageAdded",n))}),e.on("itemRemoved",function(e){var n=e.index;if(t.messagesByIndex.has(n)){var r=t.messagesByIndex.get(n);t.messagesByIndex.delete(r.index),r.removeAllListeners("updated"),t.emit("messageRemoved",r)}}),e.on("itemUpdated",function(e){var n=t.messagesByIndex.get(e.item.index);n&&n._update(e.item.value)}),e}).catch(function(e){throw t.messagesListPromise=null,_.error("Failed to get messages object for channel",t.channel.sid,e),e})}},{key:"unsubscribe",value:function(){return d(this,void 0,void 0,i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.messagesListPromise){e.next=6;break}return e.next=3,this.messagesListPromise;case 3:e.sent.close(),this.messagesListPromise=null;case 6:case"end":return e.stop()}},e,this)}))}},{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d(this,void 0,void 0,i.default.mark(function n(){return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(_.debug("Sending text message",e,t),t.constructor===Object){n.next=3;break}throw new Error("Attributes must be a valid JSON object");case 3:return n.abrupt("return",this.services.session.addCommand("sendMessage",{channelSid:this.channel.sid,text:e,attributes:(0,r.default)(t)}));case 4:case"end":return n.stop()}},n,this)}))}},{key:"sendMedia",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d(this,void 0,void 0,i.default.mark(function n(){var o,s;return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(_.debug("Sending media message",e,t),t.constructor===Object){n.next=3;break}throw new Error("Attributes must be a valid JSON object");case 3:if(o=void 0,!(e instanceof m)){n.next=11;break}return _.debug("Sending media message as FormData",e,t),n.next=8,this.services.mcsClient.postFormData(e);case 8:o=n.sent,n.next=18;break;case 11:if(_.debug("Sending media message as SendMediaOptions",e,t),(s=e).contentType&&s.media){n.next=15;break}throw new Error("Media content <Channel#SendMediaOptions> must contain non-empty contentType and media");case 15:return n.next=17,this.services.mcsClient.post(s.contentType,s.media);case 17:o=n.sent;case 18:return n.abrupt("return",this.services.session.addCommand("sendMediaMessage",{channelSid:this.channel.sid,mediaSid:o.sid,attributes:(0,r.default)(t)}));case 19:case"end":return n.stop()}},n,this)}))}},{key:"getMessages",value:function(e,t,n){return this._getMessages(e,t="undefined"!=typeof t?t:"end",n=n||"backwards")}},{key:"wrapPaginator",value:function(e,t,n){var r=this,i="desc"===e,o=function(){return t.nextPage().then(function(t){return r.wrapPaginator(e,t,n)})},s=function(){return t.prevPage().then(function(t){return r.wrapPaginator(e,t,n)})};return n(t.items).then(function(e){return{items:e.sort(function(e,t){return e.index-t.index}),hasPrevPage:i?t.hasNextPage:t.hasPrevPage,hasNextPage:i?t.hasPrevPage:t.hasNextPage,prevPage:i?o:s,nextPage:i?s:o}})}},{key:"_upsertMessage",value:function(e,t){var n=this,r=this.messagesByIndex.get(e);if(r)return r;var i=new y.Message(this.channel,this.services,e,t);return this.messagesByIndex.set(i.index,i),i.on("updated",function(){return n.emit("messageUpdated",i)}),i}},{key:"_getMessages",value:function(e,t,n){var r=this;t="undefined"!=typeof t?t:"end",e=e||30;var i="backwards"===n?"desc":"asc";return this.messagesListPromise.then(function(n){return n.getItems({from:"end"!==t?t:void 0,pageSize:e,order:i})}).then(function(e){return r.wrapPaginator(i,e,function(e){return f.default.all(e.map(function(e){return r._upsertMessage(e.index,e.value)}))})})}}]),t}();t.Messages=g},1:function(e,t){},"1Bqh":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("TToO"),i=function(e){function t(t,n){e.call(this),this.subject=t,this.subscriber=n,this.closed=!1}return Object(r.__extends)(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(n("VwZZ").a)},"1Q68":function(e,t,n){"use strict";t.a=function(e){return e&&"function"==typeof e.schedule}},"1alW":function(e,t,n){var r=n("kM2E");r(r.S,"Number",{isInteger:n("AKgy")})},"1kS7":function(e,t){t.f=Object.getOwnPropertySymbols},2:function(e,t){},"2D4L":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=g(n("u2KI")),i=g(n("lHA8")),o=g(n("//Fk")),s=g(n("ifoU")),a=g(n("HSQo")),u=g(n("Zx67")),c=g(n("Zrlr")),l=g(n("wxAW")),f=g(n("zwoO")),h=g(n("Pf15")),d=g(n("vzCy")),p=g(n("XVn5")),v=g(n("DlMc")),y=g(n("XHGe")),m=g(n("SLbG")),_=g(n("tUtP"));function g(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(e,n){(0,c.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,u.default)(t)).call(this));(n=n||{}).logLevel=n.logLevel||"error",p.default.setLevel(n.logLevel);var i=new y.default(e,n),o=new m.default(i),l=new _.default(o);return(0,a.default)(r,{_config:{value:i},_socket:{value:o},_packet:{value:l},_registrations:{value:new s.default},_registrationsInProgress:{value:new s.default},isConnected:{get:function(){return r._socket.isConnected}},connected:{get:function(){return r._socket.isConnected}},state:{get:function(){return r._socket.state}}}),r._socket.on("message",function(e,t){return setTimeout(function(){r.emit("message",e,t)},0)}),r._socket.on("connected",function(){return r._updateRegistrations()}),r._socket.on("connected",function(){return r.emit("connected")}),r._socket.on("disconnected",function(){return r.emit("disconnected")}),r._socket.on("stateChanged",function(e){return r.emit("stateChanged",e)}),"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener&&window.addEventListener("online",function(){p.default.debug("Got online"),o.isRetrying()&&o.reconnect()}),r}return(0,h.default)(t,d.default),(0,l.default)(t,[{key:"send",value:function(e){return this._packet.send(e.to,e.headers,e.body)}},{key:"updateToken",value:function(e){return p.default.info("updateToken"),this._config.token===e?o.default.resolve():(this._config.updateToken(e),this._socket.updateToken(),o.default.resolve())}},{key:"_updateRegistration",value:function(e,t){var n=this;p.default.info("update registration for context",e);var r=this._registrationsInProgress.get(e);r||(r=new i.default,this._registrationsInProgress.set(e,r));var o=v.default.v4();return r.add(o),this._packet.putNotificationContext(e,t).then(function(){p.default.info("registration attempt succeeded for context",t),r.delete(o),0===("undefined"!=typeof r.size?r.size:(r._c||{}).size)&&(n._registrationsInProgress.delete(e),n.emit("registered",e))}).catch(function(i){p.default.info("registration attempt failed for context",t),p.default.debug(i),r.delete(o),0===("undefined"!=typeof r.size?r.size:(r._c||{}).size)&&(n._registrationsInProgress.delete(e),n.emit("registrationFailed",e,i))})}},{key:"_updateRegistrations",value:function(){var e=this;p.default.info("refreshing all registrations"),this._registrations.forEach(function(t,n){e._updateRegistration(n,t)})}},{key:"setNotificationsContext",value:function(e,t){if(!e||!t)throw new Error("Invalid arguments provided");this._registrations.set(e,t),this._socket.isConnected&&this._updateRegistration(e,t)}},{key:"removeNotificationsContext",value:function(e){this._registrations.has(e)&&(this._registrations.delete(e),this._socket.isConnected&&this._packet.deleteNotificationContext(e))}},{key:"connect",value:function(){return this._socket.connect()}},{key:"disconnect",value:function(){return this._socket.disconnect()}}]),t}();t.default=b,(0,r.default)(b),e.exports=t.default},"2Ie7":function(e,t,n){var r;!function(n){function i(e,t){return this instanceof i?(this._low=0,this._high=0,this.remainder=null,"undefined"==typeof t?s.call(this,e):"string"==typeof e?a.call(this,e,t):void o.call(this,e,t)):new i(e,t)}function o(e,t){return this._low=0|e,this._high=0|t,this}function s(e){return this._low=65535&e,this._high=e>>>16,this}function a(e,t){var n=parseInt(e,t||10);return this._low=65535&n,this._high=n>>>16,this}i(Math.pow(36,5)),i(Math.pow(16,7)),i(Math.pow(10,9)),i(Math.pow(2,30)),i(36),i(16),i(10),i(2),i.prototype.fromBits=o,i.prototype.fromNumber=s,i.prototype.fromString=a,i.prototype.toNumber=function(){return 65536*this._high+this._low},i.prototype.toString=function(e){return this.toNumber().toString(e||10)},i.prototype.add=function(e){var t=this._low+e._low,n=t>>>16;return n+=this._high+e._high,this._low=65535&t,this._high=65535&n,this},i.prototype.subtract=function(e){return this.add(e.clone().negate())},i.prototype.multiply=function(e){var t,n,r=this._low,i=e._low;return t=(n=r*i)>>>16,t+=this._high*i,t&=65535,t+=r*e._high,this._low=65535&n,this._high=65535&t,this},i.prototype.div=function(e){if(0==e._low&&0==e._high)throw Error("division by zero");if(0==e._high&&1==e._low)return this.remainder=new i(0),this;if(e.gt(this))return this.remainder=this.clone(),this._low=0,this._high=0,this;if(this.eq(e))return this.remainder=new i(0),this._low=1,this._high=0,this;for(var t=e.clone(),n=-1;!this.lt(t);)t.shiftLeft(1,!0),n++;for(this.remainder=this.clone(),this._low=0,this._high=0;n>=0;n--)t.shiftRight(1),this.remainder.lt(t)||(this.remainder.subtract(t),n>=16?this._high|=1<<n-16:this._low|=1<<n);return this},i.prototype.negate=function(){var e=1+(65535&~this._low);return this._low=65535&e,this._high=~this._high+(e>>>16)&65535,this},i.prototype.equals=i.prototype.eq=function(e){return this._low==e._low&&this._high==e._high},i.prototype.greaterThan=i.prototype.gt=function(e){return this._high>e._high||!(this._high<e._high)&&this._low>e._low},i.prototype.lessThan=i.prototype.lt=function(e){return this._high<e._high||!(this._high>e._high)&&this._low<e._low},i.prototype.or=function(e){return this._low|=e._low,this._high|=e._high,this},i.prototype.and=function(e){return this._low&=e._low,this._high&=e._high,this},i.prototype.not=function(){return this._low=65535&~this._low,this._high=65535&~this._high,this},i.prototype.xor=function(e){return this._low^=e._low,this._high^=e._high,this},i.prototype.shiftRight=i.prototype.shiftr=function(e){return e>16?(this._low=this._high>>e-16,this._high=0):16==e?(this._low=this._high,this._high=0):(this._low=this._low>>e|this._high<<16-e&65535,this._high>>=e),this},i.prototype.shiftLeft=i.prototype.shiftl=function(e,t){return e>16?(this._high=this._low<<e-16,this._low=0,t||(this._high&=65535)):16==e?(this._high=this._low,this._low=0):(this._high=this._high<<e|this._low>>16-e,this._low=this._low<<e&65535,t||(this._high&=65535)),this},i.prototype.rotateLeft=i.prototype.rotl=function(e){var t=this._high<<16|this._low;return this._low=65535&(t=t<<e|t>>>32-e),this._high=t>>>16,this},i.prototype.rotateRight=i.prototype.rotr=function(e){var t=this._high<<16|this._low;return this._low=65535&(t=t>>>e|t<<32-e),this._high=t>>>16,this},i.prototype.clone=function(){return new i(this._low,this._high)},void 0===(r=(function(){return i}).apply(t,[]))||(e.exports=r)}()},"2KxR":function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},"3BLl":function(e,t,n){"use strict";var r=a(n("//Fk")),i=a(n("ifoU")),o=a(n("Zrlr")),s=a(n("wxAW"));function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n("P35s"),c=n("SomJ"),l=u.Logger.scope("TypingIndicator"),f=function(){function e(t,n,r){(0,o.default)(this,e),this.config=t,this.services=n,this.getChannel=r,this.serviceTypingTimeout=null,this.sentUpdates=new i.default}return(0,s.default)(e,[{key:"initialize",value:function(){var e=this;this.services.notificationClient.subscribe(c.NotificationTypes.TYPING_INDICATOR,"twilsock"),this.services.notificationClient.on("message",function(t,n){t===c.NotificationTypes.TYPING_INDICATOR&&e.handleRemoteTyping(n)})}},{key:"handleRemoteTyping",value:function(e){var t=this;l.trace("Got new typing indicator ",e),this.getChannel(e.channel_sid).then(function(n){n&&n.members.forEach(function(n){n.identity===e.identity&&n._startTyping(t.typingTimeout)})}).catch(function(e){throw l.error(e),e})}},{key:"send",value:function(e){var t=this.sentUpdates.get(e);return t&&t>Date.now()-this.typingTimeout?r.default.resolve():(this.sentUpdates.set(e,Date.now()),this._send(e))}},{key:"_send",value:function(e){var t=this;return l.trace("Sending typing indicator"),this.services.transport.post(this.config.typingIndicatorUri,{"X-Twilio-Token":this.config.token,"Content-Type":"application/x-www-form-urlencoded"},"ChannelSid="+e).then(function(e){e.body.hasOwnProperty("typing_timeout")&&(t.serviceTypingTimeout=1e3*e.body.typing_timeout)}).catch(function(e){throw l.error("Failed to send typing indicator:",e),e})}},{key:"typingTimeout",get:function(){return this.config.typingIndicatorTimeoutOverride||this.serviceTypingTimeout||this.config.typingIndicatorTimeoutDefault}}]),e}();t.TypingIndicator=f},"3C/1":function(e,t,n){n("M6a0"),n("zQR9"),n("+tPU"),n("qCoq"),n("UvrK"),n("Xjd4"),n("bqnK"),e.exports=n("FeBl").Map},"3Eo+":function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},"3IRH":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"3a3m":function(e,t,n){"use strict";t.a=function(){return function(e){return Object(i.a)()(Object(r.a)(s)(e))}};var r=n("Jwyl"),i=n("0P3J"),o=n("g5jc");function s(){return new o.a}},"3fs2":function(e,t,n){var r=n("RY/4"),i=n("dSzd")("iterator"),o=n("/bQp");e.exports=n("FeBl").getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},"4WTo":function(e,t,n){var r=n("NWt+");e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},"4ft4":function(e,t,n){"use strict";var r,i=(r=n("Zrlr"))&&r.__esModule?r:{default:r};Object.defineProperty(t,"__esModule",{value:!0});var o=n("6ltY"),s=function e(t){(0,i.default)(this,e),this.sdk="js",this.sdkVer=t,this.os=o.os.family,this.osVer=o.os.version,this.pl=o.name,this.plVer=o.version};t.ClientInfo=s,t.default=s},"4gkB":function(e,t,n){"use strict";var r=o(n("Zrlr")),i=o(n("wxAW"));function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n("AUWm"),a=function(){function e(){(0,r.default)(this,e),this.cachedContinuationToken=null,this.myInstanceNumber=this.initializeInstanceId()}return(0,i.default)(e,[{key:"initializeInstanceId",value:function(){var t=function(){try{if(sessionStorage)return parseInt(sessionStorage.getItem("Twilio::RTD::EmsClient::InstanceId"))||0}catch(e){return 0}}();t>e.instancesCounter&&(e.instancesCounter=t);var n=e.instancesCounter++;try{sessionStorage&&(sessionStorage.setItem("Twilio::RTD::EmsClient::InstanceId",e.instancesCounter.toString()),window&&window.addEventListener("beforeunload",function(){sessionStorage.removeItem("Twilio::RTD::EmsClient::InstanceId")}))}catch(e){}return n}},{key:"shouldUsePersistentToken",get:function(){return 0===this.myInstanceNumber}},{key:"continuationToken",get:function(){if(this.cachedContinuationToken)return this.cachedContinuationToken;try{if(this.shouldUsePersistentToken&&sessionStorage)return this.cachedContinuationToken=sessionStorage.getItem("Twilio::RTD::EndpointId"),this.cachedContinuationToken}catch(e){s.default.info("Can't access persistent storage",e.message)}return null},set:function(e){this.cachedContinuationToken=e;try{this.shouldUsePersistentToken&&sessionStorage&&sessionStorage.setItem("Twilio::RTD::EndpointId",e)}catch(e){s.default.info("Can't access persistent storage",e.message)}}}]),e}();a.instancesCounter=0,t.PersistentState=a},"4mcu":function(e,t){e.exports=function(){}},"52gC":function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},"55yF":function(e,t,n){"use strict";var r=l(n("Xxa5")),i=l(n("Zx67")),o=l(n("wxAW")),s=l(n("zwoO")),a=l(n("Pf15")),u=l(n("Zrlr")),c=l(n("//Fk"));function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e,t,n,r){return new(n||(n=c.default))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var h=n("vzCy"),d=n("zHwk"),p=n("o6NP"),v=n("AUWm"),y=n("4gkB"),m=n("Wl86"),_=function(e){function t(e){(0,u.default)(this,t);var n=(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return(e=e||{}).transport=e.transport||new m.Transport(e.twilsockClient||null),n.state=new y.PersistentState,n.config=new p.default(e),n.twilsock=e.twilsockClient,n.transport=e.transport,n}return(0,a.default)(t,h.EventEmitter),(0,o.default)(t,[{key:"setToken",value:function(e){return f(this,void 0,void 0,r.default.mark(function t(){var n;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.currentFpaToken!==e&&(this.currentFpaToken=e,n=this.currentTokenRequest,this.currentTokenRequest=this.establishToken(e),this.notifyRejected(n)),t.abrupt("return",this.currentTokenRequest.promise);case 2:case"end":return t.stop()}},t,this)}))}},{key:"notifyRejected",value:function(e){e&&setTimeout(function(){return e.reject(new Error("Operation has been cancelled by next token"))},0)}},{key:"establishToken",value:function(e){var t=this,n=new function e(){(0,u.default)(this,e)},r=new c.default(function(r,i){t.establishTokenImpl(e).then(r).catch(i),n.resolve=r,n.reject=i});return n.promise=r,n}},{key:"establishTokenImpl",value:function(e){return f(this,void 0,void 0,r.default.mark(function t(){var n=this;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new d.default({min:500,max:2e3}).run(function(){return n.requestRtdToken(e)}).then(function(t){if("ok"!=t.status)throw t.exception;if(n.currentFpaToken===e){n.state.continuationToken=t.response.continuation_token;var r=t.response.twilio_rtd_token;n.emit("NEW"===t.response.status.status?"tokenCreated":"tokenUpdated",r),n.emit("token",r);var i={token:t.response.twilio_rtd_token,ttl:t.response.ttl,status:t.response.status.status,reason:t.response.status.reason||null,identity:t.response.identity||null,accountSid:t.response.account_sid,serviceSids:t.response.instance_sids};return n.emit("response",i),i}}).catch(function(e){throw v.default.error(e),e}));case 1:case"end":return t.stop()}},t,this)}))}},{key:"requestRtdToken",value:function(e){return f(this,void 0,void 0,r.default.mark(function t(){var n,i,o;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={"Content-Type":"application/json"},v.default.debug("Token request",i={fpa_token:e,continuation_token:this.state.continuationToken}),t.prev=3,t.next=6,this.transport.post(this.config.url,n,i);case 6:return v.default.debug("Token response:",o=t.sent),t.abrupt("return",{status:"ok",token:e,response:o.body});case 11:if(t.prev=11,t.t0=t.catch(3),401!==t.t0.status&&403!==t.t0.status){t.next=16;break}return t.t0 instanceof Error||(t.t0.body?t.t0=new Error(t.t0.body.message):t.t0.description&&(t.t0=new Error(t.t0.description))),t.abrupt("return",{status:"denied",exception:t.t0,token:null,response:null});case 16:throw t.t0;case 17:case"end":return t.stop()}},t,this,[[3,11]])}))}}]),t}();t.EmsClient=_;var g=_;t.EMSClient=g,t.default=g},"5NG4":function(e,t,n){"use strict";var r=n("VNGy");e.exports=r},"5PlU":function(e,t,n){var r=n("RY/4"),i=n("dSzd")("iterator"),o=n("/bQp");e.exports=n("FeBl").isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(r(t))}},"5QVw":function(e,t,n){e.exports={default:n("BwfY"),__esModule:!0}},"5ayO":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=y(n("u2KI")),i=y(n("//Fk")),o=y(n("lHA8")),s=y(n("HSQo")),a=y(n("Zx67")),u=y(n("Zrlr")),c=y(n("wxAW")),l=y(n("zwoO")),f=y(n("Pf15")),h=y(n("vzCy")),d=y(n("J5uf")),p=y(n("ZNPb")),v=y(n("e21k"));function y(e){return e&&e.__esModule?e:{default:e}}function m(e){var t=[];return e.forEach(function(e){return t.push(e)}),t}var _=function(e){function t(e,n,r,i){(0,u.default)(this,t);var c=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this)),f=p.default.create({initial:{state:"unregistered",event:"init",defer:!0},events:[{name:"userUpdate",from:["unregistered"],to:"registering"},{name:"userUpdate",from:["registered"],to:"unregistering"},{name:"registered",from:["registering","retrying"],to:"registered"},{name:"unregistered",from:["unregistering"],to:"unregistered"},{name:"retry",from:["retrying"],to:"retrying"},{name:"failure",from:["registering"],to:"retrying"},{name:"failure",from:["retrying"],to:"retrying"},{name:"failure",from:["unregistering"],to:"unregistered"}],callbacks:{onregistering:function(e,t,n,r){return c._register(r)},onunregistering:function(){return c._unregister()},onregistered:function(){return c._onRegistered()},onunregistered:function(){return c._onUnregistered()},onretrying:function(e,t,n,r){return c._initRetry(r)},onfailure:function(e,t,n,r){"retrying"===t&&c._initRetry(r)}}}),h=v.default.exponential({randomisationFactor:.2,initialDelay:2e3,maxDelay:12e4});return h.on("ready",function(){c._retry()}),(0,s.default)(c,{_transport:{value:n},_context:{value:e},_url:{value:r.registrarUri,writable:!1},_config:{value:r},_fsm:{value:f},_backoff:{value:h},_channelType:{value:i},_registrationId:{value:!1,writable:!0},_notificationId:{value:!1,writable:!0},_messageTypes:{value:new o.default,writable:!0},_pendingUpdate:{value:null,writable:!0}}),f.init(),c}return(0,f.default)(t,h.default),(0,c.default)(t,[{key:"setNotificationId",value:function(e){this._notificationId!==e&&(this._notificationId=e,this._updateRegistration())}},{key:"updateToken",value:function(){return this._updateRegistration()}},{key:"has",value:function(e){return this._messageTypes.has(e)}},{key:"subscribe",value:function(e){return this._messageTypes.has(e)?(d.default.debug("Message type already registered ",e),!1):(this._messageTypes.add(e),this._updateRegistration(),!0)}},{key:"unsubscribe",value:function(e){return!!this._messageTypes.has(e)&&(this._messageTypes.delete(e),this._messageTypes.size>0?this._updateRegistration():this._removeRegistration(),!0)}},{key:"_updateRegistration",value:function(){this._notificationId&&this._update(this._notificationId,m(this._messageTypes))}},{key:"_removeRegistration",value:function(){this._notificationId&&this._update(this._notificationId,m(this._messageTypes))}},{key:"_update",value:function(e,t){var n={notificationId:e,messageTypes:t};this._fsm.is("unregistered")?n.notificationId&&n.messageTypes.length>0&&this._fsm.userUpdate(n):this._fsm.is("registered")?(this._fsm.userUpdate(n),this._setPendingUpdate(n)):this._setPendingUpdate(n)}},{key:"_setPendingUpdate",value:function(e){this._pendingUpdate=e}},{key:"_checkPendingUpdate",value:function(){if(this._pendingUpdate){var e=this._pendingUpdate;this._pendingUpdate=null,this._updateRegistration(e.notificationId,e.messageTypes)}}},{key:"_initRetry",value:function(e){this._pendingUpdate||this._setPendingUpdate(e),this._backoff.backoff()}},{key:"_retry",value:function(){if(this._pendingUpdate){var e=this._pendingUpdate;this._pendingUpdate=null,this._register(e)}}},{key:"_onRegistered",value:function(){this._backoff.reset(),this.emit("stateChanged","registered"),this._checkPendingUpdate()}},{key:"_onUnregistered",value:function(){this._backoff.reset(),this.emit("stateChanged","unregistered"),this._checkPendingUpdate()}},{key:"_register",value:function(e){var t=this,n={endpoint_platform:this._context.platform,channel_type:this._channelType,version:"2",message_types:e.messageTypes,data:{},ttl:"PT24H"};"twilsock"===this._channelType?n.data.url=e.notificationId:n.data.registration_id=e.notificationId;var r=this._url+"?productId="+this._context.productId,i={"Content-Type":"application/json","X-Twilio-Token":this._config.token};return d.default.trace("Creating registration for channel ",this._channelType),this._transport.post(r,i,n).then(function(n){t._registrationId=n.body.id,t._registrationData=e,d.default.debug("Registration created: ",n),t._fsm.registered()}).catch(function(n){return d.default.error("Registration failed: ",n),t._fsm.failure(e),n})}},{key:"_unregister",value:function(){var e=this;if(!this._registrationId)return i.default.resolve();var t=this._url+"/"+this._registrationId+"?productId="+this._context.productId,n={"Content-Type":"application/json","X-Twilio-Token":this._config.token};return d.default.trace("Removing registration for ",this._channelType),this._transport.delete(t,n).then(function(){d.default.debug("Registration removed for ",e._channelType),e._registrationId=!1,e._fsm.unregistered()}).catch(function(t){return d.default.error("Failed to remove of registration ",e.channelType,t),e._fsm.failure(),t})}}]),t}();t.default=_,(0,r.default)(_),e.exports=t.default},"5zde":function(e,t,n){n("zQR9"),n("qyJz"),e.exports=n("FeBl").Array.from},"63Gd":function(e,t,n){var r=n("OMJi"),i=e.exports=n("VRsY");function o(e,t,n,i){var o=new e(r.format.apply(this,[n=n||""].concat(i)));throw Error.captureStackTrace(o,t),o}function s(e,t,n){o(i.IllegalArgumentError,e,t,n)}function a(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array"}return t}function u(e){return function(t,n){var r=a(t);if(r==e)return t;s(arguments.callee,n||'Expected "'+e+'" but got "'+r+'".',Array.prototype.slice.call(arguments,2))}}e.exports.checkArgument=function(e,t){e||s(arguments.callee,t,Array.prototype.slice.call(arguments,2))},e.exports.checkState=function(e,t){e||function(e,t,n){o(i.IllegalStateError,e,t,n)}(arguments.callee,t,Array.prototype.slice.call(arguments,2))},e.exports.checkIsDef=function(e,t){if(void 0!==e)return e;s(arguments.callee,t||"Expected value to be defined but was undefined.",Array.prototype.slice.call(arguments,2))},e.exports.checkIsDefAndNotNull=function(e,t){if(null!=e)return e;s(arguments.callee,t||'Expected value to be defined and not null but got "'+a(e)+'".',Array.prototype.slice.call(arguments,2))},e.exports.checkIsString=u("string"),e.exports.checkIsArray=u("array"),e.exports.checkIsNumber=u("number"),e.exports.checkIsBoolean=u("boolean"),e.exports.checkIsFunction=u("function"),e.exports.checkIsObject=u("object")},"6c6t":function(e,t,n){"use strict";var r=f(n("mvHQ")),i=f(n("Xxa5")),o=f(n("Zx67")),s=f(n("Zrlr")),a=f(n("wxAW")),u=f(n("zwoO")),c=f(n("Pf15")),l=f(n("//Fk"));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e,t,n,r){return new(n||(n=l.default))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var d=n("vzCy"),p=n("P35s").Logger.scope("User"),v=function(e){function t(e,n,r){(0,s.default)(this,t);var i=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return i.subscribed="initializing",i.setMaxListeners(0),i.services=r,i.state={identity:e,entityName:n,friendlyName:null,attributes:{},online:null,notifiable:null},i}return(0,c.default)(t,d.EventEmitter),(0,a.default)(t,[{key:"_update",value:function(e,t){switch(p.debug("User for",this.state.identity,"updated:",e,t),e){case"friendlyName":this.state.friendlyName=t.value;break;case"attributes":try{this.state.attributes=JSON.parse(t.value)}catch(e){this.state.attributes={}}break;case"reachability":this.state.online=t.online,this.state.notifiable=t.notifiable;break;default:return}this.emit("updated",this)}},{key:"_updateReachabilityInfo",value:function(e,t){var n=this;return this.services.session.reachabilityEnabled?e.get("reachability").then(t).catch(function(e){p.warn("Failed to get reachability info for ",n.state.identity,e)}):l.default.resolve()}},{key:"_fetch",value:function(){return h(this,void 0,void 0,i.default.mark(function e(){var t=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.entityName){e.next=2;break}return e.abrupt("return",this);case 2:return this.promiseToFetch=this.services.syncClient.map({id:this.state.entityName,mode:"open_existing",includeItems:!0}).then(function(e){return t.entity=e,e.on("itemUpdated",function(e){return t._update(e.item.key,e.item.value)}),l.default.all([e.get("friendlyName").then(function(e){return t._update(e.key,e.value)}),e.get("attributes").then(function(e){return t._update(e.key,e.value)}),t._updateReachabilityInfo(e,function(e){return t._update(e.key,e.value)})])}).then(function(){return p.debug("Fetched for",t.identity),t.subscribed="subscribed",t.emit("userSubscribed",t),t}).catch(function(e){throw t.promiseToFetch=null,e}),e.abrupt("return",this.promiseToFetch);case 4:case"end":return e.stop()}},e,this)}))}},{key:"_ensureFetched",value:function(){return this.promiseToFetch||this._fetch()}},{key:"updateAttributes",value:function(e){return h(this,void 0,void 0,i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e.constructor===Object){t.next=2;break}throw new Error("Attributes must be an object");case 2:if("unsubscribed"!=this.subscribed){t.next=4;break}throw new Error("Can't modify unsubscribed object");case 4:return t.next=6,this.services.session.addCommand("editUserAttributes",{username:this.state.identity,attributes:(0,r.default)(e)});case 6:return t.abrupt("return",this);case 7:case"end":return t.stop()}},t,this)}))}},{key:"updateFriendlyName",value:function(e){return h(this,void 0,void 0,i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||"string"==typeof e){t.next=2;break}throw new Error("friendlyName must be string or empty");case 2:if("unsubscribed"!=this.subscribed){t.next=4;break}throw new Error("Can't modify unsubscribed object");case 4:return t.next=6,this.services.session.addCommand("editUserFriendlyName",{username:this.state.identity,friendlyName:e});case 6:return t.abrupt("return",this);case 7:case"end":return t.stop()}},t,this)}))}},{key:"unsubscribe",value:function(){return h(this,void 0,void 0,i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.promiseToFetch){e.next=7;break}return e.next=3,this.promiseToFetch;case 3:this.entity.close(),this.promiseToFetch=null,this.subscribed="unsubscribed",this.emit("userUnsubscribed",this);case 7:case"end":return e.stop()}},e,this)}))}},{key:"identity",get:function(){return this.state.identity},set:function(e){this.state.identity=e}},{key:"entityName",set:function(e){this.state.entityName=e}},{key:"attributes",get:function(){return this.state.attributes}},{key:"friendlyName",get:function(){return this.state.friendlyName}},{key:"online",get:function(){return this.state.online}},{key:"notifiable",get:function(){return this.state.notifiable}},{key:"isSubscribed",get:function(){return"subscribed"==this.subscribed}}]),t}();t.User=v},"6dPF":function(e,t,n){"use strict";var r=u(n("Xxa5")),i=u(n("ifoU")),o=u(n("wxAW")),s=u(n("Zrlr")),a=u(n("//Fk"));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e,t,n,r){return new(n||(n=a.default))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var l=n("DlMc"),f=n("6ltY"),h=n("OLPf"),d=n("pQdt"),p=n("P35s"),v=n("Jh8B"),y=n("Ibl0"),m=n("bxzj").version,_=p.Logger.scope("Session"),g=function(){function e(t,n){(0,s.default)(this,e);var r="undefined"!=typeof navigator?f.parse(navigator.userAgent):f;this.services=t,this.config=n,this.sessionInfo=new y.Deferred,this.currentContext={},this.pendingCommands=new i.default,this.sessionStreamPromise=null,this.endpointPlatform=["js",m,r.os,r.name,r.version].join("|")}return(0,o.default)(e,[{key:"handleContextUpdate",value:function(e){var t;_.info("Session context updated"),_.debug("new session context:",e),this.currentContext=e,t=e,["identity","userInfo","links","myChannels","channels"].some(function(e){return!t.hasOwnProperty(e)})||(_.info("new session context accepted"),this.sessionInfo.set(e))}},{key:"initialize",value:function(){var e=this;return this.sessionStreamPromise=this.services.syncClient.list({purpose:"com.twilio.rtd.ipmsg",context:{type:"IpMsgSession",apiVersion:"3",endpointPlatform:this.endpointPlatform}}).then(function(t){return _.info("Session created",t.sid),t.on("itemAdded",function(t){return e.processCommandResponse(t.item)}),t.on("itemUpdated",function(t){return e.processCommandResponse(t.item)}),t.on("contextUpdated",function(t){return e.handleContextUpdate(t.context)}),t}).catch(function(e){throw _.error("Failed to create session",e),e}),this.sessionStreamPromise}},{key:"addCommand",value:function(e,t){return this.processCommand(e,t)}},{key:"processCommand",value:function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=new function e(){(0,s.default)(this,e)};return i.request=t,i.request.action=e,i.commandId=l.v4(),_.info("Adding command: ",e,i.commandId),_.debug("command arguments:",t,r),new a.default(function(o,s){n.sessionStreamPromise.then(function(e){return n.pendingCommands.set(i.commandId,{resolve:o,reject:s,commandId:i.commandId,request:i.request}),e.push(i)}).then(function(){return _.debug("Command accepted by server",i.commandId)}).catch(function(a){n.pendingCommands.delete(i.commandId),_.error("Failed to add a command to the session",a),a.code!=d.ResponseCodes.ACCESS_FORBIDDEN_FOR_IDENTITY&&a.code!==d.ResponseCodes.LIST_NOT_FOUND||!r?s(new Error("Can't add command: "+a.message)):(_.info("recreating session..."),n.initialize(),o(n.processCommand(e,t,!1)))})})}},{key:"processCommandResponse",value:function(e){if(e.value.hasOwnProperty("response")&&e.value.hasOwnProperty("commandId")&&this.pendingCommands.has(e.value.commandId)){var t=e.value,n=e.value.commandId;if(t.response.status===d.ResponseCodes.HTTP_200_OK){_.debug("Command succeeded: ",t);var r=this.pendingCommands.get(n).resolve;this.pendingCommands.delete(n),r(t.response)}else{_.error("Command failed: ",t);var i=this.pendingCommands.get(n).reject;this.pendingCommands.delete(n),i(new v.SessionError(t.response.statusText,t.response.status))}}}},{key:"getSessionContext",value:function(){return this.sessionStreamPromise.then(function(e){return e.getContext()})}},{key:"getSessionLinks",value:function(){return c(this,void 0,void 0,r.default.mark(function e(){var t;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sessionInfo.promise;case 2:return e.abrupt("return",{publicChannelsUrl:this.config.baseUrl+(t=e.sent).links.publicChannelsUrl,myChannelsUrl:this.config.baseUrl+t.links.myChannelsUrl,typingUrl:this.config.baseUrl+t.links.typingUrl,syncListUrl:this.config.baseUrl+t.links.syncListUrl,usersUrl:this.config.baseUrl+t.links.usersUrl,mediaServiceUrl:t.links.mediaServiceUrl});case 4:case"end":return e.stop()}},e,this)}))}},{key:"getChannelsId",value:function(){return c(this,void 0,void 0,r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sessionInfo.promise;case 2:return e.abrupt("return",e.sent.channels);case 4:case"end":return e.stop()}},e,this)}))}},{key:"getMyChannelsId",value:function(){return c(this,void 0,void 0,r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sessionInfo.promise;case 2:return e.abrupt("return",e.sent.myChannels);case 4:case"end":return e.stop()}},e,this)}))}},{key:"getMaxUserInfosToSubscribe",value:function(){return c(this,void 0,void 0,r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sessionInfo.promise;case 2:return e.abrupt("return",this.config.userInfosToSubscribeOverride||e.sent.userInfosToSubscribe||this.config.userInfosToSubscribeDefault);case 4:case"end":return e.stop()}},e,this)}))}},{key:"getUsersData",value:function(){return this.sessionInfo.promise.then(function(e){return{user:e.userInfo,identity:e.identity}})}},{key:"getConsumptionReportInterval",value:function(){return c(this,void 0,void 0,r.default.mark(function e(){var t;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSessionContext();case 2:return t=this.config.consumptionReportIntervalOverride||e.sent.consumptionReportInterval||this.config.consumptionReportIntervalDefault,e.prev=4,e.abrupt("return",h.fromString(t));case 8:return e.prev=8,e.t0=e.catch(4),_.error("Failed to parse consumption report interval",t,"using default value",this.config.consumptionReportIntervalDefault),e.abrupt("return",h.fromString(this.config.consumptionReportIntervalDefault));case 12:case"end":return e.stop()}},e,this,[[4,8]])}))}},{key:"getHttpCacheInterval",value:function(){return c(this,void 0,void 0,r.default.mark(function e(){var t;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSessionContext();case 2:return t=this.config.httpCacheIntervalOverride||e.sent.httpCacheInterval||this.config.httpCacheIntervalDefault,e.prev=4,e.abrupt("return",h.fromString(t));case 8:return e.prev=8,e.t0=e.catch(4),_.error("Failed to parse cache interval",t,"using default value",this.config.httpCacheIntervalDefault),e.abrupt("return",h.fromString(this.config.httpCacheIntervalDefault));case 12:case"end":return e.stop()}},e,this,[[4,8]])}))}},{key:"identity",get:function(){return this.sessionInfo.current.identity}},{key:"reachabilityEnabled",get:function(){return this.currentContext.reachabilityEnabled}}]),e}();t.Session=g},"6ltY":function(e,t,n){(function(e,r){var i;(function(){"use strict";var o={function:!0,object:!0},s=o[typeof window]&&window||this,a=o[typeof t]&&t&&o[typeof e]&&e&&!e.nodeType&&e&&"object"==typeof r&&r;!a||a.global!==a&&a.window!==a&&a.self!==a||(s=a);var u=Math.pow(2,53)-1,c=/\bOpera/,l=Object.prototype,f=l.hasOwnProperty,h=l.toString;function d(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function p(e){return e=g(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:d(e)}function v(e,t){for(var n in e)f.call(e,n)&&t(e[n],n,e)}function y(e){return null==e?d(e):h.call(e).slice(8,-1)}function m(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function _(e,t){var n=null;return function(e,t){var n=-1,r=e?e.length:0;if("number"==typeof r&&r>-1&&r<=u)for(;++n<r;)t(e[n],n);else v(e,t)}(e,function(r,i){n=t(n,r,i,e)}),n}function g(e){return String(e).replace(/^ +| +$/g,"")}var b=function e(t){var n=s,r=t&&"object"==typeof t&&"String"!=y(t);r&&(n=t,t=null);var i=n.navigator||{},o=i.userAgent||"";t||(t=o);var a,u,l,f,d,b=r?!!i.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(h.toString()),w=r?"Object":"ScriptBridgingProxyObject",k=r?"Object":"Environment",x=r&&n.java?"JavaPackage":y(n.java),C=r?"Object":"RuntimeObject",E=/\bJava/.test(x)&&n.java,S=E&&y(n.environment)==k,T=E?"a":"\u03b1",O=E?"b":"\u03b2",P=n.document||{},A=n.operamini||n.opera,I=c.test(I=r&&A?A["[[Class]]"]:y(A))?I:A=null,M=t,R=[],j=null,N=t==o,D=N&&A&&"function"==typeof A.version&&A.version(),F=_([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(e,n){return e||RegExp("\\b"+(n.pattern||m(n))+"\\b","i").exec(t)&&(n.label||n)}),U=_(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],function(e,n){return e||RegExp("\\b"+(n.pattern||m(n))+"\\b","i").exec(t)&&(n.label||n)}),L=q([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),V=_({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}},function(e,n,r){return e||(n[L]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(L)]||RegExp("\\b"+m(r)+"(?:\\b|\\w*\\d)","i").exec(t))&&r}),B=_(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],function(e,n){var r=n.pattern||m(n);return!e&&(e=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(r=r[/[\d.]+$/.exec(e)])&&(e="Windows "+r),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),p(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,r,n.label||n)),e});function q(e){return _(e,function(e,n){var r=n.pattern||m(n);return!e&&(e=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),n=n.label||n,e=p(e[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),e})}if(F&&(F=[F]),V&&!L&&(L=q([V])),(a=/\bGoogle TV\b/.exec(L))&&(L=a[0]),/\bSimulator\b/i.test(t)&&(L=(L?L+" ":"")+"Simulator"),"Opera Mini"==U&&/\bOPiOS\b/.test(t)&&R.push("running in Turbo/Uncompressed mode"),"IE"==U&&/\blike iPhone OS\b/.test(t)?(V=(a=e(t.replace(/like iPhone OS/,""))).manufacturer,L=a.product):/^iP/.test(L)?(U||(U="Safari"),B="iOS"+((a=/ OS ([\d_]+)/i.exec(t))?" "+a[1].replace(/_/g,"."):"")):"Konqueror"!=U||/buntu/i.test(B)?V&&"Google"!=V&&(/Chrome/.test(U)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(L))||/\bAndroid\b/.test(B)&&/^Chrome/.test(U)&&/\bVersion\//i.test(t)?(U="Android Browser",B=/\bAndroid\b/.test(B)?B:"Android"):"Silk"==U?(/\bMobi/i.test(t)||(B="Android",R.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&R.unshift("accelerated")):"PaleMoon"==U&&(a=/\bFirefox\/([\d.]+)\b/.exec(t))?R.push("identifying as Firefox "+a[1]):"Firefox"==U&&(a=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(B||(B="Firefox OS"),L||(L=a[1])):!U||(a=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(U))?(U&&!L&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(a+"/")+8))&&(U=null),(a=L||V||B)&&(L||V||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(B))&&(U=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(B)?B:a)+" Browser")):"Electron"==U&&(a=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&R.push("Chromium "+a):B="Kubuntu",D||(D=_(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",m(U),"(?:Firefox|Minefield|NetFront)"],function(e,n){return e||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null})),(a=("iCab"==F&&parseFloat(D)>3?"WebKit":/\bOpera\b/.test(U)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(F)&&"WebKit"||!F&&/\bMSIE\b/i.test(t)&&("Mac OS"==B?"Tasman":"Trident")||"WebKit"==F&&/\bPlayStation\b(?! Vita\b)/i.test(U)&&"NetFront")&&(F=[a]),"IE"==U&&(a=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(U+=" Mobile",B="Windows Phone "+(/\+$/.test(a)?a:a+".x"),R.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(U="IE Mobile",B="Windows Phone 8.x",R.unshift("desktop mode"),D||(D=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=U&&"Trident"==F&&(a=/\brv:([\d.]+)/.exec(t))&&(U&&R.push("identifying as "+U+(D?" "+D:"")),U="IE",D=a[1]),N){if(f="global",/^(?:boolean|number|string|undefined)$/.test(d=null!=(l=n)?typeof l[f]:"number")||"object"==d&&!l[f])y(a=n.runtime)==w?(U="Adobe AIR",B=a.flash.system.Capabilities.os):y(a=n.phantom)==C?(U="PhantomJS",D=(a=a.version||null)&&a.major+"."+a.minor+"."+a.patch):"number"==typeof P.documentMode&&(a=/\bTrident\/(\d+)/i.exec(t))?((a=+a[1]+4)!=(D=[D,P.documentMode])[1]&&(R.push("IE "+D[1]+" mode"),F&&(F[1]=""),D[1]=a),D="IE"==U?String(D[1].toFixed(1)):D[0]):"number"==typeof P.documentMode&&/^(?:Chrome|Firefox)\b/.test(U)&&(R.push("masking as "+U+" "+D),U="IE",D="11.0",F=["Trident"],B="Windows");else if(E&&(M=(a=E.lang.System).getProperty("os.arch"),B=B||a.getProperty("os.name")+" "+a.getProperty("os.version")),S){try{D=n.require("ringo/engine").version.join("."),U="RingoJS"}catch(e){(a=n.system)&&a.global.system==n.system&&(U="Narwhal",B||(B=a[0].os||null))}U||(U="Rhino")}else"object"==typeof n.process&&!n.process.browser&&(a=n.process)&&("object"==typeof a.versions&&("string"==typeof a.versions.electron?(R.push("Node "+a.versions.node),U="Electron",D=a.versions.electron):"string"==typeof a.versions.nw&&(R.push("Chromium "+D,"Node "+a.versions.node),U="NW.js",D=a.versions.nw)),U||(U="Node.js",M=a.arch,B=a.platform,D=(D=/[\d.]+/.exec(a.version))?D[0]:null));B=B&&p(B)}if(D&&(a=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(D)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(N&&i.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(j=/b/i.test(a)?"beta":"alpha",D=D.replace(RegExp(a+"\\+?$"),"")+("beta"==j?O:T)+(/\d+\+?/.exec(a)||"")),"Fennec"==U||"Firefox"==U&&/\b(?:Android|Firefox OS)\b/.test(B))U="Firefox Mobile";else if("Maxthon"==U&&D)D=D.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(L))"Xbox 360"==L&&(B=null),"Xbox 360"==L&&/\bIEMobile\b/.test(t)&&R.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(U)&&(!U||L||/Browser|Mobi/.test(U))||"Windows CE"!=B&&!/Mobi/i.test(t))if("IE"==U&&N)try{null===n.external&&R.unshift("platform preview")}catch(e){R.unshift("embedded")}else(/\bBlackBerry\b/.test(L)||/\bBB10\b/.test(t))&&(a=(RegExp(L.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||D)?(B=((a=[a,/BB10/.test(t)])[1]?(L=null,V="BlackBerry"):"Device Software")+" "+a[0],D=null):this!=v&&"Wii"!=L&&(N&&A||/Opera/.test(U)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==U&&/\bOS X (?:\d+\.){2,}/.test(B)||"IE"==U&&(B&&!/^Win/.test(B)&&D>5.5||/\bWindows XP\b/.test(B)&&D>8||8==D&&!/\bTrident\b/.test(t)))&&!c.test(a=e.call(v,t.replace(c,"")+";"))&&a.name&&(a="ing as "+a.name+((a=a.version)?" "+a:""),c.test(U)?(/\bIE\b/.test(a)&&"Mac OS"==B&&(B=null),a="identify"+a):(a="mask"+a,U=I?p(I.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(a)&&(B=null),N||(D=null)),F=["Presto"],R.push(a));else U+=" Mobile";(a=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(a=[parseFloat(a.replace(/\.(\d)$/,".0$1")),a],"Safari"==U&&"+"==a[1].slice(-1)?(U="WebKit Nightly",j="alpha",D=a[1].slice(0,-1)):D!=a[1]&&D!=(a[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(D=null),a[1]=(/\bChrome\/([\d.]+)/i.exec(t)||0)[1],537.36==a[0]&&537.36==a[2]&&parseFloat(a[1])>=28&&"WebKit"==F&&(F=["Blink"]),N&&(b||a[1])?(F&&(F[1]="like Chrome"),a=a[1]||((a=a[0])<530?1:a<532?2:a<532.05?3:a<533?4:a<534.03?5:a<534.07?6:a<534.1?7:a<534.13?8:a<534.16?9:a<534.24?10:a<534.3?11:a<535.01?12:a<535.02?"13+":a<535.07?15:a<535.11?16:a<535.19?17:a<536.05?18:a<536.1?19:a<537.01?20:a<537.11?"21+":a<537.13?23:a<537.18?24:a<537.24?25:a<537.36?26:"Blink"!=F?"27":"28")):(F&&(F[1]="like Safari"),a=(a=a[0])<400?1:a<500?2:a<526?3:a<533?4:a<534?"4+":a<535?5:a<537?6:a<538?7:a<601?8:"8"),F&&(F[1]+=" "+(a+="number"==typeof a?".x":/[.+]/.test(a)?"":"+")),"Safari"==U&&(!D||parseInt(D)>45)&&(D=a)),"Opera"==U&&(a=/\bzbov|zvav$/.exec(B))?(U+=" ",R.unshift("desktop mode"),"zvav"==a?(U+="Mini",D=null):U+="Mobile",B=B.replace(RegExp(" *"+a+"$"),"")):"Safari"==U&&/\bChrome\b/.exec(F&&F[1])&&(R.unshift("desktop mode"),U="Chrome Mobile",D=null,/\bOS X\b/.test(B)?(V="Apple",B="iOS 4.3+"):B=null),D&&0==D.indexOf(a=/[\d.]+$/.exec(B))&&t.indexOf("/"+a+"-")>-1&&(B=g(B.replace(a,""))),F&&!/\b(?:Avant|Nook)\b/.test(U)&&(/Browser|Lunascape|Maxthon/.test(U)||"Safari"!=U&&/^iOS/.test(B)&&/\bSafari\b/.test(F[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(U)&&F[1])&&(a=F[F.length-1])&&R.push(a),R.length&&(R=["("+R.join("; ")+")"]),V&&L&&L.indexOf(V)<0&&R.push("on "+V),L&&R.push((/^on /.test(R[R.length-1])?"":"on ")+L),B&&(a=/ ([\d.+]+)$/.exec(B),u=a&&"/"==B.charAt(B.length-a[0].length-1),B={architecture:32,family:a&&!u?B.replace(a[0],""):B,version:a?a[1]:null,toString:function(){var e=this.version;return this.family+(e&&!u?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(a=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(M))&&!/\bi686\b/i.test(M)?(B&&(B.architecture=64,B.family=B.family.replace(RegExp(" *"+a),"")),U&&(/\bWOW64\b/i.test(t)||N&&/\w(?:86|32)$/.test(i.cpuClass||i.platform)&&!/\bWin64; x64\b/i.test(t))&&R.unshift("32-bit")):B&&/^OS X/.test(B.family)&&"Chrome"==U&&parseFloat(D)>=39&&(B.architecture=64),t||(t=null);var z={};return z.description=t,z.layout=F&&F[0],z.manufacturer=V,z.name=U,z.prerelease=j,z.product=L,z.ua=t,z.version=U&&D,z.os=B||{architecture:null,family:null,version:null,toString:function(){return"null"}},z.parse=e,z.toString=function(){return this.description||""},z.version&&R.unshift(D),z.name&&R.unshift(U),B&&U&&(B!=String(B).split(" ")[0]||B!=U.split(" ")[0]&&!L)&&R.push(L?"("+B+")":"on "+B),R.length&&(z.description=R.join(" ")),z}();s.platform=b,void 0===(i=(function(){return b}).call(t,n,t,e))||(e.exports=i)}).call(this)}).call(t,n("3IRH")(e),n("DuR2"))},"6uYP":function(e,t,n){"use strict";var r=n("OksQ");e.exports=r},"77Pl":function(e,t,n){var r=n("EqjI");e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},"7Doy":function(e,t,n){var r=n("EqjI"),i=n("7UMu"),o=n("dSzd")("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},"7KvD":function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"7UMu":function(e,t,n){var r=n("R9M2");e.exports=Array.isArray||function(e){return"Array"==r(e)}},"82Mu":function(e,t,n){var r=n("7KvD"),i=n("L42u").set,o=r.MutationObserver||r.WebKitMutationObserver,s=r.process,a=r.Promise,u="process"==n("R9M2")(s);e.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=s.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){s.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(a&&a.resolve){var l=a.resolve();n=function(){l.then(c)}}else n=function(){i.call(r,c)};else{var f=!0,h=document.createTextNode("");new o(c).observe(h,{characterData:!0}),n=function(){h.data=f=!f}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},"880/":function(e,t,n){e.exports=n("hJx8")},"8D5t":function(e,t,n){"use strict";t.a=function(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),Object(r.a)(i.a,null,e)};var r=n("Qnch"),i=n("lAP5")},"94Ke":function(e,t,n){(function(t){(function(){e.exports=n("qd++"),null!=t.window&&(t.window.Bottleneck=e.exports)}).call(this)}).call(t,n("DuR2"))},"94VQ":function(e,t,n){"use strict";var r=n("Yobk"),i=n("X8DO"),o=n("e6n0"),s={};n("hJx8")(s,n("dSzd")("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(s,{next:i(1,n)}),o(e,t+" Iterator")}},"9Bbf":function(e,t,n){"use strict";var r=n("kM2E");e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},"9C8M":function(e,t,n){"use strict";var r=n("evD5").f,i=n("Yobk"),o=n("xH/j"),s=n("+ZMJ"),a=n("2KxR"),u=n("NWt+"),c=n("vIB/"),l=n("EGZi"),f=n("bRrM"),h=n("+E39"),d=n("06OY").fastKey,p=n("LIJb"),v=h?"_s":"size",y=function(e,t){var n,r=d(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var l=e(function(e,r){a(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=r&&u(r,n,e[c],e)});return o(l.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var n=p(this,t),r=y(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[v]--}return!!r},forEach:function(e){p(this,t);for(var n,r=s(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!y(p(this,t),e)}}),h&&r(l.prototype,"size",{get:function(){return p(this,t)[v]}}),l},def:function(e,t,n){var r,i,o=y(e,t);return o?o.v=n:(e._l=o={i:i=d(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[v]++,"F"!==i&&(e._i[i]=o)),e},getEntry:y,setStrong:function(e,t,n){c(e,t,function(e,n){this._t=p(e,t),this._k=n,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?l(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,l(1))},n?"entries":"values",!n,!0),f(t)}}},"9MmW":function(e,t,n){"use strict";var r=f(n("Xxa5")),i=f(n("d7EF")),o=f(n("BO1k")),s=f(n("Dd8w")),a=f(n("ifoU")),u=f(n("Zrlr")),c=f(n("wxAW")),l=f(n("//Fk"));function f(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var h=n("zHwk"),d=function(){function e(t,n){var r=this;(0,u.default)(this,e),this.config=t,this.services=n,this.cache=new a.default,this.cacheLifetime=0,this.services.session.getHttpCacheInterval().then(function(e){r.cacheLifetime=1e3*e.seconds,r.cleanupCache()})}return(0,c.default)(e,[{key:"backoffConfig",value:function(){return(0,s.default)(this.config.backoffConfigDefault,this.config.backoffConfigOverride)}},{key:"retryWhenThrottled",value:function(){return"undefined"!=typeof this.config.retryWhenThrottledOverride?this.config.retryWhenThrottledOverride:"undefined"!=typeof this.config.retryWhenThrottledDefault&&this.config.retryWhenThrottledDefault}},{key:"isExpired",value:function(e){return!this.cacheLifetime||Date.now()-e>this.cacheLifetime}},{key:"cleanupCache",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,s=(0,o.default)(this.cache);!(e=(r=s.next()).done);e=!0){var a=(0,i.default)(r.value,2),u=a[0];this.isExpired(a[1].timestamp)&&this.cache.delete(u)}}catch(e){t=!0,n=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw n}}0===this.cache.size&&clearInterval(this.timer)}},{key:"pokeTimer",value:function(){var e=this;this.timer=this.timer||setInterval(function(){return e.cleanupCache()},2*this.cacheLifetime)}},{key:"executeWithRetry",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new l.default(function(r,i){var o=[502,503,504];n&&o.push(429);var s=new h.default(t.backoffConfig());s.on("attempt",function(){e().then(function(e){return s.succeeded(e)}).catch(function(e){o.indexOf(e.status)>-1?s.failed(e):"Twilsock disconnected"===e.message?s.failed(e):(s.removeAllListeners(),s.cancel(),i(e))})}),s.on("succeeded",function(e){r(e)}),s.on("cancelled",function(e){return i(e)}),s.on("failed",function(e){return i(e)}),s.start()})}},{key:"get",value:function(e){return t=this,void 0,n=void 0,i=r.default.mark(function t(){var n,i,o,s=this;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=this.cache.get(e))||this.isExpired(n.timestamp)){t.next=3;break}return t.abrupt("return",n.response);case 3:return i={"X-Twilio-Token":this.config.token},t.next=6,this.executeWithRetry(function(){return s.services.transport.get(e,i)},this.retryWhenThrottled());case 6:return this.cache.set(e,{response:o=t.sent,timestamp:Date.now()}),this.pokeTimer(),t.abrupt("return",o);case 10:case"end":return t.stop()}},t,this)}),new(n||(n=l.default))(function(e,r){function o(e){try{a(i.next(e))}catch(e){r(e)}}function s(e){try{a(i.throw(e))}catch(e){r(e)}}function a(t){t.done?e(t.value):new n(function(e){e(t.value)}).then(o,s)}a((i=i.apply(t,[])).next())});var t,n,i}}]),e}();t.Network=d},"9Rex":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(n("u2KI")),i=p(n("ifoU")),o=p(n("HSQo")),s=p(n("Zx67")),a=p(n("Zrlr")),u=p(n("wxAW")),c=p(n("zwoO")),l=p(n("Pf15")),f=p(n("vzCy")),h=p(n("5ayO")),d=p(n("gPwX"));function p(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(e,n,r,u){(0,a.default)(this,t);var l=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this));(0,o.default)(l,{_conf:{value:u},_connectors:{value:new i.default}});var f=l._detectPlatform();return l._connectors.set("twilsock",new d.default({productId:e,platform:f},r,u)),l._connectors.set("gcm",new h.default({productId:e,platform:f},n,u,"gcm")),l._connectors.set("fcm",new h.default({productId:e,platform:f},n,u,"fcm")),l._connectors.set("apn",new h.default({productId:e,platform:f},n,u,"apn")),l._connectors.get("twilsock").on("transportReady",function(e){return l.emit("transportReady",e)}),l}return(0,l.default)(t,f.default),(0,u.default)(t,[{key:"setNotificationId",value:function(e,t){this._connector(e).setNotificationId(t)}},{key:"hasSubscription",value:function(e,t){this._connector(t).has(e)}},{key:"subscribe",value:function(e,t){this._connector(t).subscribe(e)}},{key:"unsubscribe",value:function(e,t){this._connector(t).unsubscribe(e)}},{key:"updateToken",value:function(){this._connectors.forEach(function(e){return e.updateToken()})}},{key:"_connector",value:function(e){var t=this._connectors.get(e);if(!t)throw new Error("Unknown channel type: "+e);return t}},{key:"_detectPlatform",value:function(){var e="";return"undefined"!=typeof navigator?(e="unknown","undefined"!=typeof navigator.product&&(e=navigator.product),"undefined"!=typeof navigator.userAgent&&(e=navigator.userAgent)):e="web",e.substring(0,128)}}]),t}();t.default=v,(0,r.default)(v),e.exports=t.default},"9bBU":function(e,t,n){n("mClu");var r=n("FeBl").Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},AKgy:function(e,t,n){var r=n("EqjI"),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},ALrJ:function(e,t,n){var r=n("+ZMJ"),i=n("MU5D"),o=n("sB3e"),s=n("QRG4"),a=n("oeOm");e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,f=6==e,h=5==e||f,d=t||a;return function(t,a,p){for(var v,y,m=o(t),_=i(m),g=r(a,p,3),b=s(_.length),w=0,k=n?d(t,b):u?d(t,0):void 0;b>w;w++)if((h||w in _)&&(y=g(v=_[w],w,m),e))if(n)k[w]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return w;case 2:k.push(v)}else if(l)return!1;return f?-1:c||l?l:k}}},AMGY:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var r="undefined"!=typeof window&&window,i="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,o=r||"undefined"!=typeof e&&e||i}).call(t,n("DuR2"))},AUWm:function(e,t,n){"use strict";var r,i=(r=n("c/Tr"))&&r.__esModule?r:{default:r};Object.defineProperty(t,"__esModule",{value:!0});var o=n("BvyM");function s(e,t){return[e].concat((0,i.default)(t))}t.default={setLevel:function(e){o.setLevel(e)},trace:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.trace.apply(null,s("EMS T:",t))},debug:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.debug.apply(null,s("EMS D:",t))},info:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.info.apply(null,s("EMS I:",t))},warn:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.warn.apply(null,s("EMS W:",t))},error:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.error.apply(null,s("EMS E:",t))}}},AyQt:function(e,t,n){"use strict";var r=a(n("Dd8w")),i=a(n("mvHQ")),o=a(n("Zrlr")),s=a(n("wxAW"));function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(t,n){(0,o.default)(this,e),this.config=t,this.storageId=null;try{this.storage=n||sessionStorage}catch(e){}}return(0,s.default)(e,[{key:"storageKey",value:function(e,t){return this.storageId+"::"+e+"::"+t}},{key:"updateStorageId",value:function(e){this.storageId=e}},{key:"store",value:function(e,t,n){return this.isReady?this._store(this.storageKey(e,t),n):null}},{key:"read",value:function(e,t){return this.isReady?this._read(this.storageKey(e,t)):null}},{key:"remove",value:function(e,t,n){if(!this.isReady)return null;try{this.storage.removeItem(this.storageKey(e,t)),n&&this.storage.removeItem(this.storageKey(e,n))}catch(e){}}},{key:"update",value:function(e,t,n,r){if(!this.isReady)return null;this._apply(this.storageKey(e,t),r),n&&this._apply(this.storageKey(e,n),r)}},{key:"_store",value:function(e,t){try{this.storage.setItem(e,(0,i.default)(t))}catch(e){}}},{key:"_read",value:function(e){try{var t=this.storage.getItem(e);if(t)return JSON.parse(t)}catch(e){}return null}},{key:"_apply",value:function(e,t){var n=this._read(e);if(!n)return!1;this._store(e,(0,r.default)(n,t))}},{key:"isReady",get:function(){return this.config.sessionStorageEnabled&&!!this.storageId}}]),e}();t.SessionStorage=u},BDhv:function(e,t,n){var r=n("kM2E");r(r.P+r.R,"Set",{toJSON:n("m9gC")("Set")})},BO1k:function(e,t,n){e.exports={default:n("fxRn"),__esModule:!0}},BX3T:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=Array.isArray||function(e){return e&&"number"==typeof e.length}},BvyM:function(e,t,n){var r,i;!function(o,s){"use strict";void 0===(i="function"==typeof(r=function(){var e=function(){},t="undefined",n=["trace","debug","info","warn","error"];function r(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function i(t,r){for(var i=0;i<n.length;i++){var o=n[i];this[o]=i<t?e:this.methodFactory(o,t,r)}this.log=this.debug}function o(n,o,s){return function(n){return"debug"===n&&(n="log"),typeof console!==t&&(void 0!==console[n]?r(console,n):void 0!==console.log?r(console,"log"):e)}(n)||(function(e,n,r){return function(){typeof console!==t&&(i.call(this,n,r),this[e].apply(this,arguments))}}).apply(this,arguments)}function s(e,r,s){var a,u=this,c="loglevel";function l(){var e;if(typeof window!==t){try{e=window.localStorage[c]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(c)+"=");-1!==r&&(e=/^([^;]+)/.exec(n.slice(r))[1])}catch(e){}return void 0===u.levels[e]&&(e=void 0),e}}e&&(c+=":"+e),u.name=e,u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=s||o,u.getLevel=function(){return a},u.setLevel=function(r,o){if("string"==typeof r&&void 0!==u.levels[r.toUpperCase()]&&(r=u.levels[r.toUpperCase()]),!("number"==typeof r&&r>=0&&r<=u.levels.SILENT))throw"log.setLevel() called with invalid level: "+r;if(a=r,!1!==o&&function(e){var i=(n[r]||"silent").toUpperCase();if(typeof window!==t){try{return void(window.localStorage[c]=i)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"="+i+";"}catch(e){}}}(),i.call(u,r,e),typeof console===t&&r<u.levels.SILENT)return"No console available for logging"},u.setDefaultLevel=function(e){l()||u.setLevel(e,!1)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)};var f=l();null==f&&(f=null==r?"WARN":r),u.setLevel(f,!1)}var a=new s,u={};a.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=u[e];return t||(t=u[e]=new s(e,a.getLevel(),a.methodFactory)),t};var c=typeof window!==t?window.log:void 0;return a.noConflict=function(){return typeof window!==t&&window.log===a&&(window.log=c),a},a.getLoggers=function(){return u},a})?r.call(t,n,t,e):r)||(e.exports=i)}()},BwfY:function(e,t,n){n("fWfb"),n("M6a0"),n("OYls"),n("QWe/"),e.exports=n("FeBl").Symbol},C4MV:function(e,t,n){e.exports={default:n("9bBU"),__esModule:!0}},CJli:function(e,t,n){n("pRCB");var r=n("FeBl").Object;e.exports=function(e,t){return r.defineProperties(e,t)}},CXw9:function(e,t,n){"use strict";var r,i,o,s,a=n("O4g8"),u=n("7KvD"),c=n("+ZMJ"),l=n("RY/4"),f=n("kM2E"),h=n("EqjI"),d=n("lOnJ"),p=n("2KxR"),v=n("NWt+"),y=n("t8x9"),m=n("L42u").set,_=n("82Mu")(),g=n("qARP"),b=n("dNDb"),w=n("fJUb"),k=u.TypeError,x=u.process,C=u.Promise,E="process"==l(x),S=function(){},T=i=g.f,O=!!function(){try{var e=C.resolve(1),t=(e.constructor={})[n("dSzd")("species")]=function(e){e(S,S)};return(E||"function"==typeof PromiseRejectionEvent)&&e.then(S)instanceof t}catch(e){}}(),P=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},A=function(e,t){if(!e._n){e._n=!0;var n=e._c;_(function(){for(var r=e._v,i=1==e._s,o=0,s=function(t){var n,o,s=i?t.ok:t.fail,a=t.resolve,u=t.reject,c=t.domain;try{s?(i||(2==e._h&&R(e),e._h=1),!0===s?n=r:(c&&c.enter(),n=s(r),c&&c.exit()),n===t.promise?u(k("Promise-chain cycle")):(o=P(n))?o.call(n,a,u):a(n)):u(r)}catch(e){u(e)}};n.length>o;)s(n[o++]);e._c=[],e._n=!1,t&&!e._h&&I(e)})}},I=function(e){m.call(u,function(){var t,n,r,i=e._v,o=M(e);if(o&&(t=b(function(){E?x.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=E||M(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},M=function(e){return 1!==e._h&&0===(e._a||e._c).length},R=function(e){m.call(u,function(){var t;E?x.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},j=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),A(t,!0))},N=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw k("Promise can't be resolved itself");(t=P(e))?_(function(){var r={_w:n,_d:!1};try{t.call(e,c(N,r,1),c(j,r,1))}catch(e){j.call(r,e)}}):(n._v=e,n._s=1,A(n,!1))}catch(e){j.call({_w:n,_d:!1},e)}}};O||(C=function(e){p(this,C,"Promise","_h"),d(e),r.call(this);try{e(c(N,this,1),c(j,this,1))}catch(e){j.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n("xH/j")(C.prototype,{then:function(e,t){var n=T(y(this,C));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=E?x.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&A(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=c(N,e,1),this.reject=c(j,e,1)},g.f=T=function(e){return e===C||e===s?new o(e):i(e)}),f(f.G+f.W+f.F*!O,{Promise:C}),n("e6n0")(C,"Promise"),n("bRrM")("Promise"),s=n("FeBl").Promise,f(f.S+f.F*!O,"Promise",{reject:function(e){var t=T(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(a||!O),"Promise",{resolve:function(e){return w(a&&this===s?C:this,e)}}),f(f.S+f.F*!(O&&n("dY0y")(function(e){C.all(e).catch(S)})),"Promise",{all:function(e){var t=this,n=T(t),r=n.resolve,i=n.reject,o=b(function(){var n=[],o=0,s=1;v(e,!1,function(e){var a=o++,u=!1;n.push(void 0),s++,t.resolve(e).then(function(e){u||(u=!0,n[a]=e,--s||r(n))},i)}),--s||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=T(t),r=n.reject,i=b(function(){v(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},CdIu:function(e,t,n){"use strict";var r,i=(r=n("Zrlr"))&&r.__esModule?r:{default:r};Object.defineProperty(t,"__esModule",{value:!0}),t.SyncListDescriptor=function e(t){(0,i.default)(this,e),this.descriptor=t,this.channel_sid=t.channel_sid,this.status=t.status,this.channel=t.channel,this.messages=t.messages,this.roster=t.roster,this.lastConsumedMessageIndex=t.last_consumed_message_index,this.status=t.status}},D2L2:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},Dd8w:function(e,t,n){"use strict";t.__esModule=!0;var r,i=(r=n("woOf"))&&r.__esModule?r:{default:r};t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},DlMc:function(e,t,n){var r=n("gApy"),i=n("DtRx"),o=i;o.v1=r,o.v4=i,e.exports=o},DtRx:function(e,t,n){var r=n("i4uy"),i=n("MAlW");e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},DuR2:function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},EBT7:function(e,t){(function(){var t;t=function(){function e(){this._first=null,this._last=null,this.length=0}return e.prototype.push=function(e){var t;this.length++,t={value:e,next:null},null!=this._last?(this._last.next=t,this._last=t):this._first=this._last=t},e.prototype.shift=function(){var e,t;if(null!=this._first)return this.length--,t=this._first.value,this._first=null!=(e=this._first.next)?e:this._last=null,t},e.prototype.getArray=function(){var e,t,n;for(e=this._first,n=[];null!=e;)n.push((t=e,e=e.next,t.value));return n},e}(),e.exports=t}).call(this)},EGZi:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},EKta:function(e,t,n){"use strict";t.byteLength=function(e){return 3*e.length/4-c(e)},t.toByteArray=function(e){var t,n,r,s,a,u=e.length;s=c(e),a=new o(3*u/4-s),n=s>0?u-4:u;var l=0;for(t=0;t<n;t+=4)r=i[e.charCodeAt(t)]<<18|i[e.charCodeAt(t+1)]<<12|i[e.charCodeAt(t+2)]<<6|i[e.charCodeAt(t+3)],a[l++]=r>>16&255,a[l++]=r>>8&255,a[l++]=255&r;return 2===s?(r=i[e.charCodeAt(t)]<<2|i[e.charCodeAt(t+1)]>>4,a[l++]=255&r):1===s&&(r=i[e.charCodeAt(t)]<<10|i[e.charCodeAt(t+1)]<<4|i[e.charCodeAt(t+2)]>>2,a[l++]=r>>8&255,a[l++]=255&r),a},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o="",s=[],a=0,u=n-i;a<u;a+=16383)s.push(l(e,a,a+16383>u?u:a+16383));return 1===i?(o+=r[(t=e[n-1])>>2],o+=r[t<<4&63],o+="=="):2===i&&(o+=r[(t=(e[n-2]<<8)+e[n-1])>>10],o+=r[t>>4&63],o+=r[t<<2&63],o+="="),s.push(o),s.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function l(e,t,n){for(var i,o=[],s=t;s<n;s+=3)o.push(r[(i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]))>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},EqBC:function(e,t,n){"use strict";var r=n("kM2E"),i=n("FeBl"),o=n("7KvD"),s=n("t8x9"),a=n("fJUb");r(r.P+r.R,"Promise",{finally:function(e){var t=s(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return a(t,e()).then(function(){return n})}:e,n?function(n){return a(t,e()).then(function(){throw n})}:e)}})},EqjI:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},EuP9:function(e,t,n){"use strict";(function(e){var r=n("EKta"),i=n("ujcs"),o=n("sOR5");function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=h(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=a(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|d(t.length);return 0===(e=a(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):h(e,t);if("Buffer"===t.type&&o(t.data))return h(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=a(e,t<0?0:0|d(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|d(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return L(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(r)return L(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var o,s=1,a=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=n;o<a;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(e,o+h)!==c(t,h)){f=!1;break}if(f)return o}return-1}function _(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function g(e,t,n,r){return B(L(t,e.length-n),e,n,r)}function b(e,t,n,r){return B(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function w(e,t,n,r){return b(e,t,n,r)}function k(e,t,n,r){return B(V(t),e,n,r)}function x(e,t,n,r){return B(function(e,t){for(var n,r,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i.push(n%256),i.push(r);return i}(t,e.length-n),e,n,r)}function C(e,t,n){return r.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function E(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,u,c=e[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:s=e[i+2],128==(192&(o=e[i+1]))&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:s=e[i+2],a=e[i+3],128==(192&(o=e[i+1]))&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(r.push((l-=65536)>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(e){var t=e.length;if(t<=S)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=S));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?a(null,t):void 0!==n?"string"==typeof r?a(null,t).fill(n,r):a(null,t).fill(n):a(null,t)}(0,e,t,n)},u.allocUnsafe=function(e){return f(null,e)},u.allocUnsafeSlow=function(e){return f(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):(function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return O(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}).apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var o=i-r,s=n-t,a=Math.min(o,s),c=this.slice(r,i),l=e.slice(t,n),f=0;f<a;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return g(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return w(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function P(e,t,n){var r,i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var o="",s=t;s<n;++s)o+=(r=e[s])<16?"0"+r.toString(16):r.toString(16);return o}function A(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function I(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,r,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function R(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function j(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function N(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(e,t,n,r,o){return o||N(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,o){return o||N(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if(e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||I(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||I(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||I(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||I(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||I(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||I(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||I(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||I(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||I(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return D(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return D(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=u.isBuffer(e)?e:L(new u(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function L(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function B(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(t,n("DuR2"))},FTGv:function(e,t,n){"use strict";var r=a(n("Zx67")),i=a(n("Zrlr")),o=a(n("zwoO")),s=a(n("Pf15"));function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,i.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,r.default)(t)).call(this));return a.name=a.constructor.name,a.message=e+" (status: "+n+", code: "+s+")",a.status=n,a.code=s,a}return(0,s.default)(t,e),t}(Error);t.SyncError=u,t.default=u},FeBl:function(e,t){var n=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},GK6M:function(e,t,n){"use strict";t.a=function(e){return r=e,o};var r,i=n("fKB6");function o(){try{return r.apply(this,arguments)}catch(e){return i.a.e=e,i.a}}},HSQo:function(e,t,n){e.exports={default:n("CJli"),__esModule:!0}},HhJp:function(e,t,n){"use strict";var r=a(n("Xxa5")),i=a(n("Zrlr")),o=a(n("wxAW")),s=a(n("//Fk"));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(e,t,n,r){return new(n||(n=s.default))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var c=n("dYWg"),l=n("+DgU"),f=n("Y39h"),h=function(){function e(t,n){(0,i.default)(this,e),this.services=t,this.url=n}return(0,o.default)(e,[{key:"getUserDescriptor",value:function(e){return u(this,void 0,void 0,r.default.mark(function t(){var n;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=new c.UriBuilder(this.url).path(e).build(),t.next=3,this.services.network.get(n);case 3:return t.abrupt("return",new f.UserDescriptor(this.services,t.sent.body));case 5:case"end":return t.stop()}},t,this)}))}},{key:"getChannelUserDescriptors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u(this,void 0,void 0,r.default.mark(function n(){var i,o,s=this;return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=new c.UriBuilder(this.url).arg("ChannelSid",e).arg("PageToken",t.pageToken).build(),n.next=3,this.services.network.get(i);case 3:return n.abrupt("return",new l.RestPaginator((o=n.sent).body.users.map(function(e){return new f.UserDescriptor(s.services,e)}),function(t){return s.getChannelUserDescriptors(e,{pageToken:t})},o.body.meta.prev_token,o.body.meta.next_token));case 5:case"end":return n.stop()}},n,this)}))}}]),e}();t.UserDescriptors=h},HpRW:function(e,t,n){"use strict";var r=n("kM2E"),i=n("lOnJ"),o=n("+ZMJ"),s=n("NWt+");e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,a,u=arguments[1];return i(this),(t=void 0!==u)&&i(u),void 0==e?new this:(n=[],t?(r=0,a=o(u,arguments[2],2),s(e,!1,function(e){n.push(a(e,r++))})):s(e,!1,n.push,n),new this(n))}})}},Ibhu:function(e,t,n){var r=n("D2L2"),i=n("TcQ7"),o=n("vFc/")(!1),s=n("ax3d")("IE_PROTO");e.exports=function(e,t){var n,a=i(e),u=0,c=[];for(n in a)n!=s&&r(a,n)&&c.push(n);for(;t.length>u;)r(a,n=t[u++])&&(~o(c,n)||c.push(n));return c}},Ibl0:function(e,t,n){"use strict";var r=s(n("//Fk")),i=s(n("Zrlr")),o=s(n("wxAW"));function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){var t=this;(0,i.default)(this,e),this._promise=new r.default(function(e,n){t._resolve=e,t._reject=n})}return(0,o.default)(e,[{key:"update",value:function(e){this._resolve(e)}},{key:"set",value:function(e){this.current=e,this._resolve(e)}},{key:"fail",value:function(e){this._reject(e)}},{key:"promise",get:function(){return this._promise}}]),e}();t.Deferred=a},J5uf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n("c/Tr")),i=o(n("BvyM"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return[e].concat((0,r.default)(t))}t.default={setLevel:function(e){i.default.setLevel(e)},trace:function(){i.default.trace.apply(null,s("Notify T:",arguments))},debug:function(){i.default.debug.apply(null,s("Notify D:",arguments))},info:function(){i.default.info.apply(null,s("Notify I:",arguments))},warn:function(){i.default.warn.apply(null,s("Notify W:",arguments))},error:function(){i.default.error.apply(null,s("Notify E:",arguments))}},e.exports=t.default},JHvc:function(e,t,n){var r=n("vzCy"),i=n("oYPl");function o(e){r.EventEmitter.call(this),this.backoffStrategy_=e,this.maxNumberOfRetry_=-1,this.backoffNumber_=0,this.backoffDelay_=0,this.timeoutID_=-1,this.handlers={backoff:this.onBackoff_.bind(this)}}n("OMJi").inherits(o,r.EventEmitter),o.prototype.failAfter=function(e){i.checkArgument(e>0,"Expected a maximum number of retry greater than 0 but got %s.",e),this.maxNumberOfRetry_=e},o.prototype.backoff=function(e){i.checkState(-1===this.timeoutID_,"Backoff in progress."),this.backoffNumber_===this.maxNumberOfRetry_?(this.emit("fail",e),this.reset()):(this.backoffDelay_=this.backoffStrategy_.next(),this.timeoutID_=setTimeout(this.handlers.backoff,this.backoffDelay_),this.emit("backoff",this.backoffNumber_,this.backoffDelay_,e))},o.prototype.onBackoff_=function(){this.timeoutID_=-1,this.emit("ready",this.backoffNumber_,this.backoffDelay_),this.backoffNumber_++},o.prototype.reset=function(){this.backoffNumber_=0,this.backoffStrategy_.reset(),clearTimeout(this.timeoutID_),this.timeoutID_=-1},e.exports=o},JTgQ:function(e,t,n){(function(t){var r=n("S1/o").UINT32;r.prototype.xxh_update=function(e,t){var n,r,s=o._low,a=o._high;n=(r=e*s)>>>16,n+=t*s,n&=65535;var u=this._low+(65535&r),c=u>>>16,l=(c+=this._high+(65535&(n+=e*a)))<<16|65535&u;n=(r=(u=65535&(l=l<<13|l>>>19))*(s=i._low))>>>16,n+=(c=l>>>16)*s,n&=65535,n+=u*(a=i._high),this._low=65535&r,this._high=65535&n};var i=r("2654435761"),o=r("2246822519"),s=r("3266489917"),a=r("668265263"),u=r("374761393");function c(){return 2==arguments.length?new c(arguments[1]).update(arguments[0]).digest():this instanceof c?void l.call(this,arguments[0]):new c(arguments[0])}function l(e){return this.seed=e instanceof r?e.clone():r(e),this.v1=this.seed.clone().add(i).add(o),this.v2=this.seed.clone().add(o),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(i),this.total_len=0,this.memsize=0,this.memory=null,this}c.prototype.init=l,c.prototype.update=function(e){var n,r="string"==typeof e;r&&(e=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);i<128?t.push(i):i<2048?t.push(192|i>>6,128|63&i):i<55296||i>=57344?t.push(224|i>>12,128|i>>6&63,128|63&i):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++n)),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return new Uint8Array(t)}(e),r=!1,n=!0),"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer&&(n=!0,e=new Uint8Array(e));var i=0,o=e.length,s=i+o;if(0==o)return this;if(this.total_len+=o,0==this.memsize&&(this.memory=r?"":n?new Uint8Array(16):new t(16)),this.memsize+o<16)return r?this.memory+=e:n?this.memory.set(e.subarray(0,o),this.memsize):e.copy(this.memory,this.memsize,0,o),this.memsize+=o,this;if(this.memsize>0){r?this.memory+=e.slice(0,16-this.memsize):n?this.memory.set(e.subarray(0,16-this.memsize),this.memsize):e.copy(this.memory,this.memsize,0,16-this.memsize);var a=0;r?(this.v1.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),this.v2.xxh_update(this.memory.charCodeAt((a+=4)+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),this.v3.xxh_update(this.memory.charCodeAt((a+=4)+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),this.v4.xxh_update(this.memory.charCodeAt((a+=4)+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2))):(this.v1.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),this.v2.xxh_update(this.memory[(a+=4)+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),this.v3.xxh_update(this.memory[(a+=4)+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),this.v4.xxh_update(this.memory[(a+=4)+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2])),i+=16-this.memsize,this.memsize=0,r&&(this.memory="")}if(i<=s-16){var u=s-16;do{r?(this.v1.xxh_update(e.charCodeAt(i+1)<<8|e.charCodeAt(i),e.charCodeAt(i+3)<<8|e.charCodeAt(i+2)),this.v2.xxh_update(e.charCodeAt((i+=4)+1)<<8|e.charCodeAt(i),e.charCodeAt(i+3)<<8|e.charCodeAt(i+2)),this.v3.xxh_update(e.charCodeAt((i+=4)+1)<<8|e.charCodeAt(i),e.charCodeAt(i+3)<<8|e.charCodeAt(i+2)),this.v4.xxh_update(e.charCodeAt((i+=4)+1)<<8|e.charCodeAt(i),e.charCodeAt(i+3)<<8|e.charCodeAt(i+2))):(this.v1.xxh_update(e[i+1]<<8|e[i],e[i+3]<<8|e[i+2]),this.v2.xxh_update(e[(i+=4)+1]<<8|e[i],e[i+3]<<8|e[i+2]),this.v3.xxh_update(e[(i+=4)+1]<<8|e[i],e[i+3]<<8|e[i+2]),this.v4.xxh_update(e[(i+=4)+1]<<8|e[i],e[i+3]<<8|e[i+2])),i+=4}while(i<=u)}return i<s&&(r?this.memory+=e.slice(i):n?this.memory.set(e.subarray(i,s),this.memsize):e.copy(this.memory,this.memsize,i,s),this.memsize=s-i),this},c.prototype.digest=function(){var e,t,n=this.memory,c="string"==typeof n,l=0,f=this.memsize,h=new r;for((e=this.total_len>=16?this.v1.rotl(1).add(this.v2.rotl(7).add(this.v3.rotl(12).add(this.v4.rotl(18)))):this.seed.clone().add(u)).add(h.fromNumber(this.total_len));l<=f-4;)c?h.fromBits(n.charCodeAt(l+1)<<8|n.charCodeAt(l),n.charCodeAt(l+3)<<8|n.charCodeAt(l+2)):h.fromBits(n[l+1]<<8|n[l],n[l+3]<<8|n[l+2]),e.add(h.multiply(s)).rotl(17).multiply(a),l+=4;for(;l<f;)h.fromBits(c?n.charCodeAt(l++):n[l++],0),e.add(h.multiply(u)).rotl(11).multiply(i);return t=e.clone().shiftRight(15),e.xor(t).multiply(o),t=e.clone().shiftRight(13),e.xor(t).multiply(s),t=e.clone().shiftRight(16),e.xor(t),this.init(this.seed),e},e.exports=c}).call(t,n("EuP9").Buffer)},Jh8B:function(e,t,n){"use strict";var r=a(n("Zx67")),i=a(n("Zrlr")),o=a(n("zwoO")),s=a(n("Pf15"));function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(e,n){(0,i.default)(this,t);var s=(0,o.default)(this,(t.__proto__||(0,r.default)(t)).call(this));return s.name=s.constructor.name,s.message=e,s.code=n,Error.captureStackTrace?Error.captureStackTrace(s,s.constructor):s.stack=(new Error).stack,s}return(0,s.default)(t,e),t}(Error);t.SessionError=u},Jnfr:function(e,t){function n(e){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+e+"'.")})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="Jnfr"},JuVV:function(e,t,n){"use strict";var r,i=(r=n("c/Tr"))&&r.__esModule?r:{default:r};Object.defineProperty(t,"__esModule",{value:!0});var o=n("BvyM");function s(e,t){return[e].concat((0,i.default)(t))}t.default={setLevel:function(e){o.setLevel(e)},trace:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.trace.apply(null,s("Sync T:",t))},debug:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.debug.apply(null,s("Sync D:",t))},info:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.info.apply(null,s("Sync I:",t))},warn:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.warn.apply(null,s("Sync W:",t))},error:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.error.apply(null,s("Sync E:",t))}}},Jwyl:function(e,t,n){"use strict";var r=n("TToO"),i=n("g5jc"),o=n("YaPU"),s=(n("OVmG"),n("VwZZ")),a=n("0P3J"),u=function(e){function t(t,n){e.call(this),this.source=t,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}return Object(r.__extends)(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new s.a).add(this.source.subscribe(new l(this.getSubject(),this))),e.closed?(this._connection=null,e=s.a.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return Object(a.a)()(this)},t}(o.a).prototype,c={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:u._subscribe},_isComplete:{value:u._isComplete,writable:!0},getSubject:{value:u.getSubject},connect:{value:u.connect},refCount:{value:u.refCount}},l=function(e){function t(t,n){e.call(this,t),this.connectable=n}return Object(r.__extends)(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(i.b);t.a=function(e,t){return function(n){var r;if(r="function"==typeof e?e:function(){return e},"function"==typeof t)return n.lift(new f(r,t));var i=Object.create(n,c);return i.source=n,i.subjectFactory=r,i}};var f=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i},e}()},KKtg:function(e,t,n){"use strict";var r=a(n("Xxa5")),i=a(n("Zrlr")),o=a(n("wxAW")),s=a(n("//Fk"));function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n("dYWg"),c=n("+DgU"),l=n("CdIu"),f=function(){function e(t){(0,i.default)(this,e),this.services=t}return(0,o.default)(e,[{key:"getPage",value:function(e){return t=this,void 0,n=void 0,i=r.default.mark(function t(){var n,i,o=this;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=e||{},t.next=3,this.services.session.getSessionLinks();case 3:return n=new u.UriBuilder(t.sent.syncListUrl).arg("PageToken",e.pageToken).build(),t.next=7,this.services.network.get(n);case 7:return t.abrupt("return",new c.RestPaginator((i=t.sent).body.channels.map(function(e){return new l.SyncListDescriptor(e)}),function(e){return o.getPage({pageToken:e})},i.body.meta.previous_token,i.body.meta.next_token));case 9:case"end":return t.stop()}},t,this)}),new(n||(n=s.default))(function(e,r){function o(e){try{a(i.next(e))}catch(e){r(e)}}function s(e){try{a(i.throw(e))}catch(e){r(e)}}function a(t){t.done?e(t.value):new n(function(e){e(t.value)}).then(o,s)}a((i=i.apply(t,[])).next())});var t,n,i}}]),e}();t.SyncList=f},KcGS:function(e,t,n){"use strict";var r=p(n("BO1k")),i=p(n("Xxa5")),o=p(n("ifoU")),s=p(n("mvHQ")),a=p(n("RRo+")),u=p(n("Zx67")),c=p(n("Zrlr")),l=p(n("wxAW")),f=p(n("zwoO")),h=p(n("Pf15")),d=p(n("//Fk"));function p(e){return e&&e.__esModule?e:{default:e}}var v=function(e,t,n,r){return new(n||(n=d.default))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var y=n("vzCy"),m=n("P35s"),_=n("Kie1"),g=n("+rEi"),b=n("0m72"),w=n("dYWg"),k=m.Logger.scope(""),x={attributes:"attributes",createdBy:"createdBy",dateCreated:"dateCreated",dateUpdated:"dateUpdated",friendlyName:"friendlyName",lastConsumedMessageIndex:"lastConsumedMessageIndex",name:"friendlyName",sid:"sid",status:"status",type:"type",uniqueName:"uniqueName"};function C(e){try{return new Date(e)}catch(e){return null}}function E(e){switch(e){case"notParticipating":return"known";default:return e}}t.filterStatus=E;var S=function(e){function t(e,n,r){(0,c.default)(this,t);var i=(0,f.default)(this,(t.__proto__||(0,u.default)(t)).call(this)),l=n.attributes||{},h=n.createdBy,d=C(n.dateCreated),p=C(n.dateUpdated),v=n.name||n.friendlyName||null,y=(0,a.default)(n.lastConsumedMessageIndex)?n.lastConsumedMessageIndex:null,m=n.uniqueName||null;try{(0,s.default)(l)}catch(e){throw new Error("Attributes must be a valid JSON object.")}return i.services=e,i.sid=r,i.entityName=n.channel,i.state={uniqueName:m,status:"known",type:n.type,attributes:l,createdBy:h,dateCreated:d,dateUpdated:p,friendlyName:v,lastConsumedMessageIndex:y},i.members=new o.default,i.membersEntity=new _.Members(i,i.services,i.members),i.membersEntity.on("memberJoined",i.emit.bind(i,"memberJoined")),i.membersEntity.on("memberLeft",i.emit.bind(i,"memberLeft")),i.membersEntity.on("memberUpdated",i.emit.bind(i,"memberUpdated")),i.messagesEntity=new b.Messages(i,e),i.messagesEntity.on("messageAdded",function(e){return i._onMessageAdded(e)}),i.messagesEntity.on("messageUpdated",i.emit.bind(i,"messageUpdated")),i.messagesEntity.on("messageRemoved",i.emit.bind(i,"messageRemoved")),i}return(0,h.default)(t,y.EventEmitter),(0,l.default)(t,[{key:"_subscribe",value:function(){var e=this;return this.entityPromise?this.entityPromise:this.entityPromise=this.entityPromise||this.services.syncClient.document({id:this.entityName,mode:"open_existing"}).then(function(t){return e.entity=t,e.entity.on("updated",function(t){e._update(t.value)}),e.entity.on("removed",function(){return e.emit("removed",e)}),e._update(e.entity.value),t}).catch(function(t){throw e.entity=null,e.entityPromise=null,k.error("Failed to get channel object",t),t})}},{key:"_subscribeStreams",value:function(){return v(this,void 0,void 0,i.default.mark(function e(){var t,n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._subscribe();case 3:return k.trace("_subscribeStreams, this.entity.value=",this.entity.value),t=this.entity.value.messages,n=this.entity.value.roster,e.next=8,d.default.all([this.messagesEntity.subscribe(t),this.membersEntity.subscribe(n)]);case 8:e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(0),k.error("Failed to subscribe on channel objects",this.sid,e.t0),e.t0;case 14:case"end":return e.stop()}},e,this,[[0,10]])}))}},{key:"_unsubscribe",value:function(){return v(this,void 0,void 0,i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrivate||!this.entity){e.next=5;break}return e.next=3,this.entity.close();case 3:this.entity=null,this.entityPromise=null;case 5:return e.abrupt("return",d.default.all([this.membersEntity.unsubscribe(),this.messagesEntity.unsubscribe()]));case 6:case"end":return e.stop()}},e,this)}))}},{key:"_setStatus",value:function(e,t){this.statusSource=t,this.state.status!==e&&(this.state.status=e,"joined"===e?this._subscribeStreams():"invited"===e?this._subscribe():this.entityPromise&&this._unsubscribe())}},{key:"_statusSource",value:function(){return this.statusSource}},{key:"_update",value:function(e){k.trace("_update",e),t.preprocessUpdate(e,this.sid);var n=!1;for(var r in e){var i=x[r];i&&(i===x.status?e.status&&"unknown"!=e.status&&(this.state.status=E(e.status)):i===x.attributes?w.isDeepEqual(this.state.attributes,e.attributes)||(this.state.attributes=e.attributes,n=!0):e[r]instanceof Date?this.state[i]&&this.state[i].getTime()===e[r].getTime()||(this.state[i]=e[r],n=!0):this[i]!==e[r]&&(this.state[i]=e[r],n=!0))}n&&this.emit("updated",this)}},{key:"_onMessageAdded",value:function(e){var t=!0,n=!1,i=void 0;try{for(var o,s=(0,r.default)(this.members.values());!(t=(o=s.next()).done);t=!0){var a=o.value;if(a.identity===e.author){a._endTyping();break}}}catch(e){n=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw i}}this.emit("messageAdded",e)}},{key:"add",value:function(e){return v(this,void 0,void 0,i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&"string"==typeof e){t.next=2;break}throw new Error("Channel.add requires an <String>identity parameter");case 2:return t.abrupt("return",this.membersEntity.add(e));case 3:case"end":return t.stop()}},t,this)}))}},{key:"advanceLastConsumedMessageIndex",value:function(e){return v(this,void 0,void 0,i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((0,a.default)(e)){t.next=2;break}throw new Error("Channel.advanceLastConsumedMessageIndex requires an integral <Number>index parameter");case 2:return t.next=4,this._subscribeStreams();case 4:return t.abrupt("return",this.services.consumptionHorizon.advanceLastConsumedMessageIndexForChannel(this.sid,e,this.lastConsumedMessageIndex));case 5:case"end":return t.stop()}},t,this)}))}},{key:"decline",value:function(){return v(this,void 0,void 0,i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.addCommand("declineInvitation",{channelSid:this.sid});case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}},e,this)}))}},{key:"delete",value:function(){return v(this,void 0,void 0,i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.addCommand("destroyChannel",{channelSid:this.sid});case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}},e,this)}))}},{key:"getAttributes",value:function(){return v(this,void 0,void 0,i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._subscribe();case 2:return e.abrupt("return",this.attributes);case 3:case"end":return e.stop()}},e,this)}))}},{key:"getMessages",value:function(e,t,n){return v(this,void 0,void 0,i.default.mark(function r(){return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if("undefined"==typeof t||(0,a.default)(t)){r.next=2;break}throw new Error("Anchor should be a valid message index");case 2:return r.next=4,this._subscribeStreams();case 4:return r.abrupt("return",this.messagesEntity.getMessages(e,t,n));case 5:case"end":return r.stop()}},r,this)}))}},{key:"getMembers",value:function(){return v(this,void 0,void 0,i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._subscribeStreams();case 2:return e.abrupt("return",this.membersEntity.getMembers());case 3:case"end":return e.stop()}},e,this)}))}},{key:"getMembersCount",value:function(){return v(this,void 0,void 0,i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.getSessionLinks();case 2:return t=new w.UriBuilder(e.sent.publicChannelsUrl).path(this.sid).build(),e.next=6,this.services.network.get(t);case 6:return e.abrupt("return",e.sent.body.members_count);case 8:case"end":return e.stop()}},e,this)}))}},{key:"getMessagesCount",value:function(){return v(this,void 0,void 0,i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.getSessionLinks();case 2:return t=new w.UriBuilder(e.sent.publicChannelsUrl).path(this.sid).build(),e.next=6,this.services.network.get(t);case 6:return e.abrupt("return",e.sent.body.messages_count);case 8:case"end":return e.stop()}},e,this)}))}},{key:"getUnconsumedMessagesCount",value:function(){return v(this,void 0,void 0,i.default.mark(function e(){var t,n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.getSessionLinks();case 2:return t=new w.UriBuilder(e.sent.myChannelsUrl).arg("ChannelSid",this.sid).build(),e.next=6,this.services.network.get(t);case 6:if(!(n=e.sent).body.channels.length){e.next=13;break}if("undefined"==typeof n.body.channels[0].unread_messages_count||null==n.body.channels[0].unread_messages_count){e.next=12;break}return e.abrupt("return",n.body.channels[0].unread_messages_count);case 12:return e.abrupt("return",null);case 13:throw new Error("Channel is not in user channels list");case 14:case"end":return e.stop()}},e,this)}))}},{key:"invite",value:function(e){return v(this,void 0,void 0,i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("string"==typeof e&&e.length){t.next=2;break}throw new Error("Channel.invite requires an <String>identity parameter");case 2:return t.abrupt("return",this.membersEntity.invite(e));case 3:case"end":return t.stop()}},t,this)}))}},{key:"join",value:function(){return v(this,void 0,void 0,i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.addCommand("joinChannelV2",{channelSid:this.sid});case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}},e,this)}))}},{key:"leave",value:function(){return v(this,void 0,void 0,i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("joined"!==this.state.status){e.next=3;break}return e.next=3,this.services.session.addCommand("leaveChannel",{channelSid:this.sid});case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},e,this)}))}},{key:"removeMember",value:function(e){return v(this,void 0,void 0,i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&("string"==typeof e||e instanceof g.Member)){t.next=2;break}throw new Error("Channel.removeMember requires a <String|Member>member parameter.");case 2:return t.abrupt("return",this.membersEntity.remove("string"==typeof e?e:e.identity));case 3:case"end":return t.stop()}},t,this)}))}},{key:"sendMessage",value:function(e,t){return v(this,void 0,void 0,i.default.mark(function n(){return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("string"!=typeof e){n.next=7;break}return n.next=3,this.messagesEntity.send(e,t);case 3:return n.abrupt("return",n.sent.messageId);case 7:return n.next=9,this.messagesEntity.sendMedia(e,t);case 9:return n.abrupt("return",n.sent.messageId);case 11:case"end":return n.stop()}},n,this)}))}},{key:"setAllMessagesConsumed",value:function(){return v(this,void 0,void 0,i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._subscribeStreams();case 2:return e.next=4,this.getMessages(1);case 4:if(!((t=e.sent).items.length>0)){e.next=7;break}return e.abrupt("return",this.advanceLastConsumedMessageIndex(t.items[0].index));case 7:return e.abrupt("return",d.default.resolve(0));case 8:case"end":return e.stop()}},e,this)}))}},{key:"setNoMessagesConsumed",value:function(){return v(this,void 0,void 0,i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._subscribeStreams();case 2:return e.abrupt("return",this.services.consumptionHorizon.updateLastConsumedMessageIndexForChannel(this.sid,null));case 3:case"end":return e.stop()}},e,this)}))}},{key:"typing",value:function(){return this.services.typingIndicator.send(this.sid)}},{key:"updateAttributes",value:function(e){return v(this,void 0,void 0,i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=4;break}throw new Error("Attributes can't be null");case 4:if(e.constructor===Object){t.next=6;break}throw new Error("Attributes must be a valid JSON object.");case 6:return t.next=8,this.services.session.addCommand("editAttributes",{channelSid:this.sid,attributes:(0,s.default)(e)});case 8:return t.abrupt("return",this);case 9:case"end":return t.stop()}},t,this)}))}},{key:"updateFriendlyName",value:function(e){return v(this,void 0,void 0,i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state.friendlyName===e){t.next=3;break}return t.next=3,this.services.session.addCommand("editFriendlyName",{channelSid:this.sid,friendlyName:e});case 3:return t.abrupt("return",this);case 4:case"end":return t.stop()}},t,this)}))}},{key:"updateLastConsumedMessageIndex",value:function(e){return v(this,void 0,void 0,i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((0,a.default)(e)||null===e){t.next=2;break}throw new Error('Incorrect argument "index": integer number or null expected');case 2:return t.next=4,this._subscribeStreams();case 4:return t.abrupt("return",this.services.consumptionHorizon.updateLastConsumedMessageIndexForChannel(this.sid,e));case 5:case"end":return t.stop()}},t,this)}))}},{key:"updateUniqueName",value:function(e){return v(this,void 0,void 0,i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state.uniqueName===e){t.next=3;break}return t.next=3,this.services.session.addCommand("editUniqueName",{channelSid:this.sid,uniqueName:e});case 3:return t.abrupt("return",this);case 4:case"end":return t.stop()}},t,this)}))}},{key:"getUserDescriptors",value:function(){return v(this,void 0,void 0,i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.services.users.getChannelUserDescriptors(this.sid));case 1:case"end":return e.stop()}},e,this)}))}},{key:"status",get:function(){return this.state.status}},{key:"type",get:function(){return this.state.type}},{key:"uniqueName",get:function(){return this.state.uniqueName}},{key:"isPrivate",get:function(){return"private"===this.state.type}},{key:"friendlyName",get:function(){return this.state.friendlyName}},{key:"dateUpdated",get:function(){return this.state.dateUpdated}},{key:"dateCreated",get:function(){return this.state.dateCreated}},{key:"createdBy",get:function(){return this.state.createdBy}},{key:"attributes",get:function(){return this.state.attributes}},{key:"lastConsumedMessageIndex",get:function(){return this.state.lastConsumedMessageIndex}}],[{key:"preprocessUpdate",value:function(e,t){try{"string"==typeof e.attributes?e.attributes=JSON.parse(e.attributes):e.attributes&&(0,s.default)(e.attributes)}catch(n){k.warn("Retrieved malformed attributes from the server for channel: "+t),e.attributes={}}try{e.dateCreated&&(e.dateCreated=new Date(e.dateCreated))}catch(n){k.warn("Retrieved malformed attributes from the server for channel: "+t),delete e.dateCreated}try{e.dateUpdated&&(e.dateUpdated=new Date(e.dateUpdated))}catch(n){k.warn("Retrieved malformed attributes from the server for channel: "+t),delete e.dateUpdated}}}]),t}();t.Channel=S},Kh4W:function(e,t,n){t.f=n("dSzd")},Kh5d:function(e,t,n){var r=n("sB3e"),i=n("PzxK");n("uqUo")("getPrototypeOf",function(){return function(e){return i(r(e))}})},Kie1:function(e,t,n){"use strict";var r=l(n("Xxa5")),i=l(n("Zx67")),o=l(n("Zrlr")),s=l(n("wxAW")),a=l(n("zwoO")),u=l(n("Pf15")),c=l(n("//Fk"));function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e,t,n,r){return new(n||(n=c.default))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var h=n("vzCy"),d=n("+rEi"),p=n("P35s").Logger.scope("Members"),v=function(e){function t(e,n,r){(0,o.default)(this,t);var s=(0,a.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return s.services=n,s.channel=e,s.members=r,s}return(0,u.default)(t,h.EventEmitter),(0,s.default)(t,[{key:"unsubscribe",value:function(){return f(this,void 0,void 0,r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.rosterEntityPromise){e.next=6;break}return e.next=3,this.rosterEntityPromise;case 3:e.sent.close(),this.rosterEntityPromise=null;case 6:case"end":return e.stop()}},e,this)}))}},{key:"subscribe",value:function(e){var t=this;return this.rosterEntityPromise=this.rosterEntityPromise||this.services.syncClient.map({id:e,mode:"open_existing"}).then(function(e){e.on("itemAdded",function(e){t.upsertMember(e.item.key,e.item.value).then(function(e){t.emit("memberJoined",e)})}),e.on("itemRemoved",function(e){var n=e.key;if(t.members.has(n)){var r=t.members.get(n);t.members.delete(n),t.emit("memberLeft",r)}}),e.on("itemUpdated",function(e){t.upsertMember(e.item.key,e.item.value)});var n=[];return e.forEach(function(e){n.push(t.upsertMember(e.key,e.value))}).then(function(){return c.default.all(n)}).then(function(){return e})}).catch(function(e){throw t.rosterEntityPromise=null,p.error("Failed to get roster object for channel",t.channel.sid,e),e})}},{key:"upsertMember",value:function(e,t){return f(this,void 0,void 0,r.default.mark(function n(){var i,o=this;return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(i=this.members.get(e))){n.next=3;break}return n.abrupt("return",i._update(t));case 3:return i=new d.Member(this.services,this.channel,t,e),this.members.set(e,i),i.on("updated",function(){return o.emit("memberUpdated",i)}),n.abrupt("return",i);case 7:case"end":return n.stop()}},n,this)}))}},{key:"getMembers",value:function(){var e=this;return this.rosterEntityPromise.then(function(){var t=[];return e.members.forEach(function(e){return t.push(e)}),t})}},{key:"add",value:function(e){return this.services.session.addCommand("addMemberV2",{channelSid:this.channel.sid,username:e})}},{key:"invite",value:function(e){return this.services.session.addCommand("inviteMember",{channelSid:this.channel.sid,username:e})}},{key:"remove",value:function(e){return this.services.session.addCommand("removeMember",{channelSid:this.channel.sid,username:e})}}]),t}();t.Members=v},L42u:function(e,t,n){var r,i,o,s=n("+ZMJ"),a=n("knuC"),u=n("RPLV"),c=n("ON07"),l=n("7KvD"),f=l.process,h=l.setImmediate,d=l.clearImmediate,p=l.MessageChannel,v=l.Dispatch,y=0,m={},_=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},g=function(e){_.call(e.data)};h&&d||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++y]=function(){a("function"==typeof e?e:Function(e),t)},r(y),y},d=function(e){delete m[e]},"process"==n("R9M2")(f)?r=function(e){f.nextTick(s(_,e,1))}:v&&v.now?r=function(e){v.now(s(_,e,1))}:p?(o=(i=new p).port2,i.port1.onmessage=g,r=s(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",g,!1)):r="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),_.call(e)}}:function(e){setTimeout(s(_,e,1),0)}),e.exports={set:h,clear:d}},LIJb:function(e,t,n){var r=n("EqjI");e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},LKZe:function(e,t,n){var r=n("NpIQ"),i=n("X8DO"),o=n("TcQ7"),s=n("MmMw"),a=n("D2L2"),u=n("SfB7"),c=Object.getOwnPropertyDescriptor;t.f=n("+E39")?c:function(e,t){if(e=o(e),t=s(t,!0),u)try{return c(e,t)}catch(e){}if(a(e,t))return i(!r.f.call(e,t),e[t])}},"M+VK":function(e,t,n){"use strict";var r=u(n("Xxa5")),i=u(n("Dd8w")),o=u(n("Zrlr")),s=u(n("wxAW")),a=u(n("//Fk"));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e,t,n,r){return new(n||(n=a.default))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var l=n("zHwk"),f=n("bAzZ"),h=n("XeUa"),d=n("WuwA"),p=f.Logger.scope(""),v=function(){function e(t,n){(0,o.default)(this,e),this.config=t,this.transport=n}return(0,s.default)(e,[{key:"backoffConfig",value:function(){return(0,i.default)(h.Configuration.backoffConfigDefault,this.config.backoffConfigOverride)}},{key:"retryWhenThrottled",value:function(){return"undefined"!=typeof this.config.retryWhenThrottledOverride?this.config.retryWhenThrottledOverride:"undefined"!=typeof h.Configuration.retryWhenThrottledDefault&&h.Configuration.retryWhenThrottledDefault}},{key:"executeWithRetry",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new a.default(function(r,i){var o=[502,503,504];n&&o.push(429);var s=new l.default(t.backoffConfig());s.on("attempt",function(){e().then(function(e){return s.succeeded(e)}).catch(function(e){o.indexOf(e.status)>-1?s.failed(e):"Twilsock disconnected"===e.message?s.failed(e):(s.removeAllListeners(),s.cancel(),i(e))})}),s.on("succeeded",function(e){r(e)}),s.on("cancelled",function(e){return i(e)}),s.on("failed",function(e){return i(e)}),s.start()})}},{key:"get",value:function(e){return c(this,void 0,void 0,r.default.mark(function t(){var n,i,o=this;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return p.trace("sending GET request to ",e," headers ",n={"X-Twilio-Token":this.config.token}),t.next=4,this.executeWithRetry(function(){return o.transport.get(e,n)},this.retryWhenThrottled());case 4:return p.trace("response",i=t.sent),t.abrupt("return",i);case 7:case"end":return t.stop()}},t,this)}))}},{key:"post",value:function(e,t,n){return c(this,void 0,void 0,r.default.mark(function o(){var s,a;return r.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return s={"X-Twilio-Token":this.config.token},t instanceof d||!n||(0,i.default)(s,{"Content-Type":n}),a=void 0,p.trace("sending POST request to ",e," headers ",s),r.prev=4,r.next=7,this.transport.post(e,s,t);case 7:a=r.sent,r.next=17;break;case 10:if(r.prev=10,r.t0=r.catch(4),!(r.t0 instanceof TypeError)){r.next=16;break}throw new TypeError("Posting FormData supported only with browser engine's FormData");case 16:throw r.t0;case 17:return p.trace("response",a),r.abrupt("return",a);case 19:case"end":return r.stop()}},o,this,[[4,10]])}))}}]),e}();t.Network=v},M3Pe:function(e,t){e.exports={_args:[["twilio-mcs-client@0.0.4","/Users/martin/Workspaces/ngry-chat"]],_from:"twilio-mcs-client@0.0.4",_id:"twilio-mcs-client@0.0.4",_inBundle:!1,_integrity:"sha512-4NWzSInfENIP48G58gyN13E5XlqItX8hU93yVsMX+FrIvcpUS3A4snXko6NvIt1ZTMhG+sXrt6OF3Mx555tTPw==",_location:"/twilio-mcs-client",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"twilio-mcs-client@0.0.4",name:"twilio-mcs-client",escapedName:"twilio-mcs-client",rawSpec:"0.0.4",saveSpec:null,fetchSpec:"0.0.4"},_requiredBy:["/twilio-chat"],_resolved:"https://registry.npmjs.org/twilio-mcs-client/-/twilio-mcs-client-0.0.4.tgz",_spec:"0.0.4",_where:"/Users/martin/Workspaces/ngry-chat",author:{name:"Twilio"},browser:"browser/index.js",dependencies:{"body-parser":"^1.18.2",dotenv:"^4.0.0","isomorphic-form-data":"^1.0.0",loglevel:"^1.5.0","operation-retrier":"^1.3.2",pug:"^2.0.0-rc.4","twilio-transport":"^0.1.4"},description:"Twilio Media Content Service client library",devDependencies:{"@types/chai":"^3.5.2","@types/chai-as-promised":"0.0.31","@types/chai-datetime":"0.0.30","@types/chai-string":"^1.1.30","@types/core-js":"^0.9.42","@types/form-data":"0.0.33","@types/mocha":"^2.2.43","@types/node":"^7.0.18","@types/sinon":"^2.3.5","@types/sinon-chai":"^2.7.27",async:"^2.5.0","async-test-tools":"^1.0.7","babel-eslint":"^7.2.3","babel-plugin-add-module-exports":"^0.2.1","babel-plugin-istanbul":"^4.1.5","babel-plugin-transform-async-to-generator":"^6.24.1","babel-plugin-transform-object-assign":"^6.22.0","babel-plugin-transform-runtime":"^6.23.0","babel-preset-es2015":"^6.24.1","babel-require":"^1.0.1","babel-runtime":"^6.23.0",babelify:"^7.3.0",browserify:"^14.3.0",chai:"^3.5.0","chai-as-promised":"^6.0.0","chai-datetime":"^1.5.0","chai-string":"^1.3.0",cheerio:"^0.22.0",del:"^3.0.0",express:"^4.16.1",gulp:"^3.9.1","gulp-babel":"^6.1.2","gulp-derequire":"^2.1.0","gulp-insert":"^0.5.0","gulp-mocha":"^4.3.1","gulp-rename":"^1.2.2","gulp-tap":"^1.0.1","gulp-tslint":"^8.0.0","gulp-typescript":"^3.2.1","gulp-uglify":"^3.0.0","gulp-util":"^3.0.8",gulpclass:"^0.1.2","ink-docstrap":"^1.3.0",jsdoc:"^3.5.3","jsdoc-strip-async-await":"^0.1.0",karma:"^1.7.0","karma-babel-preprocessor":"^6.0.1","karma-browserify":"^5.1.1","karma-browserstack-launcher":"^1.3.0","karma-chrome-launcher":"^2.2.0","karma-env-preprocessor":"^0.1.1","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.3","karma-sinon-chai":"^1.3.1","karma-sinon-ie":"^2.0.0","karma-typescript":"^3.0.7","loglevel-message-prefix":"^2.0.1",nyc:"^11.2.1",proxyquire:"^1.8.0",sinon:"^2.3.8","sinon-chai":"^2.14.0",t:"^0.5.1","ts-node":"^3.2.0",tslint:"^5.5.0",twilio:"^3.7.0",typescript:"^2.5.3","uglify-save-license":"^0.4.1","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0",watchify:"^3.9.0"},engines:{node:">=6"},license:"MIT",main:"lib/index.js",name:"twilio-mcs-client",scripts:{start:"node app.js"},types:"./lib/client.d.ts",version:"0.0.4"}},M6a0:function(e,t){},MAlW:function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0;return n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]}},MU5D:function(e,t,n){var r=n("R9M2");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},MczR:function(e,t,n){"use strict";var r=a(n("Xxa5")),i=a(n("Zrlr")),o=a(n("wxAW")),s=a(n("//Fk"));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(e,t,n,r){return new(n||(n=s.default))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var c=n("dYWg"),l=n("+DgU"),f=n("pLhp"),h=function(){function e(t,n,r){(0,i.default)(this,e),this.client=t,this.services=n,this.url=r}return(0,o.default)(e,[{key:"getChannels",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u(this,void 0,void 0,r.default.mark(function t(){var n,i,o=this;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=new c.UriBuilder(this.url).arg("PageToken",e.pageToken).build(),t.next=3,this.services.network.get(n);case 3:return t.abrupt("return",new l.RestPaginator((i=t.sent).body.channels.map(function(e){return new f.ChannelDescriptor(o.client,e)}),function(e){return o.getChannels({pageToken:e})},i.body.meta.previous_token,i.body.meta.next_token));case 5:case"end":return t.stop()}},t,this)}))}},{key:"getChannelBySid",value:function(e){return u(this,void 0,void 0,r.default.mark(function t(){var n;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=new c.UriBuilder(this.url).path(e).build(),t.next=3,this.services.network.get(n);case 3:return t.abrupt("return",new f.ChannelDescriptor(this.client,t.sent.body));case 5:case"end":return t.stop()}},t,this)}))}},{key:"getChannelByUniqueName",value:function(e){return u(this,void 0,void 0,r.default.mark(function t(){var n;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=new c.UriBuilder(this.url).path(e).build(),t.next=3,this.services.network.get(n);case 3:return t.abrupt("return",new f.ChannelDescriptor(this.client,t.sent.body));case 5:case"end":return t.stop()}},t,this)}))}}]),e}();t.PublicChannels=h},MeuS:function(e,t,n){"use strict";var r=a(n("Xxa5")),i=a(n("Zrlr")),o=a(n("wxAW")),s=a(n("//Fk"));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(e,t,n,r){return new(n||(n=s.default))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(t,n,r,o){(0,i.default)(this,e),this.prevToken=r,this.nextToken=o,this.items=t,this.source=n}return(0,o.default)(e,[{key:"nextPage",value:function(){return u(this,void 0,void 0,r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasNextPage){e.next=2;break}throw new Error("No next page");case 2:return e.abrupt("return",this.source(this.nextToken));case 3:case"end":return e.stop()}},e,this)}))}},{key:"prevPage",value:function(){return u(this,void 0,void 0,r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasPrevPage){e.next=2;break}throw new Error("No previous page");case 2:return e.abrupt("return",this.source(this.prevToken));case 3:case"end":return e.stop()}},e,this)}))}},{key:"hasNextPage",get:function(){return!!this.nextToken}},{key:"hasPrevPage",get:function(){return!!this.prevToken}}]),e}();t.Paginator=c,t.default=c},Mhyx:function(e,t,n){var r=n("/bQp"),i=n("dSzd")("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},MmMw:function(e,t,n){var r=n("EqjI");e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},N4j0:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return e&&"number"==typeof e.length}},"NWt+":function(e,t,n){var r=n("+ZMJ"),i=n("msXi"),o=n("Mhyx"),s=n("77Pl"),a=n("QRG4"),u=n("3fs2"),c={},l={};(t=e.exports=function(e,t,n,f,h){var d,p,v,y,m=h?function(){return e}:u(e),_=r(n,f,t?2:1),g=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(o(m)){for(d=a(e.length);d>g;g++)if((y=t?_(s(p=e[g])[0],p[1]):_(e[g]))===c||y===l)return y}else for(v=m.call(e);!(p=v.next()).done;)if((y=i(v,_,p.value,t))===c||y===l)return y}).BREAK=c,t.RETURN=l},NpIQ:function(e,t){t.f={}.propertyIsEnumerable},O4R0:function(e,t,n){n("+MLA"),e.exports=n("FeBl").Object.freeze},O4g8:function(e,t){e.exports=!0},OLPf:function(e,t,n){e.exports=n("nErT")},OMJi:function(e,t,n){(function(e,r){var i=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(a(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,s=String(e).replace(i,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),u=r[n];n<o;u=r[++n])v(u)||!b(u)?s+=" "+u:s+=" "+a(u);return s},t.deprecate=function(n,i){if(_(e.process))return function(){return t.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),o=!0}return n.apply(this,arguments)}};var o,s={};function a(e,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&t._extend(r,n),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,e,r.depth)}function u(e,t){var n=a.styles[t];return n?"\x1b["+a.colors[n][0]+"m"+e+"\x1b["+a.colors[n][1]+"m":e}function c(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&x(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return m(i)||(i=l(e,i,r)),i}var o=function(e,t){if(_(t))return e.stylize("undefined","undefined");if(m(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):p(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}(e,n);if(o)return o;var s,a=Object.keys(n),u=(s={},a.forEach(function(e,t){s[e]=!0}),s);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),k(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(n);if(0===a.length){if(x(n))return e.stylize("[Function"+(n.name?": "+n.name:"")+"]","special");if(g(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return e.stylize(Date.prototype.toString.call(n),"date");if(k(n))return f(n)}var c,b="",C=!1,E=["{","}"];return d(n)&&(C=!0,E=["[","]"]),x(n)&&(b=" [Function"+(n.name?": "+n.name:"")+"]"),g(n)&&(b=" "+RegExp.prototype.toString.call(n)),w(n)&&(b=" "+Date.prototype.toUTCString.call(n)),k(n)&&(b=" "+f(n)),0!==a.length||C&&0!=n.length?r<0?g(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),c=C?function(e,t,n,r,i){for(var o=[],s=0,a=t.length;s<a;++s)T(t,String(s))?o.push(h(e,t,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,n,r,i,!0))}),o}(e,n,r,u,a):a.map(function(t){return h(e,n,r,u,t,C)}),e.seen.pop(),function(e,t,n){return e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(c,b,E)):E[0]+b+E[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=e.stylize(u.set?"[Getter/Setter]":"[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),T(r,i)||(s="["+i+"]"),a||(e.seen.indexOf(u.value)<0?(a=v(n)?l(e,u.value,null):l(e,u.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),_(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function d(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function v(e){return null===e}function y(e){return"number"==typeof e}function m(e){return"string"==typeof e}function _(e){return void 0===e}function g(e){return b(e)&&"[object RegExp]"===C(e)}function b(e){return"object"==typeof e&&null!==e}function w(e){return b(e)&&"[object Date]"===C(e)}function k(e){return b(e)&&("[object Error]"===C(e)||e instanceof Error)}function x(e){return"function"==typeof e}function C(e){return Object.prototype.toString.call(e)}function E(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(_(o)&&(o=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!s[e])if(new RegExp("\\b"+e+"\\b","i").test(o)){var n=r.pid;s[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else s[e]=function(){};return s[e]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=p,t.isNull=v,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=m,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=_,t.isRegExp=g,t.isObject=b,t.isDate=w,t.isError=k,t.isFunction=x,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e},t.isBuffer=n("fC4T");var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(n=[E((e=new Date).getHours()),E(e.getMinutes()),E(e.getSeconds())].join(":"),[e.getDate(),S[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n("ONRY"),t._extend=function(e,t){if(!t||!b(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,n("DuR2"),n("W2nU"))},ON07:function(e,t,n){var r=n("EqjI"),i=n("7KvD").document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},ONRY:function(e,t){e.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},OVmG:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("TToO"),i=n("/iUD"),o=n("VwZZ"),s=n("t7NR"),a=n("tLDX"),u=function(e){function t(n,r,i){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.a;break;case 1:if(!n){this.destination=s.a;break}if("object"==typeof n){n instanceof t?(this.syncErrorThrowable=n.syncErrorThrowable,this.destination=n,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,n,r,i)}}return Object(r.__extends)(t,e),t.prototype[a.a]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},t}(o.a),c=function(e){function t(t,n,r,o){var a;e.call(this),this._parentSubscriber=t;var u=this;Object(i.a)(n)?a=n:n&&(a=n.next,r=n.error,o=n.complete,n!==s.a&&(u=Object.create(n),Object(i.a)(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=a,this._error=r,this._complete=o}return Object(r.__extends)(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,n){try{t.call(this._context,n)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(u)},OYls:function(e,t,n){n("crlp")("asyncIterator")},OksQ:function(e,t,n){"use strict";var r=a(n("Xxa5")),i=a(n("Zrlr")),o=a(n("wxAW")),s=a(n("//Fk"));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(e,t,n,r){return new(n||(n=s.default))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var c=n("bAzZ"),l=n("XeUa"),f=n("x9iu");t.Media=f.Media,t.McsMedia=f.Media;var h=n("Wl86"),d=n("M+VK"),p=c.Logger.scope(""),v=n("M3Pe").version,y="A valid Twilio token should be provided",m=function(){function e(t,n,r){if((0,i.default)(this,e),this.options=r||{},this.options.logLevel=this.options.logLevel||"error",this.config=new l.Configuration(t,n,this.options),!t)throw new Error(y);p.setLevel(this.options.logLevel),this.options.transport=this.options.transport||new h.Transport(null,this.options),this.transport=this.options.transport,this.network=new d.Network(this.config,this.transport)}return(0,o.default)(e,[{key:"updateToken",value:function(e){if(p.info("updateToken"),!e)throw new Error(y);this.config.updateToken(e)}},{key:"get",value:function(e){return u(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.network.get(this.config.baseUrl+"/"+e);case 2:return t.abrupt("return",new f.Media(this.config,this.network,t.sent.body));case 4:case"end":return t.stop()}},t,this)}))}},{key:"post",value:function(e,t){return u(this,void 0,void 0,r.default.mark(function n(){return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.network.post(this.config.baseUrl,t,e);case 2:return n.abrupt("return",new f.Media(this.config,this.network,n.sent.body));case 4:case"end":return n.stop()}},n,this)}))}},{key:"postFormData",value:function(e){return u(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.network.post(this.config.baseUrl,e);case 2:return t.abrupt("return",new f.Media(this.config,this.network,t.sent.body));case 4:case"end":return t.stop()}},t,this)}))}}]),e}();m.version=v,t.Client=m,t.McsClient=m,t.default=m},OvRC:function(e,t,n){e.exports={default:n("oM7Q"),__esModule:!0}},P35s:function(e,t,n){"use strict";var r=s(n("Zrlr")),i=s(n("wxAW")),o=s(n("c/Tr"));function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("BvyM");function u(e,t){return[e].concat((0,o.default)(t))}var c=function(){function e(){(0,r.default)(this,e),this.prefix=""}return(0,i.default)(e,[{key:"setLevel",value:function(e){a.setLevel(e)}},{key:"trace",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.trace.apply(null,u("Chat T:"+this.prefix,t))}},{key:"debug",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.debug.apply(null,u("Chat D:"+this.prefix,t))}},{key:"info",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.info.apply(null,u("Chat I:"+this.prefix,t))}},{key:"warn",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.warn.apply(null,u("Chat W:"+this.prefix,t))}},{key:"error",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.error.apply(null,u("Chat E:"+this.prefix,t))}}],[{key:"scope",value:function(t){return new e}},{key:"setLevel",value:function(e){a.setLevel(e)}},{key:"trace",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.trace.apply(null,u("Chat T:",t))}},{key:"debug",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.debug.apply(null,u("Chat D:",t))}},{key:"info",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.info.apply(null,u("Chat I:",t))}},{key:"warn",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.warn.apply(null,u("Chat W:",t))}},{key:"error",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.error.apply(null,u("Chat E:",t))}}]),e}();t.Logger=c},PIsA:function(e,t,n){"use strict";var r=n("AMGY"),i=n("N4j0"),o=n("cQXm"),s=n("dgOU"),a=n("YaPU"),u=n("etqZ"),c=n("TToO"),l=function(e){function t(t,n,r){e.call(this),this.parent=t,this.outerValue=n,this.outerIndex=r,this.index=0}return Object(c.__extends)(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(n("OVmG").a),f=n("+CnV");t.a=function(e,t,n,c){var h=new l(e,n,c);if(h.closed)return null;if(t instanceof a.a)return t._isScalar?(h.next(t.value),h.complete(),null):(h.syncErrorThrowable=!0,t.subscribe(h));if(Object(i.a)(t)){for(var d=0,p=t.length;d<p&&!h.closed;d++)h.next(t[d]);h.closed||h.complete()}else{if(Object(o.a)(t))return t.then(function(e){h.closed||(h.next(e),h.complete())},function(e){return h.error(e)}).then(null,function(e){r.a.setTimeout(function(){throw e})}),h;if(t&&"function"==typeof t[u.a])for(var v=t[u.a]();;){var y=v.next();if(y.done){h.complete();break}if(h.next(y.value),h.closed)break}else if(t&&"function"==typeof t[f.a]){var m=t[f.a]();if("function"==typeof m.subscribe)return m.subscribe(new l(e,n,c));h.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var _=Object(s.a)(t)?"an invalid object":"'"+t+"'";h.error(new TypeError("You provided "+_+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))}}return null}},PcMi:function(e,t,n){"use strict";var r=f(n("Xxa5")),i=f(n("ifoU")),o=f(n("Zx67")),s=f(n("Zrlr")),a=f(n("wxAW")),u=f(n("zwoO")),c=f(n("Pf15")),l=f(n("//Fk"));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e,t,n,r){return new(n||(n=l.default))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var d=n("vzCy"),p=n("6c6t"),v=n("HhJp"),y=function(e){function t(e){(0,s.default)(this,t);var n=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return n.services=e,n.fifoStack=[],n.fifoStackMaxLength=100,n.myself=new p.User(null,null,n.services),n.myself.on("updated",function(){return n.emit("userUpdated",n.myself)}),n.myself.on("userSubscribed",function(){return n.emit("userSubscribed",n.myself)}),n.myself.on("userUnsubscribed",function(){n.emit("userUnsubscribed",n.myself),n.myself._ensureFetched()}),n.services=e,n.subscribedUsers=new i.default,n.userDescriptorsPromise=n.services.session.getSessionLinks().then(function(e){return n.userDescriptors=new v.UserDescriptors({users:n,network:n.services.network},e.usersUrl),n.userDescriptors}),n.services.session.getMaxUserInfosToSubscribe().then(function(e){n.fifoStackMaxLength=e}),n.services.session.getUsersData().then(function(e){return n.myself.identity=e.identity,n.myself.entityName=e.user,n.myself._ensureFetched()}),n}return(0,c.default)(t,d.EventEmitter),(0,a.default)(t,[{key:"handleUnsubscribeUser",value:function(e){this.subscribedUsers.has(e.identity)&&this.subscribedUsers.delete(e.identity);var t=-1;this.fifoStack.find(function(n,r){return n==e.identity&&(t=r,!0)})&&this.fifoStack.splice(t,1),this.emit("userUnsubscribed",e)}},{key:"handleSubscribeUser",value:function(e){this.subscribedUsers.has(e.identity)||(this.fifoStack.length>=this.fifoStackMaxLength&&this.subscribedUsers.get(this.fifoStack.shift()).unsubscribe(),this.fifoStack.push(e.identity),this.subscribedUsers.set(e.identity,e),this.emit("userSubscribed",e))}},{key:"getUser",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return h(this,void 0,void 0,r.default.mark(function n(){var i,o=this;return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.services.session.getUsersData();case 2:return n.next=4,this.myself._ensureFetched();case 4:if(e!=this.myself.identity){n.next=6;break}return n.abrupt("return",this.myself);case 6:if(i=this.subscribedUsers.get(e)){n.next=19;break}if(t){n.next=13;break}return n.next=11,this.getUserDescriptor(e);case 11:t=n.sent._getDescriptor().sync_unique_name;case 13:return(i=new p.User(e,t,this.services)).on("updated",function(){return o.emit("userUpdated",i)}),i.on("userSubscribed",function(){return o.handleSubscribeUser(i)}),i.on("userUnsubscribed",function(){return o.handleUnsubscribeUser(i)}),n.next=19,i._ensureFetched();case 19:return n.abrupt("return",i);case 20:case"end":return n.stop()}},n,this)}))}},{key:"getUserDescriptor",value:function(e){return h(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userDescriptorsPromise;case 2:return t.abrupt("return",this.userDescriptors.getUserDescriptor(e));case 3:case"end":return t.stop()}},t,this)}))}},{key:"getChannelUserDescriptors",value:function(e){return h(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userDescriptorsPromise;case 2:return t.abrupt("return",this.userDescriptors.getChannelUserDescriptors(e));case 3:case"end":return t.stop()}},t,this)}))}},{key:"getSubscribedUsers",value:function(){return h(this,void 0,void 0,r.default.mark(function e(){var t;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.getUsersData();case 2:return e.next=4,this.myself._ensureFetched();case 4:return t=[this.myself],this.subscribedUsers.forEach(function(e){return t.push(e)}),e.abrupt("return",t);case 7:case"end":return e.stop()}},e,this)}))}}]),t}();t.Users=y},Pf15:function(e,t,n){"use strict";t.__esModule=!0;var r=s(n("kiBT")),i=s(n("OvRC")),o=s(n("pFYg"));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":(0,o.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},PzxK:function(e,t,n){var r=n("D2L2"),i=n("sB3e"),o=n("ax3d")("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},QRG4:function(e,t,n){var r=n("UuGF"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},"QWe/":function(e,t,n){n("crlp")("observable")},Qnch:function(e,t,n){"use strict";t.a=function(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return"number"==typeof t&&(n=t,t=null),r.lift(new s(e,t,n))}};var r=n("TToO"),i=n("PIsA"),o=n("tZ2B"),s=function(){function e(e,t,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.project=e,this.resultSelector=t,this.concurrent=n}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.project,this.resultSelector,this.concurrent))},e}(),a=function(e){function t(t,n,r,i){void 0===i&&(i=Number.POSITIVE_INFINITY),e.call(this,t),this.project=n,this.resultSelector=r,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return Object(r.__extends)(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){this.add(Object(i.a)(this,e,t,n))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){this.resultSelector?this._notifyResultSelector(e,t,n,r):this.destination.next(t)},t.prototype._notifyResultSelector=function(e,t,n,r){var i;try{i=this.resultSelector(e,t,n,r)}catch(e){return void this.destination.error(e)}this.destination.next(i)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(o.a)},R4wc:function(e,t,n){var r=n("kM2E");r(r.S+r.F,"Object",{assign:n("To3L")})},R9M2:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},RPLV:function(e,t,n){var r=n("7KvD").document;e.exports=r&&r.documentElement},"RRo+":function(e,t,n){e.exports={default:n("c45H"),__esModule:!0}},"RY/4":function(e,t,n){var r=n("R9M2"),i=n("dSzd")("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},Rf9G:function(e,t,n){"use strict";t.a=function(){return Object(r.a)()(this)};var r=n("3a3m")},Rrel:function(e,t,n){var r=n("TcQ7"),i=n("n0T6").f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return s.slice()}}(e):i(r(e))}},RxiC:function(e,t,n){"use strict";var r=l(n("Xxa5")),i=l(n("Zx67")),o=l(n("Zrlr")),s=l(n("wxAW")),a=l(n("zwoO")),u=l(n("Pf15")),c=l(n("//Fk"));function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e,t,n,r){return new(n||(n=c.default))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var h=n("xIvG"),d=n("urP9"),p=function(e){function t(e,n,r){(0,o.default)(this,t);var s=(0,a.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r));return s.descriptor=n,s}return(0,u.default)(t,h.SyncEntity),(0,s.default)(t,[{key:"publishMessage",value:function(e){return f(this,void 0,void 0,r.default.mark(function t(){var n,i;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={data:e},t.next=3,this.services.network.post(this.links.messages,n);case 3:return i=this._handleMessagePublished(t.sent.body.sid,e,!1),t.abrupt("return",i);case 7:case"end":return t.stop()}},t,this)}))}},{key:"setTtl",value:function(e){return f(this,void 0,void 0,r.default.mark(function t(){var n;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d.validateMandatoryTtl(e),t.prev=1,n={ttl:e},t.next=5,this.services.network.post(this.uri,n);case 5:this.descriptor.date_expires=t.sent.body.date_expires,t.next=13;break;case 9:throw t.prev=9,t.t0=t.catch(1),404===t.t0.status&&this.onRemoved(!1),t.t0;case 13:case"end":return t.stop()}},t,this,[[1,9]])}))}},{key:"removeStream",value:function(){return f(this,void 0,void 0,r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.network.delete(this.uri);case 2:this.onRemoved(!0);case 3:case"end":return e.stop()}},e,this)}))}},{key:"_update",value:function(e){switch(e.type){case"stream_message_published":this._handleMessagePublished(e.message_sid,e.message_data,!0);break;case"stream_removed":this.onRemoved(!1)}}},{key:"_handleMessagePublished",value:function(e,t,n){var r={sid:e,value:t};return this.emit("messagePublished",{message:r,isLocal:!n}),r}},{key:"onRemoved",value:function(e){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.emit("removed",{isLocal:e})}},{key:"uri",get:function(){return this.descriptor.url}},{key:"links",get:function(){return this.descriptor.links}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"type",get:function(){return"stream"}},{key:"lastEventId",get:function(){return null}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}}],[{key:"type",get:function(){return"stream"}}]),t}();t.SyncStream=p,t.default=p},"S1/o":function(e,t,n){t.UINT32=n("2Ie7"),t.UINT64=n("V218")},S82l:function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},SLbG:function(e,t,n){"use strict";(function(r){Object.defineProperty(t,"__esModule",{value:!0});var i=k(n("u2KI")),o=k(n("//Fk")),s=k(n("d7EF")),a=k(n("BO1k")),u=k(n("ifoU")),c=k(n("HSQo")),l=k(n("Zx67")),f=k(n("Zrlr")),h=k(n("wxAW")),d=k(n("zwoO")),p=k(n("Pf15")),v=k(n("mvHQ")),y=k(n("pFYg")),m=k(n("vzCy")),_=k(n("XVn5")),g=k(n("DlMc")),b=k(n("e21k")),w=k(n("ZNPb"));function k(e){return e&&e.__esModule?e:{default:e}}var x=r.WebSocket||r.MozWebSocket||n(1);function C(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}).length}function E(e){var t=Array.prototype.map.call(e,function(e){return String.fromCharCode(e)}).join("").replace(/(.)/g,function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n});return decodeURIComponent(t)}function S(e){var t=E(e);try{return JSON.parse(t)}catch(e){throw _.default.error("failed to parse input: ",t),e}}var T=function(e){function t(e){(0,f.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,l.default)(t)).call(this));e.logLevel&&_.default.setLevel(e.logLevel);var r=b.default.exponential({randomisationFactor:.2,initialDelay:2e3,maxDelay:12e4});return r.on("ready",function(){n._retry()}),n.on("reply",function(e){n._processReply(e)}),(0,c.default)(n,{_config:{value:e},_transportReady:{value:!1,writable:!0},_disconnectedPromiseResolve:{value:null,writable:!0},_backoffDefault:{value:r},_backoff:{value:r,writable:!0},_fsm:{value:null,writable:!0},_watchTimer:{value:null,writable:!0},_timestamp:{value:0,writable:!0},_socket:{value:null,writable:!0},_activeToken:{value:null,writable:!0},activeToken:{enumerable:!0,get:function(){return n._activeToken}},state:{enumberable:!0,get:function(){return n._getState()}},isConnected:{enumberable:!0,get:function(){return n._isConnected()}},_activeRequests:{value:new u.default},_disconnectingTimer:{value:null,writable:!0},_isDeferredUpdate:{value:!1,writable:!0}}),n._fsm=w.default.create({initial:"disconnected",events:[{name:"userConnect",from:["disconnected","rejected"],to:"connecting"},{name:"userConnect",from:["connecting","connected"]},{name:"userDisconnect",from:["connecting","initialising","connected","updating","retrying","rejected","waitSocketClosed","waitOffloadSocketClosed"],to:"disconnecting"},{name:"userRetry",from:["retrying"],to:"connecting"},{name:"socketConnected",from:["connecting"],to:"initialising"},{name:"socketClosed",from:["connecting","initialising","connected","updating","error","waitOffloadSocketClosed"],to:"retrying"},{name:"socketClosed",from:["disconnecting"],to:"disconnected"},{name:"socketClosed",from:["waitSocketClosed"],to:"disconnected"},{name:"socketClosed",from:["rejected"],to:"rejected"},{name:"initSuccess",from:["initialising"],to:"connected"},{name:"initError",from:["initialising"],to:"error"},{name:"tokenRejected",from:["initialising","updating"],to:"rejected"},{name:"protocolError",from:["initialising","connected","updating"],to:"error"},{name:"receiveClose",from:["initialising","connected","updating"],to:"waitSocketClosed"},{name:"receiveOffload",from:["initialising","connected","updating"],to:"waitOffloadSocketClosed"},{name:"unsupportedProtocol",from:["initialising","connected","updating"],to:"unsupported"},{name:"receiveFatalClose",from:["initialising","connected","updating"],to:"unsupported"},{name:"userUpdateToken",from:["disconnected","rejected","connecting","retrying"],to:"connecting"},{name:"userUpdateToken",from:["connected"],to:"updating"},{name:"updateSuccess",from:["updating"],to:"connected"},{name:"updateError",from:["updating"],to:"error"}],callbacks:{onconnecting:function(){n._startWatchdogTimer(),n._setupSocket(),n.emit("connecting")},onenterinitialising:function(){n._sendInit()},onleaveinitialising:function(){n._cancelInit()},onenterupdating:function(){n._sendUpdate()},onleaveupdating:function(){n._cancelUpdate()},onenterretrying:function(){n._initRetry(),n.emit("connecting")},onenterconnected:function(){n._resetBackoff(),n._onConnected()},onuserUpdateToken:function(){n._resetBackoff()},ontokenRejected:function(){n._resetBackoff(),n._closeSocket(),n._finalizeSocket()},onuserDisconnect:function(){n._closeSocket()},onenterdisconnecting:function(){n._startDisconnectTimer()},onleavedisconnecting:function(){n._cancelDisconnectTimer()},onenterwaitSocketClosed:function(){n._startDisconnectTimer()},onleavewaitSocketClosed:function(){n._cancelDisconnectTimer()},onenterwaitOffloadSocketClosed:function(){n._startDisconnectTimer()},onleavewaitOffloadSocketClosed:function(){n._cancelDisconnectTimer()},ondisconnected:function(){n._resetBackoff(),n._finalizeSocket()},onreceiveClose:function(e,t,r,i){_.default.debug("onreceiveClose: ",i),n._onCloseReceived(i)},onreceiveOffload:function(e,t,r,i){_.default.debug("onreceiveoffload: ",i),n._modifyBackoff(i.body),n._onCloseReceived(i.status)},onunsupported:function(){n._closeSocket(),n._finalizeSocket()},onerror:function(){n._closeSocket(),n._finalizeSocket()},onenterstate:function(e,t,r){n._changeState(e,t,r)}},error:function(){_.default.warn("FSM: unexpected transition",arguments)}}),n}return(0,p.default)(t,m.default),(0,h.default)(t,[{key:"_changeState",value:function(e,t,n){var r=this;_.default.debug("FSM: ",e,": ",t,">>",n),this.emit("stateChanged",this.state),this._isDeferredUpdate&&(this._isDeferredUpdate=!1,setTimeout(function(){r.updateToken()},0))}},{key:"_resetBackoff",value:function(){_.default.trace("_resetBackoff"),this._backoff=this._backoffDefault,this._backoff.reset()}},{key:"_modifyBackoff",value:function(e){var t=this;_.default.trace("_modifyBackoff",e);var n=e?e.backoff_policy:null;if(n){var r=n.reconnect_min_ms||2e3,i=n.reconnect_max_ms||12e4;_.default.debug("new backoff policy",r,i),this._backoff=b.default.exponential({randomisationFactor:.2,initialDelay:r,maxDelay:i}),this._backoff.on("ready",function(){t._retry()})}}},{key:"_startDisconnectTimer",value:function(){var e=this;_.default.trace("_startDisconnectTimer"),this._disconnectingTimer&&(clearTimeout(this._disconnectingTimer),this._disconnectingTimer=null),this._disconnectingTimer=setTimeout(function(){_.default.debug("disconnecting is timed out"),e._closeSocket()},3e3)}},{key:"_cancelDisconnectTimer",value:function(){_.default.trace("_cancelDisconnectTimer"),this._disconnectingTimer&&(clearTimeout(this._disconnectingTimer),this._disconnectingTimer=null)}},{key:"_processReply",value:function(e){_.default.debug("receive reply:",e);var t=this._activeRequests.get(e.id);if(t)switch(clearTimeout(t.timeout),this._activeRequests.delete(e.id),t.reqType){case"init":e.status.code>=200&&e.status.code<300?this._fsm.initSuccess(e.body):401===e.status.code||403===e.status.code?this._fsm.tokenRejected(e.status):429===e.status.code?(this._modifyBackoff(e.body),this._fsm.initError(e.status)):this._fsm.initError(e.status);break;case"update":e.status.code>=200&&e.status.code<300?this._fsm.updateSuccess(e.body):401===e.status.code||403===e.status.code?this._fsm.tokenRejected(e.status):429===e.status.code?(this._modifyBackoff(e.body),this._fsm.updateError(e.status)):this._fsm.updateError(e.status);break;default:_.default.error("unexpected reply")}}},{key:"_storeRequest",value:function(e,t,n){var r=this;_.default.trace("_storeRequest");var i={reqType:t,timeout:setTimeout(function(){_.default.debug("request",t,": ",e,"is timed out"),"init"!==t&&"update"!==t&&_.default.error("unknown request type",t),r._closeSocket()},n)};this._activeRequests.set(e,i)}},{key:"_isConnected",value:function(){return this.state===t.state.CONNECTED&&this._socket&&1===this._socket.readyState}},{key:"_getState",value:function(){if(!this._fsm)return t.state.DISCONNECTED;switch(this._fsm.current){case"connecting":case"initialising":case"retrying":case"error":return t.state.CONNECTING;case"updating":case"connected":return t.state.CONNECTED;case"rejected":return t.state.REJECTED;case"disconnecting":case"waitSocketClosed":case"waitOffloadSocketClosed":return t.state.DISCONNECTING;case"disconnected":default:return t.state.DISCONNECTED}}},{key:"_initRetry",value:function(){_.default.trace("_initRetry"),this._backoff.backoff()}},{key:"_retry",value:function(){_.default.trace("_retry"),this._socket=null,this._activeToken=null,this._fsm.userRetry()}},{key:"_onConnected",value:function(){this.emit("connected")}},{key:"_finalizeSocket",value:function(){if(_.default.trace("_finalizeSocket"),this._stopWatchdogTimer(),this._onDisconnected(),this._disconnectedPromiseResolve){var e=this._disconnectedPromiseResolve;this._disconnectedPromiseResolve=null,e()}}},{key:"_onDisconnected",value:function(){this._socket=null,this._activeToken=null,this.emit("disconnected")}},{key:"_setupSocket",value:function(){_.default.trace("_setupSocket:",this._config.token);var e=this,t=this._config.twilsockUri;_.default.debug("try to connect to:",t);var n=new x(t);n.binaryType="arraybuffer",n.onopen=function(){_.default.info("socket opened"),e._fsm.socketConnected()},n.onclose=function(t){_.default.info("socket closed",t),e._fsm.socketClosed()},n.onerror=function(e){_.default.error("error: ",e)},n.onmessage=function(t){_.default.trace("data: ",t.data);var n=new Uint8Array(t.data),r=function(e){for(var t="",n=0;n<e.length;++n){var r=String.fromCharCode(e[n]);if(t+=r,"\r"===r){n+=2;break}}var i=t.split(" ");return{size:n,protocol:i[0],version:i[1],headerSize:Number(i[2])}}(n);if("TWILSOCK"!==r.protocol||"V3.0"!==r.version)return _.default.error("unsupported protocol: "+r.protocol+" ver "+r.version),void e._fsm.unsupportedProtocol();var i=null;try{i=S(n.subarray(r.size,r.size+r.headerSize))}catch(n){return _.default.error("failed to parse message header",n,t),void e._fsm.protocolError()}_.default.trace("message received: ",i);var o=null;if(i.payload_size>0){var s=2+r.size+r.headerSize,a=i.payload_size;if(i.hasOwnProperty("payload_type")&&0!==i.payload_type.indexOf("application/json"))0===i.payload_type.indexOf("text/plain")&&(o=E(n.subarray(s,s+a)));else try{o=S(n.subarray(s,s+a))}catch(n){return _.default.error("failed to parse message body",n,t),void e._fsm.protocolError()}}e._updateActivityTimestamp(),"notification"===i.method?(e._confirmReceiving(i),e.emit("message",i.message_type,o)):"reply"===i.method?e.emit("reply",{id:i.id,status:i.status,header:i,body:o}):"ping"===i.method?e._confirmReceiving(i):"close"===i.method&&(_.default.trace("connection close initated by server"),e._confirmReceiving(i),308===i.status.code?(_.default.info("connection has been offloaded"),e._fsm.receiveOffload({status:i.status.status,body:o})):406===i.status.code?(_.default.error("connection has been rejected because server can not parse protocol"),e._fsm.receiveFatalClose()):417===i.status.code?(_.default.info("connection has been rejected because server could not understand client`s reply"),e._fsm.receiveFatalClose(i.status.status)):410===i.status.code?(_.default.info("connection has expired"),e._fsm.receiveClose(i.status.status)):401===i.status.code?(_.default.info("connection is not authenticate"),e._fsm.receiveClose(i.status.status)):(_.default.error("unexpected close: ",i.status),e._fsm.receiveOffload({status:i.status.status,body:null})))},this._activeToken=this._config.token,this._socket=n}},{key:"_sendInit",value:function(){_.default.trace("_sendInit");var e={id:g.default.v4(),method:"init",token:this._activeToken};this._sendPacket(e),this._storeRequest(e.id,"init",5e3)}},{key:"_sendUpdate",value:function(){_.default.trace("_sendUpdate");var e={id:g.default.v4(),method:"update",token:this._activeToken};this._sendPacket(e),this._storeRequest(e.id,"update",5e3)}},{key:"_cancelInit",value:function(){_.default.trace("_cancelInit");var e=!0,t=!1,n=void 0;try{for(var r,i=(0,a.default)(this._activeRequests);!(e=(r=i.next()).done);e=!0){var o=(0,s.default)(r.value,2),u=o[0],c=o[1];c&&"init"===c.reqType&&(clearTimeout(c.timeout),this._activeRequests.delete(u))}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}},{key:"_cancelUpdate",value:function(){_.default.trace("_cancelUpdate");var e=!0,t=!1,n=void 0;try{for(var r,i=(0,a.default)(this._activeRequests);!(e=(r=i.next()).done);e=!0){var o=(0,s.default)(r.value,2),u=o[0],c=o[1];c&&"update"===c.reqType&&(clearTimeout(c.timeout),this._activeRequests.delete(u))}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}},{key:"_confirmReceiving",value:function(e){_.default.trace("_confirmReceiving");var t={method:"reply",id:e.id,payload_type:"application/json",status:{code:200,status:"OK"}};try{this._sendPacket(t)}catch(e){_.default.debug("failed to confirm packet receiving",e)}}},{key:"_sendPacket",value:function(e,t){var n=function(e){switch("undefined"==typeof e?"undefined":(0,y.default)(e)){case"undefined":return"";case"object":return(0,v.default)(e);default:return e}}(t);e.payload_size=C(n);var r=(0,v.default)(e)+"\r\n",i="TWILSOCK V3.0 "+(C(r)-2)+"\r\n";_.default.debug("send request:",i+r+n);var o,s,a=(o=encodeURIComponent(i+r+n).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}),s=new Uint8Array(o.length),Array.prototype.forEach.call(o,function(e,t){s[t]=e.charCodeAt(0)}),s);try{this._socket.send(a.buffer)}catch(t){throw _.default.info("failed to send ",e,t),_.default.info(t.stack),t}}},{key:"_closeSocket",value:function(){_.default.trace("_closeSocket"),this._socket&&(this._socket.onopen=null,this._socket.onclose=null,this._socket.onerror=null,this._socket.onmessage=null,this._socket.close()),this._fsm.socketClosed()}},{key:"connect",value:function(){_.default.trace("connect"),this._fsm.userConnect()}},{key:"reconnect",value:function(){_.default.trace("reconnect"),this._resetBackoff(),this._fsm.userRetry()}},{key:"isRetrying",value:function(){return"retrying"===this._fsm.current}},{key:"disconnect",value:function(){var e=this;return _.default.trace("disconnect"),this._fsm.is("disconnected")?o.default.resolve():new o.default(function(t){e._disconnectedPromiseResolve=t,e._fsm.userDisconnect()})}},{key:"updateToken",value:function(){if(_.default.trace("updateToken:",this._config.token),"initialising"===this._fsm.current||"updating"===this._fsm.current||"waitSocketClosed"===this._fsm.current||"waitOffloadSocketClosed"===this._fsm.current)return _.default.debug("defer updateToken because of",this._fsm.current,"is in progress"),void(this._isDeferredUpdate=!0);this._isDeferredUpdate=!1,this._activeToken=this._config.token,this._fsm.userUpdateToken()}},{key:"sendUpstreamMessage",value:function(e,t,n){var r=g.default.v4(),i={host:e.host,path:e.path,method:e.method};e.hasOwnProperty("params")&&(i.params=e.params);var o={method:"message",id:r,http_request:i};return t&&(o.http_request.headers=t),t&&t.hasOwnProperty("Content-Type")&&(o.payload_type=t["Content-Type"]),this._sendPacket(o,n),r}},{key:"send",value:function(e,t){return e.id=e.id||g.default.v4(),this._sendPacket(e,t),e.id}},{key:"_onCloseReceived",value:function(e){_.default.trace("_onCloseReceived"),_.default.info("connection closed by server, reason is",e),this._socket&&(this._socket.onopen=null,this._socket.onerror=null,this._socket.onmessage=null)}},{key:"_startWatchdogTimer",value:function(){var e=this;_.default.trace("_startWatchdogTimer"),this._timestamp=Date.now(),this._watchTimer=setInterval(function(){Date.now()-e._timestamp>43e3&&e._socket&&e._socket.close()},5e3)}},{key:"_stopWatchdogTimer",value:function(){_.default.trace("_stopWatchdogTimer"),clearInterval(this._watchTimer)}},{key:"_updateActivityTimestamp",value:function(){_.default.trace("_updateActivityTimestamp"),this._timestamp=Date.now()}}]),t}();t.default=T,T.state={DISCONNECTED:"disconnected",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTING:"disconnecting",ERROR:"error",REJECTED:"rejected"},(0,i.default)(T.state),(0,i.default)(T),e.exports=t.default}).call(t,n("DuR2"))},SZqs:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n("wcmj"))&&r.__esModule?r:{default:r};t.default=i.default,e.exports=t.default},SfB7:function(e,t,n){e.exports=!n("+E39")&&!n("S82l")(function(){return 7!=Object.defineProperty(n("ON07")("div"),"a",{get:function(){return 7}}).a})},SldL:function(e,t){!function(t){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",c="object"==typeof e,l=t.regeneratorRuntime;if(l)c&&(e.exports=l);else{(l=t.regeneratorRuntime=c?e.exports:{}).wrap=b;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={},y={};y[s]=function(){return this};var m=Object.getPrototypeOf,_=m&&m(m(I([])));_&&_!==r&&i.call(_,s)&&(y=_);var g=C.prototype=k.prototype=Object.create(y);x.prototype=g.constructor=C,C.constructor=x,C[u]=x.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(g),e},l.awrap=function(e){return{__await:e}},E(S.prototype),S.prototype[a]=function(){return this},l.AsyncIterator=S,l.async=function(e,t,n,r){var i=new S(b(e,t,n,r));return l.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},E(g),g[u]="Generator",g[s]=function(){return this},g.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=I,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return a.type="throw",a.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var u=i.call(s,"catchLoc"),c=i.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:I(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),v}}}function b(e,t,n,r){var i=Object.create((t&&t.prototype instanceof k?t:k).prototype),o=new A(r||[]);return i._invoke=function(e,t,n){var r=f;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return M()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=T(s,n);if(a){if(a===v)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=w(e,t,n);if("normal"===u.type){if(r=n.done?p:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,o),i}function w(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function k(){}function x(){}function C(){}function E(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function S(e){var t;this._invoke=function(n,r){function o(){return new Promise(function(t,o){!function t(n,r,o,s){var a=w(e[n],e,r);if("throw"!==a.type){var u=a.arg,c=u.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,o,s)},function(e){t("throw",e,o,s)}):Promise.resolve(c).then(function(e){u.value=e,o(u)},s)}s(a.arg)}(n,r,t,o)})}return t=t?t.then(o,o):o()}}function T(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,T(e,t),"throw"===t.method))return v;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=w(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,v;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,v):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function I(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:M}}function M(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},SomJ:function(e,t,n){"use strict";var r,i=(r=n("Zrlr"))&&r.__esModule?r:{default:r};Object.defineProperty(t,"__esModule",{value:!0});var o=function e(){(0,i.default)(this,e)};o.TYPING_INDICATOR="twilio.ipmsg.typing_indicator",o.NEW_MESSAGE="twilio.channel.new_message",o.ADDED_TO_CHANNEL="twilio.channel.added_to_channel",o.INVITED_TO_CHANNEL="twilio.channel.invited_to_channel",o.REMOVED_FROM_CHANNEL="twilio.channel.removed_from_channel",o.CONSUMPTION_UPDATE="twilio.channel.consumption_update",t.NotificationTypes=o},TILf:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("TToO"),i=function(e){function t(t,n){e.call(this),this.value=t,this.scheduler=n,this._isScalar=!0,n&&(this._isScalar=!1)}return Object(r.__extends)(t,e),t.create=function(e,n){return new t(e,n)},t.dispatch=function(e){var t=e.value,n=e.subscriber;e.done?n.complete():(n.next(t),n.closed||(e.done=!0,this.schedule(e)))},t.prototype._subscribe=function(e){var n=this.value,r=this.scheduler;if(r)return r.schedule(t.dispatch,0,{done:!1,value:n,subscriber:e});e.next(n),e.closed||e.complete()},t}(n("YaPU").a)},TToO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.__extends=function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n.d(t,"__assign",function(){return i}),t.__rest=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n},t.__decorate=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},t.__param=function(e,t){return function(n,r){t(n,r,e)}},t.__metadata=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},t.__awaiter=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})},t.__generator=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},t.__exportStar=function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])},t.__values=o,t.__read=s,t.__spread=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e},t.__await=a,t.__asyncGenerator=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise(function(n,r){o.push([e,t,n,r])>1||u(e,t)})})}function u(e,t){try{(n=i[e](t)).value instanceof a?Promise.resolve(n.value.v).then(c,l):f(o[0][2],n)}catch(e){f(o[0][3],e)}var n}function c(e){u("next",e)}function l(e){u("throw",e)}function f(e,t){e(t),o.shift(),o.length&&u(o[0][0],o[0][1])}},t.__asyncDelegator=function(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){e[r]&&(t[r]=function(t){return(n=!n)?{value:a(e[r](t)),done:"return"===r}:i?i(t):t})}},t.__asyncValues=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):"function"==typeof o?o(e):e[Symbol.iterator]()},t.__makeTemplateObject=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},t.__importStar=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},t.__importDefault=function(e){return e&&e.__esModule?e:{default:e}};var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};function o(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function a(e){return this instanceof a?(this.v=e,this):new a(e)}},TcQ7:function(e,t,n){var r=n("MU5D"),i=n("52gC");e.exports=function(e){return r(i(e))}},To3L:function(e,t,n){"use strict";var r=n("lktj"),i=n("1kS7"),o=n("NpIQ"),s=n("sB3e"),a=n("MU5D"),u=Object.assign;e.exports=!u||n("S82l")(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r})?function(e,t){for(var n=s(e),u=arguments.length,c=1,l=i.f,f=o.f;u>c;)for(var h,d=a(arguments[c++]),p=l?r(d).concat(l(d)):r(d),v=p.length,y=0;v>y;)f.call(d,h=p[y++])&&(n[h]=d[h]);return n}:u},U5ju:function(e,t,n){n("M6a0"),n("zQR9"),n("+tPU"),n("CXw9"),n("EqBC"),n("jKW+"),e.exports=n("FeBl").Promise},UuGF:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},UvrK:function(e,t,n){var r=n("kM2E");r(r.P+r.R,"Map",{toJSON:n("m9gC")("Map")})},V218:function(e,t,n){var r;!function(n){var i={16:s(Math.pow(16,5)),10:s(Math.pow(10,5)),2:s(Math.pow(2,5))},o={16:s(16),10:s(10),2:s(2)};function s(e,t,n,r){return this instanceof s?(this.remainder=null,"string"==typeof e?c.call(this,e,t):"undefined"==typeof t?u.call(this,e):void a.apply(this,arguments)):new s(e,t,n,r)}function a(e,t,n,r){return"undefined"==typeof n?(this._a00=65535&e,this._a16=e>>>16,this._a32=65535&t,this._a48=t>>>16,this):(this._a00=0|e,this._a16=0|t,this._a32=0|n,this._a48=0|r,this)}function u(e){return this._a00=65535&e,this._a16=e>>>16,this._a32=0,this._a48=0,this}function c(e,t){t=t||10,this._a00=0,this._a16=0,this._a32=0,this._a48=0;for(var n=i[t]||new s(Math.pow(t,5)),r=0,o=e.length;r<o;r+=5){var a=Math.min(5,o-r),u=parseInt(e.slice(r,r+a),t);this.multiply(a<5?new s(Math.pow(t,a)):n).add(new s(u))}return this}s.prototype.fromBits=a,s.prototype.fromNumber=u,s.prototype.fromString=c,s.prototype.toNumber=function(){return 65536*this._a16+this._a00},s.prototype.toString=function(e){var t=o[e=e||10]||new s(e);if(!this.gt(t))return this.toNumber().toString(e);for(var n=this.clone(),r=new Array(64),i=63;i>=0&&(n.div(t),r[i]=n.remainder.toNumber().toString(e),n.gt(t));i--);return r[i-1]=n.toNumber().toString(e),r.join("")},s.prototype.add=function(e){var t=this._a00+e._a00,n=t>>>16,r=(n+=this._a16+e._a16)>>>16,i=(r+=this._a32+e._a32)>>>16;return i+=this._a48+e._a48,this._a00=65535&t,this._a16=65535&n,this._a32=65535&r,this._a48=65535&i,this},s.prototype.subtract=function(e){return this.add(e.clone().negate())},s.prototype.multiply=function(e){var t=this._a00,n=this._a16,r=this._a32,i=e._a00,o=e._a16,s=e._a32,a=t*i,u=a>>>16,c=(u+=t*o)>>>16;u&=65535,c+=(u+=n*i)>>>16;var l=(c+=t*s)>>>16;return c&=65535,l+=(c+=n*o)>>>16,c&=65535,l+=(c+=r*i)>>>16,l+=t*e._a48,l&=65535,l+=n*s,l&=65535,l+=r*o,l&=65535,l+=this._a48*i,this._a00=65535&a,this._a16=65535&u,this._a32=65535&c,this._a48=65535&l,this},s.prototype.div=function(e){if(0==e._a16&&0==e._a32&&0==e._a48){if(0==e._a00)throw Error("division by zero");if(1==e._a00)return this.remainder=new s(0),this}if(e.gt(this))return this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0,this;if(this.eq(e))return this.remainder=new s(0),this._a00=1,this._a16=0,this._a32=0,this._a48=0,this;for(var t=e.clone(),n=-1;!this.lt(t);)t.shiftLeft(1,!0),n++;for(this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0;n>=0;n--)t.shiftRight(1),this.remainder.lt(t)||(this.remainder.subtract(t),n>=48?this._a48|=1<<n-48:n>=32?this._a32|=1<<n-32:n>=16?this._a16|=1<<n-16:this._a00|=1<<n);return this},s.prototype.negate=function(){var e=1+(65535&~this._a00);return this._a00=65535&e,this._a16=65535&(e=(65535&~this._a16)+(e>>>16)),this._a32=65535&(e=(65535&~this._a32)+(e>>>16)),this._a48=~this._a48+(e>>>16)&65535,this},s.prototype.equals=s.prototype.eq=function(e){return this._a48==e._a48&&this._a00==e._a00&&this._a32==e._a32&&this._a16==e._a16},s.prototype.greaterThan=s.prototype.gt=function(e){return this._a48>e._a48||!(this._a48<e._a48)&&(this._a32>e._a32||!(this._a32<e._a32)&&(this._a16>e._a16||!(this._a16<e._a16)&&this._a00>e._a00))},s.prototype.lessThan=s.prototype.lt=function(e){return this._a48<e._a48||!(this._a48>e._a48)&&(this._a32<e._a32||!(this._a32>e._a32)&&(this._a16<e._a16||!(this._a16>e._a16)&&this._a00<e._a00))},s.prototype.or=function(e){return this._a00|=e._a00,this._a16|=e._a16,this._a32|=e._a32,this._a48|=e._a48,this},s.prototype.and=function(e){return this._a00&=e._a00,this._a16&=e._a16,this._a32&=e._a32,this._a48&=e._a48,this},s.prototype.xor=function(e){return this._a00^=e._a00,this._a16^=e._a16,this._a32^=e._a32,this._a48^=e._a48,this},s.prototype.not=function(){return this._a00=65535&~this._a00,this._a16=65535&~this._a16,this._a32=65535&~this._a32,this._a48=65535&~this._a48,this},s.prototype.shiftRight=s.prototype.shiftr=function(e){return(e%=64)>=48?(this._a00=this._a48>>e-48,this._a16=0,this._a32=0,this._a48=0):e>=32?(this._a00=65535&(this._a32>>(e-=32)|this._a48<<16-e),this._a16=this._a48>>e&65535,this._a32=0,this._a48=0):e>=16?(this._a00=65535&(this._a16>>(e-=16)|this._a32<<16-e),this._a16=65535&(this._a32>>e|this._a48<<16-e),this._a32=this._a48>>e&65535,this._a48=0):(this._a00=65535&(this._a00>>e|this._a16<<16-e),this._a16=65535&(this._a16>>e|this._a32<<16-e),this._a32=65535&(this._a32>>e|this._a48<<16-e),this._a48=this._a48>>e&65535),this},s.prototype.shiftLeft=s.prototype.shiftl=function(e,t){return(e%=64)>=48?(this._a48=this._a00<<e-48,this._a32=0,this._a16=0,this._a00=0):e>=32?(this._a48=this._a16<<(e-=32)|this._a00>>16-e,this._a32=this._a00<<e&65535,this._a16=0,this._a00=0):e>=16?(this._a48=this._a32<<(e-=16)|this._a16>>16-e,this._a32=65535&(this._a16<<e|this._a00>>16-e),this._a16=this._a00<<e&65535,this._a00=0):(this._a48=this._a48<<e|this._a32>>16-e,this._a32=65535&(this._a32<<e|this._a16>>16-e),this._a16=65535&(this._a16<<e|this._a00>>16-e),this._a00=this._a00<<e&65535),t||(this._a48&=65535),this},s.prototype.rotateLeft=s.prototype.rotl=function(e){if(0==(e%=64))return this;if(e>=32){var t=this._a00;if(this._a00=this._a32,this._a32=t,t=this._a48,this._a48=this._a16,this._a16=t,32==e)return this;e-=32}var n=this._a48<<16|this._a32,r=this._a16<<16|this._a00,i=n<<e|r>>>32-e,o=r<<e|n>>>32-e;return this._a00=65535&o,this._a16=o>>>16,this._a32=65535&i,this._a48=i>>>16,this},s.prototype.rotateRight=s.prototype.rotr=function(e){if(0==(e%=64))return this;if(e>=32){var t=this._a00;if(this._a00=this._a32,this._a32=t,t=this._a48,this._a48=this._a16,this._a16=t,32==e)return this;e-=32}var n=this._a48<<16|this._a32,r=this._a16<<16|this._a00,i=n>>>e|r<<32-e,o=r>>>e|n<<32-e;return this._a00=65535&o,this._a16=o>>>16,this._a32=65535&i,this._a48=i>>>16,this},s.prototype.clone=function(){return new s(this._a00,this._a16,this._a32,this._a48)},void 0===(r=(function(){return s}).apply(t,[]))||(e.exports=r)}()},V3tA:function(e,t,n){n("R4wc"),e.exports=n("FeBl").Object.assign},VNGy:function(e,t,n){"use strict";var r=f(n("Xxa5")),i=f(n("Dd8w")),o=f(n("Zx67")),s=f(n("wxAW")),a=f(n("zwoO")),u=f(n("Pf15")),c=f(n("Zrlr")),l=f(n("//Fk"));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e,t,n,r){return new(n||(n=l.default))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var d=n("vzCy"),p=n("P35s"),v=n("ZztE"),y=n("6c6t");t.User=y.User;var m=n("MczR"),_=n("9MmW"),g=n("SomJ"),b=n("KKtg"),w=n("r/lS"),k=n("SZqs"),x=n("Wl86"),C=n("dDqI"),E=n("55yF"),S=n("6uYP"),T=n("6dPF"),O=n("fwxS"),P=n("PcMi"),A=n("3BLl"),I=n("x+Ry"),M=n("oQSX"),R=n("b7W+");t.PushNotification=R.PushNotification;var j=n("dYWg"),N=p.Logger.scope(""),D=n("bxzj").version,F="A valid Twilio token should be provided",U=function e(){(0,c.default)(this,e)},L=function(e){function t(e,n){(0,c.default)(this,t);var r=(0,a.default)(this,(t.__proto__||(0,o.default)(t)).call(this));if(r.connectionState="connecting",r.sessionPromise=null,r.channelsPromise=null,r.version=D,r.parsePushNotification=t.parsePushNotification,r.options=n||{},r.options.logLevel=r.options.logLevel||"error",r.options.productId="ip_messaging",r.options.Sync=r.options.Sync||{},r.options.Sync.enableSessionStorage||(r.options.Sync.enableSessionStorage=!1),!e)throw new Error(F);return N.setLevel(r.options.logLevel),r.services=new U,r.config=new v.Configuration(null,r.options),r.options.twilsockClient=r.options.twilsockClient||new w(e,r.options),r.options.transport=r.options.transport||new x.Transport(r.options.twilsockClient,r.options),r.options.emsClient=r.options.emsClient||new E.EmsClient(r.options),r.options.notificationsClient=r.options.notificationsClient||new k(e,r.options),r.options.syncClient=r.options.syncClient||new C.SyncClient(e,r.options),r.services.emsClient=r.options.emsClient,r.services.syncClient=r.options.syncClient,r.services.transport=r.options.transport,r.services.twilsockClient=r.options.twilsockClient,r.services.notificationClient=r.options.notificationsClient,r.services.session=new T.Session(r.services,r.config),r.sessionPromise=r.services.session.initialize(),r.services.network=new _.Network(r.config,r.services),r.services.users=new P.Users({session:r.services.session,network:r.services.network,syncClient:r.services.syncClient}),r.services.users.on("userSubscribed",r.emit.bind(r,"userSubscribed")),r.services.users.on("userUpdated",r.emit.bind(r,"userUpdated")),r.services.users.on("userUnsubscribed",r.emit.bind(r,"userUnsubscribed")),r.services.consumptionHorizon=new I.ConsumptionHorizon(r.services),r.services.typingIndicator=new A.TypingIndicator(r.config,{transport:r.services.transport,notificationClient:r.services.notificationClient},r.getChannelBySid.bind(r)),r.services.syncList=new b.SyncList(r.services),r.channels=new O.Channels(r.services),r.channelsPromise=r.sessionPromise.then(function(){return r.channels.on("channelAdded",r.emit.bind(r,"channelAdded")),r.channels.on("channelRemoved",r.emit.bind(r,"channelRemoved")),r.channels.on("channelInvited",r.emit.bind(r,"channelInvited")),r.channels.on("channelJoined",r.emit.bind(r,"channelJoined")),r.channels.on("channelLeft",r.emit.bind(r,"channelLeft")),r.channels.on("channelUpdated",r.emit.bind(r,"channelUpdated")),r.channels.on("memberJoined",r.emit.bind(r,"memberJoined")),r.channels.on("memberLeft",r.emit.bind(r,"memberLeft")),r.channels.on("memberUpdated",r.emit.bind(r,"memberUpdated")),r.channels.on("messageAdded",r.emit.bind(r,"messageAdded")),r.channels.on("messageUpdated",r.emit.bind(r,"messageUpdated")),r.channels.on("messageRemoved",r.emit.bind(r,"messageRemoved")),r.channels.on("typingStarted",r.emit.bind(r,"typingStarted")),r.channels.on("typingEnded",r.emit.bind(r,"typingEnded")),r.channels.fetchChannels()}).then(function(){return r.channels}),r.services.notificationClient.on("connectionStateChanged",function(e){var t=null;switch(e){case"connected":t="connected";break;case"rejected":case"denied":t="denied";break;case"disconnecting":t="disconnecting";break;case"disconnected":t="disconnected";break;default:t="connecting"}t!==r.connectionState&&(r.connectionState=t,r.emit("connectionStateChanged",r.connectionState))}),r.fpaToken=e,r}return(0,u.default)(t,d.EventEmitter),(0,s.default)(t,[{key:"subscribeToPushNotifications",value:function(e){var t=this;[g.NotificationTypes.NEW_MESSAGE,g.NotificationTypes.ADDED_TO_CHANNEL,g.NotificationTypes.INVITED_TO_CHANNEL,g.NotificationTypes.REMOVED_FROM_CHANNEL,g.NotificationTypes.TYPING_INDICATOR,g.NotificationTypes.CONSUMPTION_UPDATE].forEach(function(n){t.services.notificationClient.subscribe(n,e)})}},{key:"initialize",value:function(){return h(this,void 0,void 0,r.default.mark(function e(){var n,o,s=this;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.emsClient.setToken(this.fpaToken);case 2:return this.config.updateToken(e.sent.token),e.next=6,this.sessionPromise;case 6:return t.supportedPushChannels.forEach(function(e){return s.subscribeToPushNotifications(e)}),e.next=9,this.services.session.getSessionLinks();case 9:return this.services.publicChannels=new m.PublicChannels(this,this.services,(n=e.sent).publicChannelsUrl),this.services.userChannels=new M.UserChannels(this,this.services,n.myChannelsUrl),(o=(0,i.default)(this.options)).transport=null,this.services.mcsClient=new S.McsClient(this.config.token,n.mediaServiceUrl,o),e.next=17,this.services.typingIndicator.initialize();case 17:case"end":return e.stop()}},e,this)}))}},{key:"shutdown",value:function(){return h(this,void 0,void 0,r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.twilsockClient.disconnect();case 2:case"end":return e.stop()}},e,this)}))}},{key:"updateToken",value:function(e){return h(this,void 0,void 0,r.default.mark(function t(){var n=this;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(N.info("updateToken"),e){t.next=3;break}throw new Error(F);case 3:if(e!==this.fpaToken){t.next=5;break}return t.abrupt("return",this);case 5:return t.abrupt("return",this.services.emsClient.setToken(e).then(function(e){if("NEW"===e.status)throw N.error("Can't extend token:",e.reason),new Error("Can't extend token:"+e.reason);return e.token}).then(function(t){return n.services.twilsockClient.updateToken(e).then(function(){return n.services.syncClient.updateToken(e)}).then(function(){return n.services.notificationClient.updateToken(e)}).then(function(){return n.services.mcsClient.updateToken(e)}).then(function(){return n.sessionPromise}).then(function(){return t})}).then(function(t){return n.config.updateToken(t),n.fpaToken=e,n}));case 6:case"end":return t.stop()}},t,this)}))}},{key:"getChannelBySid",value:function(e){return h(this,void 0,void 0,r.default.mark(function t(){var n=this;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&"string"==typeof e){t.next=2;break}throw new Error("Client.getChannelBySid requires a <String>channelSid parameter");case 2:return t.abrupt("return",this.channels.syncListRead.promise.then(function(){return n.channels.getChannel(e).then(function(t){return t||n.services.publicChannels.getChannelBySid(e).then(function(e){return n.channels.pushChannel(e)})})}));case 3:case"end":return t.stop()}},t,this)}))}},{key:"getChannelByUniqueName",value:function(e){return h(this,void 0,void 0,r.default.mark(function t(){var n=this;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&"string"==typeof e){t.next=2;break}throw new Error("Client.getChannelByUniqueName requires a <String>uniqueName parameter");case 2:return t.abrupt("return",this.channels.syncListRead.promise.then(function(){return n.services.publicChannels.getChannelByUniqueName(e).then(function(e){return n.channels.pushChannel(e)})}));case 3:case"end":return t.stop()}},t,this)}))}},{key:"getSubscribedChannels",value:function(e){return this.channelsPromise.then(function(t){return t.getChannels(e)})}},{key:"getPublicChannelDescriptors",value:function(){return this.services.publicChannels.getChannels()}},{key:"getUserChannelDescriptors",value:function(){return this.services.userChannels.getChannels()}},{key:"createChannel",value:function(e){return e=e||{},this.channelsPromise.then(function(t){return t.addChannel(e)})}},{key:"setPushRegistrationId",value:function(e,n){if(-1===t.supportedPushChannels.indexOf(e))throw new Error("Invalid or unsupported channelType: "+e);this.services.notificationClient.setPushRegistrationId(n,e)}},{key:"handlePushNotification",value:function(e){return h(this,void 0,void 0,r.default.mark(function n(){return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:N.debug("handlePushNotification, notificationPayload=",e),this.emit("pushNotification",t.parsePushNotification(e));case 2:case"end":return n.stop()}},n,this)}))}},{key:"getUser",value:function(e){return this.services.users.getUser(e)}},{key:"getUserDescriptor",value:function(e){return h(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.services.users.getUserDescriptor(e));case 1:case"end":return t.stop()}},t,this)}))}},{key:"getSubscribedUsers",value:function(){return h(this,void 0,void 0,r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.services.users.getSubscribedUsers());case 1:case"end":return e.stop()}},e,this)}))}},{key:"user",get:function(){return this.services.users.myself}},{key:"reachabilityEnabled",get:function(){return this.services.session.reachabilityEnabled}},{key:"token",get:function(){return this.config.token}}],[{key:"create",value:function(e,n){return h(this,void 0,void 0,r.default.mark(function i(){var o;return r.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=new t(e,n),r.next=3,o.initialize();case 3:return r.abrupt("return",o);case 4:case"end":return r.stop()}},i,this)}))}},{key:"parsePushNotificationChatData",value:function(e){var n={};for(var r in t.supportedPushDataFields)"undefined"!=typeof e[r]&&null!==e[r]&&("message_index"===r?null!==j.parseToNumber(e[r])&&(n[t.supportedPushDataFields[r]]=Number(e[r])):n[t.supportedPushDataFields[r]]=e[r]);return n}},{key:"parsePushNotification",value:function(e){if(N.debug("parsePushNotification, notificationPayload=",e),"undefined"==typeof e||null===e)throw new Error("Push notification payload should be provided");if("undefined"!=typeof e.aps){var n=null,r=null,i={};if("undefined"!=typeof e.data&&(i=t.parsePushNotificationChatData(e.data)),!e.type)throw new Error("Provided push notification payload does not contain Programmable Chat push notification type");var o=e.aps;return"string"==typeof o.alert?n=o.alert||null:(n=o.alert.body||null,r=o.alert.title||null),new R.PushNotification({title:r,body:n,sound:o.sound||null,badge:o.badge||null,action:o.category||null,type:e.type,data:i})}if("undefined"!=typeof e.data){var s=e.data;if(s.twi_message_type){var a=t.parsePushNotificationChatData(e.data);return new R.PushNotification({title:s.twi_title||null,body:s.twi_body||null,sound:s.twi_sound||null,badge:null,action:s.twi_action||null,type:s.twi_message_type,data:a})}throw new Error("Provided push notification payload does not contain Programmable Chat push notification type")}throw new Error("Provided push notification payload is not Programmable Chat notification")}}]),t}();L.version=D,L.supportedPushChannels=["fcm","apn","gcm"],L.supportedPushDataFields={channel_sid:"channelSid",message_sid:"messageSid",message_index:"messageIndex"},t.Client=L,t.default=L},VRsY:function(e,t,n){var r=n("OMJi");function i(e){Error.call(this,e),this.message=e}function o(e){Error.call(this,e),this.message=e}r.inherits(i,Error),i.prototype.name="IllegalArgumentError",r.inherits(o,Error),o.prototype.name="IllegalStateError",e.exports.IllegalStateError=o,e.exports.IllegalArgumentError=i},VXCu:function(e,t,n){"use strict";var r=u(n("Xxa5")),i=u(n("BO1k")),o=u(n("Zzip")),s=u(n("Zrlr")),a=u(n("wxAW"));function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(t,n){(0,s.default)(this,e),this.balanceFactor=0,this.key=t,this.value=n,this.parent=null,this.left=null,this.right=null}return(0,a.default)(e,[{key:"update",value:function(e){this.value=e}},{key:"replace",value:function(e,t){e&&(this.left===t?this.left=t:this.right===t&&(this.right=t))}},{key:"isRoot",get:function(){return null===this.parent}},{key:"isLeaf",get:function(){return null===this.left&&null===this.right}},{key:"isLeftChild",get:function(){return this.parent.left===this}}]),e}(),l=function(){function e(t,n){(0,s.default)(this,e),this.isLessThan=t||function(e,t){return e<t},this.isEqual=n||function(e,t){return e===t},this.root=null,this.count=null}return(0,a.default)(e,[{key:"clear",value:function(){this.root=null,this.count=0}},{key:"set",value:function(e,t){var n=this.getNode(e);n?n.update(t):this.insert(e,t)}},{key:"insert",value:function(e,t){var n=new c(e,t);if(this.count++,this.root){for(var r=this.root;;)if(this.isLessThan(e,r.key)){if(!r.left){r.left=n;break}r=r.left}else{if(!r.right){r.right=n;break}r=r.right}for(n.parent=r,r=n;r.parent;){var i=r.parent,o=i.balanceFactor;if(r.isLeftChild?i.balanceFactor++:i.balanceFactor--,Math.abs(i.balanceFactor)<Math.abs(o))break;if(i.balanceFactor<-1||i.balanceFactor>1){this.rebalance(i);break}r=i}}else this.root=n}},{key:"get",value:function(e){for(var t=this.root;t;){if(this.isEqual(e,t.key))return t.value;t=this.isLessThan(e,t.key)?t.left:t.right}return null}},{key:"delete",value:function(e){var t=this.getNode(e);if(!t||t.key!==e)return null;var n=t.parent,r=t.left,i=t.right;if(!!r!=!!i){var o=r||i;n||o?n&&!o?this.root=o:(n.replace(t,null),this.rebalance(n)):this.root=null}else{for(var s=t.left;s.right;)s=s.right;if(t.left===s)t.isRoot?(this.root=s,s.parent=null):(t.isLeftChild?t.parent.left=s:t.parent.right=s,s.parent=t.parent),s.right=t.right,s.right.parent=s,s.balanceFactor=t.balanceFactor,t={parent:s,isLeftChild:!0};else{var a=s.parent,u=s.left;a.right=u,u&&(u.parent=a),t.isRoot?(this.root=s,s.parent=null):(t.isLeftChild?t.parent.left=s:t.parent.right=s,s.parent=t.parent),s.right=t.right,s.right.parent=s,s.left=t.left,s.left.parent=s,s.balanceFactor=t.balanceFactor,t={parent:a,isLeftChild:!1}}}for(this.count--;t.parent;){var c=t.parent,l=c.balanceFactor;if(t.isLeftChild?c.balanceFactor-=1:c.balanceFactor+=1,Math.abs(c.balanceFactor)>Math.abs(l)){if(!(c.balanceFactor<-1||c.balanceFactor>1))break;if(this.rebalance(c),0!==c.parent.balanceFactor)break;t=c.parent}else t=c}return null}},{key:"getNode",value:function(e){for(var t=this.root;t;){if(this.isEqual(e,t.key))return t;t=this.isLessThan(e,t.key)?t.left:t.right}return null}},{key:"rebalance",value:function(e){e.balanceFactor<0?e.right.balanceFactor>0?(this.rotateRight(e.right),this.rotateLeft(e)):this.rotateLeft(e):e.balanceFactor>0&&(e.left.balanceFactor<0?(this.rotateLeft(e.left),this.rotateRight(e)):this.rotateRight(e))}},{key:"rotateLeft",value:function(e){var t=e.right;e.right=t.left,null!==t.left&&(t.left.parent=e),t.parent=e.parent,null===t.parent?this.root=t:e.isLeftChild?t.parent.left=t:t.parent.right=t,t.left=e,e.parent=t,e.balanceFactor=e.balanceFactor+1-Math.min(t.balanceFactor,0),t.balanceFactor=t.balanceFactor+1-Math.max(e.balanceFactor,0)}},{key:"rotateRight",value:function(e){var t=e.left;e.left=t.right,null!==t.right&&(t.right.parent=e),t.parent=e.parent,null===t.parent?this.root=t:e.isLeftChild?t.parent.left=t:t.parent.right=t,t.right=e,e.parent=t,e.balanceFactor=e.balanceFactor-1-Math.min(t.balanceFactor,0),t.balanceFactor=t.balanceFactor-1-Math.max(e.balanceFactor,0)}},{key:o.default,value:r.default.mark(function e(){var t,n,o,s,a,u;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,o=void 0,e.prev=3,s=(0,i.default)(this.getIterator());case 5:if(t=(a=s.next()).done){e.next=12;break}return u=a.value,e.next=9,u;case 9:t=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),n=!0,o=e.t0;case 18:e.prev=18,e.prev=19,!t&&s.return&&s.return();case 21:if(e.prev=21,!n){e.next=24;break}throw o;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}},e,this,[[3,14,18,26],[19,,21,25]])})},{key:"getIterator",value:r.default.mark(function e(){var t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.root;case 1:if(!t){e.next=7;break}if(!this.isEqual(i,t.key)&&(null!==i||t.left)){e.next=4;break}return e.abrupt("break",7);case 4:t=this.isLessThan(i,t.key)||null===i?t.left:t.right,e.next=1;break;case 7:if(t){e.next=9;break}return e.abrupt("return",null);case 9:n=!0;case 10:if(!n){e.next=28;break}return e.next=13,[t.key,t.value];case 13:if(n=!1,!t.right){e.next=20;break}for(t=t.right;t.left;)t=t.left;n=!0,e.next=26;break;case 20:if(!t.parent){e.next=25;break}n=t.parent.left===t,t=t.parent,e.next=26;break;case 25:return e.abrupt("break",36);case 26:e.next=34;break;case 28:if(!t.parent){e.next=33;break}n=t.parent.left===t,t=t.parent,e.next=34;break;case 33:return e.abrupt("break",36);case 34:e.next=10;break;case 36:return e.abrupt("return",null);case 37:case"end":return e.stop()}},e,this)})},{key:"getReverseIterator",value:r.default.mark(function e(){var t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.root;case 1:if(!t){e.next=7;break}if(!this.isEqual(i,t.key)&&(null!==i||t.right)){e.next=4;break}return e.abrupt("break",7);case 4:t=this.isLessThan(i,t.key)&&null!==i?t.left:t.right,e.next=1;break;case 7:if(t){e.next=9;break}return e.abrupt("return",null);case 9:n=!0;case 10:if(!n){e.next=28;break}return e.next=13,[t.key,t.value];case 13:if(n=!1,!t.left){e.next=20;break}for(t=t.left;t.right;)t=t.right;n=!0,e.next=26;break;case 20:if(!t.parent){e.next=25;break}n=t.parent.right===t,t=t.parent,e.next=26;break;case 25:return e.abrupt("break",36);case 26:e.next=34;break;case 28:if(!t.parent){e.next=33;break}n=t.parent.right===t,t=t.parent,e.next=34;break;case 33:return e.abrupt("break",36);case 34:e.next=10;break;case 36:return e.abrupt("return",null);case 37:case"end":return e.stop()}},e,this)})},{key:"size",get:function(){return this.count}}]),e}();t.TreeMap=l},Veqx:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("TToO"),i=n("YaPU"),o=n("TILf"),s=n("+3/4"),a=n("1Q68"),u=function(e){function t(t,n){e.call(this),this.array=t,this.scheduler=n,n||1!==t.length||(this._isScalar=!0,this.value=t[0])}return Object(r.__extends)(t,e),t.create=function(e,n){return new t(e,n)},t.of=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var r=e[e.length-1];Object(a.a)(r)?e.pop():r=null;var i=e.length;return i>1?new t(e,r):1===i?new o.a(e[0],r):new s.a(r)},t.dispatch=function(e){var t=e.array,n=e.index,r=e.subscriber;n>=e.count?r.complete():(r.next(t[n]),r.closed||(e.index=n+1,this.schedule(e)))},t.prototype._subscribe=function(e){var n=this.array,r=n.length,i=this.scheduler;if(i)return i.schedule(t.dispatch,0,{array:n,index:0,count:r,subscriber:e});for(var o=0;o<r&&!e.closed;o++)e.next(n[o]);e.complete()},t}(i.a)},VwZZ:function(e,t,n){"use strict";var r=n("BX3T"),i=n("dgOU"),o=n("/iUD"),s=n("GK6M"),a=n("fKB6"),u=n("TToO"),c=function(e){function t(t){e.call(this),this.errors=t;var n=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return Object(u.__extends)(t,e),t}(Error);n.d(t,"a",function(){return l});var l=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this._parent,u=this._parents,l=this._unsubscribe,h=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var d=-1,p=u?u.length:0;n;)n.remove(this),n=++d<p&&u[d]||null;if(Object(o.a)(l)&&Object(s.a)(l).call(this)===a.a&&(t=!0,e=e||(a.a.e instanceof c?f(a.a.e.errors):[a.a.e])),Object(r.a)(h))for(d=-1,p=h.length;++d<p;){var v=h[d];if(Object(i.a)(v)&&Object(s.a)(v.unsubscribe).call(v)===a.a){t=!0,e=e||[];var y=a.a.e;y instanceof c?e=e.concat(f(y.errors)):e.push(y)}}if(t)throw new c(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this._parent,n=this._parents;t&&t!==e?n?-1===n.indexOf(e)&&n.push(e):this._parents=[e]:this._parent=e},e.EMPTY=((t=new e).closed=!0,t),e}();function f(e){return e.reduce(function(e,t){return e.concat(t instanceof c?t.errors:t)},[])}},W2nU:function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=a(h);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},W81h:function(e,t,n){"use strict";var r=o(n("Zrlr")),i=o(n("wxAW"));function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t){(0,r.default)(this,e),this.descriptor=t}return(0,i.default)(e,[{key:"update",value:function(e,t,n,r){return this.descriptor.last_event_id=e,this.descriptor.revision=t,this.descriptor.data=n,this.descriptor.date_updated=r,this}},{key:"updateDateExpires",value:function(e){this.descriptor.date_expires=e}},{key:"uri",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"key",get:function(){return this.descriptor.key}},{key:"value",get:function(){return this.descriptor.data}},{key:"dateUpdated",get:function(){return this.descriptor.date_updated}}]),e}();t.MapItem=s,t.default=s},WT6e:function(e,t,n){"use strict";(function(e){n.d(t,"e",function(){return Ye}),n.d(t,"I",function(){return He}),n.d(t,"L",function(){return We}),n.d(t,"H",function(){return Ze}),n.d(t,"r",function(){return Ge}),n.d(t,"a",function(){return ie}),n.d(t,"v",function(){return ae}),n.d(t,"u",function(){return ue}),n.d(t,"b",function(){return ne}),n.d(t,"c",function(){return re}),n.d(t,"K",function(){return ft}),n.d(t,"C",function(){return De}),n.d(t,"N",function(){return Ue}),n.d(t,"p",function(){return jt}),n.d(t,"d",function(){return Ut}),n.d(t,"j",function(){return Oe}),n.d(t,"i",function(){return $}),n.d(t,"z",function(){return Vt}),n.d(t,"A",function(){return Lt}),n.d(t,"F",function(){return h}),n.d(t,"D",function(){return d}),n.d(t,"J",function(){return O}),n.d(t,"m",function(){return R}),n.d(t,"l",function(){return c}),n.d(t,"k",function(){return v}),n.d(t,"t",function(){return y}),n.d(t,"s",function(){return Pe}),n.d(t,"w",function(){return tt}),n.d(t,"x",function(){return $e}),n.d(t,"y",function(){return et}),n.d(t,"f",function(){return he}),n.d(t,"g",function(){return be}),n.d(t,"h",function(){return nt}),n.d(t,"q",function(){return xe}),n.d(t,"B",function(){return it}),n.d(t,"E",function(){return ot}),n.d(t,"n",function(){return Ot}),n.d(t,"o",function(){return Pt}),n.d(t,"G",function(){return pt}),n.d(t,"M",function(){return Rt}),n.d(t,"Y",function(){return yt}),n.d(t,"P",function(){return le}),n.d(t,"O",function(){return we}),n.d(t,"W",function(){return w}),n.d(t,"_1",function(){return S}),n.d(t,"_9",function(){return T}),n.d(t,"Z",function(){return te}),n.d(t,"_0",function(){return ee}),n.d(t,"Q",function(){return An}),n.d(t,"R",function(){return Jn}),n.d(t,"S",function(){return Qi}),n.d(t,"T",function(){return rn}),n.d(t,"U",function(){return _r}),n.d(t,"V",function(){return In}),n.d(t,"_2",function(){return Vn}),n.d(t,"_3",function(){return Ln}),n.d(t,"_5",function(){return sr}),n.d(t,"_7",function(){return gr}),n.d(t,"_10",function(){return Lr}),n.d(t,"_11",function(){return qr}),n.d(t,"_4",function(){return Nt}),n.d(t,"_6",function(){return Dt}),n.d(t,"_8",function(){return Ft}),n.d(t,"X",function(){return oe});var r=n("TToO"),i=n("YaPU"),o=n("/nXB"),s=n("Rf9G"),a=n("g5jc"),u=n("VwZZ"),c=function(){function e(e){this._desc=e,this.ngMetadataName="InjectionToken"}return e.prototype.toString=function(){return"InjectionToken "+this._desc},e}(),l="__paramaters__";function f(e,t,n){var r=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e){var r=e.apply(void 0,t);for(var i in r)this[i]=r[i]}}}(t);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this instanceof i)return r.apply(this,e),this;var n,o=new((n=i).bind.apply(n,[void 0].concat(e)));return s.annotation=o,s;function s(e,t,n){for(var r=e.hasOwnProperty(l)?e[l]:Object.defineProperty(e,l,{value:[]})[l];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i}var h=function(){var e={Emulated:0,Native:1,None:2};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e}(),d=function(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")},p=new d("5.2.5"),v=f("Inject",function(e){return{token:e}}),y=f("Optional"),m=f("Self"),_=f("SkipSelf"),g="undefined"!=typeof window&&window,b="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,w=g||"undefined"!=typeof e&&e||b,k=Promise.resolve(0),x=null;function C(){if(!x){var e=w.Symbol;if(e&&e.iterator)x=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(x=r)}}return x}function E(e){"undefined"==typeof Zone?k.then(function(){e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}function S(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function T(e){if("string"==typeof e)return e;if(e instanceof Array)return"["+e.map(T).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function O(e){return e.__forward_ref__=O,e.toString=function(){return T(this())},e}function P(e){return"function"==typeof e&&e.hasOwnProperty("__forward_ref__")&&e.__forward_ref__===O?e():e}var A="__source",I=new Object,M=function(){function e(){}return e.prototype.get=function(e,t){if(void 0===t&&(t=I),t===I)throw new Error("NullInjectorError: No provider for "+T(e)+"!");return t},e}(),R=function(){function e(){}return e.create=function(e,t){return Array.isArray(e)?new z(e,t):new z(e.providers,e.parent,e.name||null)},e.THROW_IF_NOT_FOUND=I,e.NULL=new M,e}(),j=function(e){return e},N=[],D=j,F=function(){return Array.prototype.slice.call(arguments)},U={},L=function(e){for(var t in e)if(e[t]===U)return t;throw Error("!prop")}({provide:String,useValue:U}),V=R.NULL,B=/\n/gm,q="\u0275",z=function(){function e(e,t,n){void 0===t&&(t=V),void 0===n&&(n=null),this.parent=t,this.source=n;var r=this._records=new Map;r.set(R,{token:R,fn:j,deps:N,value:this,useNew:!1}),function e(t,n){if(n)if((n=P(n))instanceof Array)for(var r=0;r<n.length;r++)e(t,n[r]);else{if("function"==typeof n)throw G("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw G("Unexpected provider",n);var i=P(n.provide),o=function(e){var t=function(e){var t=N,n=e.deps;if(n&&n.length){t=[];for(var r=0;r<n.length;r++){var i=6;if((u=P(n[r]))instanceof Array)for(var o=0,s=u;o<s.length;o++){var a=s[o];a instanceof y||a==y?i|=1:a instanceof _||a==_?i&=-3:a instanceof m||a==m?i&=-5:u=a instanceof v?a.token:P(a)}t.push({token:u,options:i})}}else if(e.useExisting){var u;t=[{token:u=P(e.useExisting),options:6}]}else if(!(n||L in e))throw G("'deps' required",e);return t}(e),n=j,r=N,i=!1,o=P(e.provide);if(L in e)r=e.useValue;else if(e.useFactory)n=e.useFactory;else if(e.useExisting);else if(e.useClass)i=!0,n=P(e.useClass);else{if("function"!=typeof o)throw G("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",e);i=!0,n=o}return{deps:t,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){var s=t.get(i);if(s){if(s.fn!==F)throw H(i)}else t.set(i,s={token:n.provide,deps:[],useNew:!1,fn:F,value:N});s.deps.push({token:i=n,options:6})}var a=t.get(i);if(a&&a.fn==F)throw H(i);t.set(i,o)}}(r,e)}return e.prototype.get=function(e,t){var n=this._records.get(e);try{return function e(t,n,r,i,o){try{return function(t,n,r,i,o){var s,a;if(n){if((s=n.value)==D)throw Error(q+"Circular dependency");if(s===N){n.value=D;var u=n.useNew,c=n.fn,l=n.deps,f=N;if(l.length){f=[];for(var h=0;h<l.length;h++){var d=l[h],p=d.options,v=2&p?r.get(d.token):void 0;f.push(e(d.token,v,r,v||4&p?i:V,1&p?null:R.THROW_IF_NOT_FOUND))}}n.value=s=u?new((a=c).bind.apply(a,[void 0].concat(f))):c.apply(void 0,f)}}else s=i.get(t,o);return s}(t,n,r,i,o)}catch(e){throw e instanceof Error||(e=new Error(e)),(e.ngTempTokenPath=e.ngTempTokenPath||[]).unshift(t),n&&n.value==D&&(n.value=N),e}}(e,n,this._records,this.parent,t)}catch(t){var r=t.ngTempTokenPath;throw e[A]&&r.unshift(e[A]),t.message=W("\n"+t.message,r,this.source),t.ngTokenPath=r,t.ngTempTokenPath=null,t}},e.prototype.toString=function(){var e=[];return this._records.forEach(function(t,n){return e.push(T(n))}),"StaticInjector["+e.join(", ")+"]"},e}();function H(e){return G("Cannot mix multi providers and regular providers",e)}function W(e,t,n){void 0===n&&(n=null),e=e&&"\n"===e.charAt(0)&&e.charAt(1)==q?e.substr(2):e;var r=T(t);if(t instanceof Array)r=t.map(T).join(" -> ");else if("object"==typeof t){var i=[];for(var o in t)if(t.hasOwnProperty(o)){var s=t[o];i.push(o+":"+("string"==typeof s?JSON.stringify(s):T(s)))}r="{"+i.join(", ")+"}"}return"StaticInjectorError"+(n?"("+n+")":"")+"["+r+"]: "+e.replace(B,"\n  ")}function G(e,t){return new Error(W(e,t))}var Z="ngDebugContext",Q="ngOriginalError",J="ngErrorLogger";function K(e){return e[Z]}function Y(e){return e[Q]}function X(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e.error.apply(e,t)}var $=function(){function e(){this._console=console}return e.prototype.handleError=function(e){var t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e[J]||X}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)},e.prototype._findContext=function(e){return e?K(e)?K(e):this._findContext(Y(e)):null},e.prototype._findOriginalError=function(e){for(var t=Y(e);t&&Y(t);)t=Y(t);return t},e}();function ee(e){return!!e&&"function"==typeof e.then}function te(e){return!!e&&"function"==typeof e.subscribe}Function;var ne=new c("Application Initializer"),re=function(){function e(e){var t=this;this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return e.prototype.runInitializers=function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();ee(i)&&t.push(i)}Promise.all(t).then(function(){n()}).catch(function(t){e.reject(t)}),0===t.length&&n(),this.initialized=!0}},e}(),ie=new c("AppId");function oe(){return""+se()+se()+se()}function se(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var ae=new c("Platform Initializer"),ue=new c("Platform ID"),ce=new c("appBootstrapListener"),le=function(){function e(){}return e.prototype.log=function(e){console.log(e)},e.prototype.warn=function(e){console.warn(e)},e.ctorParameters=function(){return[]},e}();function fe(){throw new Error("Runtime compiler is not loaded")}var he=function(){function e(){}return e.prototype.compileModuleSync=function(e){throw fe()},e.prototype.compileModuleAsync=function(e){throw fe()},e.prototype.compileModuleAndAllComponentsSync=function(e){throw fe()},e.prototype.compileModuleAndAllComponentsAsync=function(e){throw fe()},e.prototype.clearCache=function(){},e.prototype.clearCacheFor=function(e){},e}(),de=function(){},pe=function(){};function ve(e){var t=Error("No component factory found for "+T(e)+". Did you add it to @NgModule.entryComponents?");return t[_e]=e,t}var ye,me,_e="ngComponent",ge=function(){function e(){}return e.prototype.resolveComponentFactory=function(e){throw ve(e)},e}(),be=function(){function e(){}return e.NULL=new ge,e}(),we=function(){function e(e,t,n){this._parent=t,this._ngModule=n,this._factories=new Map;for(var r=0;r<e.length;r++){var i=e[r];this._factories.set(i.componentType,i)}}return e.prototype.resolveComponentFactory=function(e){var t=this._factories.get(e);if(!t&&this._parent&&(t=this._parent.resolveComponentFactory(e)),!t)throw ve(e);return new ke(t,this._ngModule)},e}(),ke=function(e){function t(t,n){var r=e.call(this)||this;return r.factory=t,r.ngModule=n,r.selector=t.selector,r.componentType=t.componentType,r.ngContentSelectors=t.ngContentSelectors,r.inputs=t.inputs,r.outputs=t.outputs,r}return Object(r.__extends)(t,e),t.prototype.create=function(e,t,n,r){return this.factory.create(e,t,n,r||this.ngModule)},t}(pe),xe=function(){},Ce=function(){var e=w.wtf;return!(!e||!(ye=e.trace)||(me=ye.events,0))}();function Ee(e,t){return null}var Se=Ce?function(e,t){return void 0===t&&(t=null),me.createScope(e,t)}:function(e,t){return Ee},Te=Ce?function(e,t){return ye.leaveScope(e,t),t}:function(e,t){return t},Oe=function(e){function t(t){void 0===t&&(t=!1);var n=e.call(this)||this;return n.__isAsync=t,n}return Object(r.__extends)(t,e),t.prototype.emit=function(t){e.prototype.next.call(this,t)},t.prototype.subscribe=function(t,n,r){var i,o=function(e){return null},s=function(){return null};t&&"object"==typeof t?(i=this.__isAsync?function(e){setTimeout(function(){return t.next(e)})}:function(e){t.next(e)},t.error&&(o=this.__isAsync?function(e){setTimeout(function(){return t.error(e)})}:function(e){t.error(e)}),t.complete&&(s=this.__isAsync?function(){setTimeout(function(){return t.complete()})}:function(){t.complete()})):(i=this.__isAsync?function(e){setTimeout(function(){return t(e)})}:function(e){t(e)},n&&(o=this.__isAsync?function(e){setTimeout(function(){return n(e)})}:function(e){n(e)}),r&&(s=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()}));var a=e.prototype.subscribe.call(this,i,o,s);return t instanceof u.a&&t.add(a),a},t}(a.a),Pe=function(){function e(e){var t,n=e.enableLongStackTrace,r=void 0!==n&&n;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Oe(!1),this.onMicrotaskEmpty=new Oe(!1),this.onStable=new Oe(!1),this.onError=new Oe(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(t=this)._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(e,n,r,i,o,s){try{return Re(t),e.invokeTask(r,i,o,s)}finally{je(t)}},onInvoke:function(e,n,r,i,o,s,a){try{return Re(t),e.invoke(r,i,o,s,a)}finally{je(t)}},onHasTask:function(e,n,r,i){e.hasTask(r,i),n===r&&("microTask"==i.change?(t.hasPendingMicrotasks=i.microTask,Me(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:function(e,n,r,i){return e.handleError(r,i),t.runOutsideAngular(function(){return t.onError.emit(i)}),!1}})}return e.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},e.assertInAngularZone=function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},e.assertNotInAngularZone=function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},e.prototype.run=function(e,t,n){return this._inner.run(e,t,n)},e.prototype.runTask=function(e,t,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,e,Ie,Ae,Ae);try{return i.runTask(o,t,n)}finally{i.cancelTask(o)}},e.prototype.runGuarded=function(e,t,n){return this._inner.runGuarded(e,t,n)},e.prototype.runOutsideAngular=function(e){return this._outer.run(e)},e}();function Ae(){}var Ie={};function Me(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(function(){return e.onStable.emit(null)})}finally{e.isStable=!0}}}function Re(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function je(e){e._nesting--,Me(e)}var Ne=function(){function e(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Oe,this.onMicrotaskEmpty=new Oe,this.onStable=new Oe,this.onError=new Oe}return e.prototype.run=function(e){return e()},e.prototype.runGuarded=function(e){return e()},e.prototype.runOutsideAngular=function(e){return e()},e.prototype.runTask=function(e){return e()},e}(),De=function(){function e(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this._watchAngularEvents()}return e.prototype._watchAngularEvents=function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){e._ngZone.onStable.subscribe({next:function(){Pe.assertNotInAngularZone(),E(function(){e._isZoneStable=!0,e._runCallbacksIfReady()})}})})},e.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},e.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},e.prototype.isStable=function(){return this._isZoneStable&&0==this._pendingCount&&!this._ngZone.hasPendingMacrotasks},e.prototype._runCallbacksIfReady=function(){var e=this;this.isStable()?E(function(){for(;0!==e._callbacks.length;)e._callbacks.pop()(e._didWork);e._didWork=!1}):this._didWork=!0},e.prototype.whenStable=function(e){this._callbacks.push(e),this._runCallbacksIfReady()},e.prototype.getPendingRequestCount=function(){return this._pendingCount},e.prototype.findProviders=function(e,t,n){return[]},e}(),Fe=function(){function e(){this._applications=new Map,Ve.addToWindow(this)}return e.prototype.registerApplication=function(e,t){this._applications.set(e,t)},e.prototype.unregisterApplication=function(e){this._applications.delete(e)},e.prototype.unregisterAllApplications=function(){this._applications.clear()},e.prototype.getTestability=function(e){return this._applications.get(e)||null},e.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},e.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},e.prototype.findTestabilityInTree=function(e,t){return void 0===t&&(t=!0),Ve.findTestabilityInTree(this,e,t)},e.ctorParameters=function(){return[]},e}();function Ue(e){Ve=e}var Le,Ve=new(function(){function e(){}return e.prototype.addToWindow=function(e){},e.prototype.findTestabilityInTree=function(e,t,n){return null},e}()),Be=!0,qe=!1,ze=new c("AllowMultipleToken");function He(){if(qe)throw new Error("Cannot enable prod mode after platform setup.");Be=!1}function We(){return qe=!0,Be}var Ge=function(e,t){this.name=e,this.token=t};function Ze(e,t,n){void 0===n&&(n=[]);var r="Platform: "+t,i=new c(r);return function(t){void 0===t&&(t=[]);var o=Qe();if(!o||o.injector.get(ze,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{var s=n.concat(t).concat({provide:i,useValue:!0});!function(e){if(Le&&!Le.destroyed&&!Le.injector.get(ze,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Le=e.get(Je);var t=e.get(ae,null);t&&t.forEach(function(e){return e()})}(R.create({providers:s,name:r}))}return function(e){var t=Qe();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function Qe(){return Le&&!Le.destroyed?Le:null}var Je=function(){function e(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return e.prototype.bootstrapModuleFactory=function(e,t){var n,r=this,i="noop"===(n=t?t.ngZone:void 0)?new Ne:("zone.js"===n?void 0:n)||new Pe({enableLongStackTrace:We()}),o=[{provide:Pe,useValue:i}];return i.run(function(){var t=R.create({providers:o,parent:r.injector,name:e.moduleType.name}),n=e.create(t),s=n.injector.get($,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy(function(){return Xe(r._modules,n)}),i.runOutsideAngular(function(){return i.onError.subscribe({next:function(e){s.handleError(e)}})}),function(e,t,i){try{var o=((s=n.injector.get(re)).runInitializers(),s.donePromise.then(function(){return r._moduleDoBootstrap(n),n}));return ee(o)?o.catch(function(n){throw t.runOutsideAngular(function(){return e.handleError(n)}),n}):o}catch(n){throw t.runOutsideAngular(function(){return e.handleError(n)}),n}var s}(s,i)})},e.prototype.bootstrapModule=function(e,t){var n=this;void 0===t&&(t=[]);var r=this.injector.get(de),i=Ke({},t);return r.createCompiler([i]).compileModuleAsync(e).then(function(e){return n.bootstrapModuleFactory(e,i)})},e.prototype._moduleDoBootstrap=function(e){var t=e.injector.get(Ye);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(function(e){return t.bootstrap(e)});else{if(!e.instance.ngDoBootstrap)throw new Error("The module "+T(e.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');e.instance.ngDoBootstrap(t)}this._modules.push(e)},e.prototype.onDestroy=function(e){this._destroyListeners.push(e)},Object.defineProperty(e.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(e){return e.destroy()}),this._destroyListeners.forEach(function(e){return e()}),this._destroyed=!0},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),e}();function Ke(e,t){return Array.isArray(t)?t.reduce(Ke,e):Object(r.__assign)({},e,t)}var Ye=function(){function e(e,t,n,r,a,u){var c=this;this._zone=e,this._console=t,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=a,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=We(),this._zone.onMicrotaskEmpty.subscribe({next:function(){c._zone.run(function(){c.tick()})}});var l=new i.a(function(e){c._stable=c._zone.isStable&&!c._zone.hasPendingMacrotasks&&!c._zone.hasPendingMicrotasks,c._zone.runOutsideAngular(function(){e.next(c._stable),e.complete()})}),f=new i.a(function(e){var t;c._zone.runOutsideAngular(function(){t=c._zone.onStable.subscribe(function(){Pe.assertNotInAngularZone(),E(function(){c._stable||c._zone.hasPendingMacrotasks||c._zone.hasPendingMicrotasks||(c._stable=!0,e.next(!0))})})});var n=c._zone.onUnstable.subscribe(function(){Pe.assertInAngularZone(),c._stable&&(c._stable=!1,c._zone.runOutsideAngular(function(){e.next(!1)}))});return function(){t.unsubscribe(),n.unsubscribe()}});this.isStable=Object(o.a)(l,s.a.call(f))}return e.prototype.bootstrap=function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof pe?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var i=n instanceof ke?null:this._injector.get(xe),o=n.create(R.NULL,[],t||n.selector,i);o.onDestroy(function(){r._unloadComponent(o)});var s=o.injector.get(De,null);return s&&o.injector.get(Fe).registerApplication(o.location.nativeElement,s),this._loadComponent(o),We()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o},e.prototype.tick=function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=e._tickScope();try{this._runningTick=!0,this._views.forEach(function(e){return e.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(e){return e.checkNoChanges()})}catch(e){this._zone.runOutsideAngular(function(){return t._exceptionHandler.handleError(e)})}finally{this._runningTick=!1,Te(n)}},e.prototype.attachView=function(e){var t=e;this._views.push(t),t.attachToAppRef(this)},e.prototype.detachView=function(e){var t=e;Xe(this._views,t),t.detachFromAppRef()},e.prototype._loadComponent=function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(ce,[]).concat(this._bootstrapListeners).forEach(function(t){return t(e)})},e.prototype._unloadComponent=function(e){this.detachView(e.hostView),Xe(this.components,e)},e.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(e){return e.destroy()})},Object.defineProperty(e.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),e._tickScope=Se("ApplicationRef#tick()"),e}();function Xe(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var $e=function(){},et=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}(),tt=function(){},nt=function(e){this.nativeElement=e},rt=function(){function e(){this.dirty=!0,this._results=[],this.changes=new Oe,this.length=0}return e.prototype.map=function(e){return this._results.map(e)},e.prototype.filter=function(e){return this._results.filter(e)},e.prototype.find=function(e){return this._results.find(e)},e.prototype.reduce=function(e,t){return this._results.reduce(e,t)},e.prototype.forEach=function(e){this._results.forEach(e)},e.prototype.some=function(e){return this._results.some(e)},e.prototype.toArray=function(){return this._results.slice()},e.prototype[C()]=function(){return this._results[C()]()},e.prototype.toString=function(){return this._results.toString()},e.prototype.reset=function(e){this._results=function e(t){return t.reduce(function(t,n){var r=Array.isArray(n)?e(n):n;return t.concat(r)},[])}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},e.prototype.notifyOnChanges=function(){this.changes.emit(this)},e.prototype.setDirty=function(){this.dirty=!0},e.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},e}(),it=function(){},ot=function(){},st=function(){function e(e,t,n){this._debugContext=n,this.nativeNode=e,t&&t instanceof at?t.addChild(this):this.parent=null,this.listeners=[]}return Object.defineProperty(e.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),e}(),at=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.properties={},i.attributes={},i.classes={},i.styles={},i.childNodes=[],i.nativeElement=t,i}return Object(r.__extends)(t,e),t.prototype.addChild=function(e){e&&(this.childNodes.push(e),e.parent=this)},t.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);-1!==t&&(e.parent=null,this.childNodes.splice(t,1))},t.prototype.insertChildrenAfter=function(e,t){var n,r=this,i=this.childNodes.indexOf(e);-1!==i&&((n=this.childNodes).splice.apply(n,[i+1,0].concat(t)),t.forEach(function(e){e.parent&&e.parent.removeChild(e),e.parent=r}))},t.prototype.insertBefore=function(e,t){var n=this.childNodes.indexOf(e);-1===n?this.addChild(t):(t.parent&&t.parent.removeChild(t),t.parent=this,this.childNodes.splice(n,0,t))},t.prototype.query=function(e){return this.queryAll(e)[0]||null},t.prototype.queryAll=function(e){var t=[];return ut(this,e,t),t},t.prototype.queryAllNodes=function(e){var t=[];return ct(this,e,t),t},Object.defineProperty(t.prototype,"children",{get:function(){return this.childNodes.filter(function(e){return e instanceof t})},enumerable:!0,configurable:!0}),t.prototype.triggerEventHandler=function(e,t){this.listeners.forEach(function(n){n.name==e&&n.callback(t)})},t}(st);function ut(e,t,n){e.childNodes.forEach(function(e){e instanceof at&&(t(e)&&n.push(e),ut(e,t,n))})}function ct(e,t,n){e instanceof at&&e.childNodes.forEach(function(e){t(e)&&n.push(e),e instanceof at&&ct(e,t,n)})}var lt=new Map;function ft(e){return lt.get(e)||null}function ht(e){lt.set(e.nativeNode,e)}function dt(e,t){var n=yt(e),r=yt(t);return n&&r?function(e,t,n){for(var r=e[C()](),i=t[C()]();;){var o=r.next(),s=i.next();if(o.done&&s.done)return!0;if(o.done||s.done)return!1;if(!n(o.value,s.value))return!1}}(e,t,dt):!(n||!e||"object"!=typeof e&&"function"!=typeof e||r||!t||"object"!=typeof t&&"function"!=typeof t)||S(e,t)}var pt=function(){function e(e){this.wrapped=e}return e.wrap=function(t){return new e(t)},e.unwrap=function(t){return e.isWrapped(t)?t.wrapped:t},e.isWrapped=function(t){return t instanceof e},e}(),vt=function(){function e(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}return e.prototype.isFirstChange=function(){return this.firstChange},e}();function yt(e){return!!mt(e)&&(Array.isArray(e)||!(e instanceof Map)&&C()in e)}function mt(e){return null!==e&&("function"==typeof e||"object"==typeof e)}var _t=function(){function e(){}return e.prototype.supports=function(e){return yt(e)},e.prototype.create=function(e){return new bt(e)},e}(),gt=function(e,t){return t},bt=function(){function e(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||gt}return e.prototype.forEachItem=function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)},e.prototype.forEachOperation=function(e){for(var t=this._itHead,n=this._removalsHead,r=0,i=null;t||n;){var o=!n||t&&t.currentIndex<Ct(n,r,i)?t:n,s=Ct(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{i||(i=[]);var u=s-r,c=a-r;if(u!=c){for(var l=0;l<u;l++){var f=l<i.length?i[l]:i[l]=0,h=f+l;c<=h&&h<u&&(i[l]=f+1)}i[o.previousIndex]=c-u}}s!==a&&e(o,s,a)}},e.prototype.forEachPreviousItem=function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)},e.prototype.forEachAddedItem=function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)},e.prototype.forEachMovedItem=function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)},e.prototype.forEachRemovedItem=function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)},e.prototype.forEachIdentityChange=function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)},e.prototype.diff=function(e){if(null==e&&(e=[]),!yt(e))throw new Error("Error trying to diff '"+T(e)+"'. Only arrays and iterables are allowed");return this.check(e)?this:null},e.prototype.onDestroy=function(){},e.prototype.check=function(e){var t=this;this._reset();var n,r,i,o=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(var a=0;a<this.length;a++)i=this._trackByFn(a,r=e[a]),null!==o&&S(o.trackById,i)?(s&&(o=this._verifyReinsertion(o,r,i,a)),S(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,a),s=!0),o=o._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r=e[C()](),i=void 0;!(i=r.next()).done;)t(i.value)}(e,function(e){i=t._trackByFn(n,e),null!==o&&S(o.trackById,i)?(s&&(o=t._verifyReinsertion(o,e,i,n)),S(o.item,e)||t._addIdentityChange(o,e)):(o=t._mismatch(o,e,i,n),s=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=e,this.isDirty},Object.defineProperty(e.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),e.prototype._reset=function(){if(this.isDirty){var e=void 0,t=void 0;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},e.prototype._mismatch=function(e,t,n,r){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(S(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(S(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):e=this._addAfter(new wt(t,n),i,r),e},e.prototype._verifyReinsertion=function(e,t,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e},e.prototype._truncate=function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},e.prototype._reinsertAfter=function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e},e.prototype._moveAfter=function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e},e.prototype._addAfter=function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e},e.prototype._insertAfter=function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new xt),this._linkedRecords.put(e),e.currentIndex=n,e},e.prototype._remove=function(e){return this._addToRemovals(this._unlink(e))},e.prototype._unlink=function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e},e.prototype._addToMoves=function(e,t){return e.previousIndex===t?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)},e.prototype._addToRemovals=function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new xt),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e},e.prototype._addIdentityChange=function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e},e}(),wt=function(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},kt=function(){function e(){this._head=null,this._tail=null}return e.prototype.add=function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)},e.prototype.get=function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&S(n.trackById,e))return n;return null},e.prototype.remove=function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head},e}(),xt=function(){function e(){this.map=new Map}return e.prototype.put=function(e){var t=e.trackById,n=this.map.get(t);n||(n=new kt,this.map.set(t,n)),n.add(e)},e.prototype.get=function(e,t){var n=this.map.get(e);return n?n.get(e,t):null},e.prototype.remove=function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.map.clear()},e}();function Ct(e,t,n){var r=e.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+t+i}var Et=function(){function e(){}return e.prototype.supports=function(e){return e instanceof Map||mt(e)},e.prototype.create=function(){return new St},e}(),St=function(){function e(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(e.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),e.prototype.forEachItem=function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)},e.prototype.forEachPreviousItem=function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)},e.prototype.forEachChangedItem=function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)},e.prototype.forEachAddedItem=function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)},e.prototype.forEachRemovedItem=function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)},e.prototype.diff=function(e){if(e){if(!(e instanceof Map||mt(e)))throw new Error("Error trying to diff '"+T(e)+"'. Only maps and objects are allowed")}else e=new Map;return this.check(e)?this:null},e.prototype.onDestroy=function(){},e.prototype.check=function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var i=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},e.prototype._insertBeforeOrAppend=function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null},e.prototype._getOrCreateRecordForKey=function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new Tt(e);return this._records.set(e,o),o.currentValue=t,this._addToAdditions(o),o},e.prototype._reset=function(){if(this.isDirty){var e=void 0;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},e.prototype._maybeAddToChanges=function(e,t){S(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))},e.prototype._addToAdditions=function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)},e.prototype._addToChanges=function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)},e.prototype._forEach=function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(function(n){return t(e[n],n)})},e}(),Tt=function(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},Ot=function(){function e(e){this.factories=e}return e.create=function(t,n){if(null!=n){var r=n.factories.slice();return new e(t=t.concat(r))}return new e(t)},e.extend=function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new _,new y]]}},e.prototype.find=function(e){var t,n=this.factories.find(function(t){return t.supports(e)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+((t=e).name||typeof t)+"'")},e}(),Pt=function(){function e(e){this.factories=e}return e.create=function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)},e.extend=function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new _,new y]]}},e.prototype.find=function(e){var t=this.factories.find(function(t){return t.supports(e)});if(t)return t;throw new Error("Cannot find a differ supporting object '"+e+"'")},e}(),At=[new Et],It=new Ot([new _t]),Mt=new Pt(At),Rt=Ze(null,"core",[{provide:ue,useValue:"unknown"},{provide:Je,deps:[R]},{provide:Fe,deps:[]},{provide:le,deps:[]}]),jt=new c("LocaleId");function Nt(){return It}function Dt(){return Mt}function Ft(e){return e||"en-US"}var Ut=function(e){},Lt=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]="NONE",e[e.HTML]="HTML",e[e.STYLE]="STYLE",e[e.SCRIPT]="SCRIPT",e[e.URL]="URL",e[e.RESOURCE_URL]="RESOURCE_URL",e}(),Vt=function(){};function Bt(e,t,n){var r=e.state,i=1792&r;return i===t?(e.state=-1793&r|n,e.initIndex=-1,!0):i===n}function qt(e,t,n){return(1792&e.state)===t&&e.initIndex<=n&&(e.initIndex=n+1,!0)}function zt(e,t){return e.nodes[t]}function Ht(e,t){return e.nodes[t]}function Wt(e,t){return e.nodes[t]}function Gt(e,t){return e.nodes[t]}function Zt(e,t){return e.nodes[t]}var Qt={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function Jt(e,t,n,r){var i="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+t+"'. Current value: '"+n+"'.";return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(e,t){var n=new Error(e);return Kt(n,t),n}(i,e)}function Kt(e,t){e[Z]=t,e[J]=t.logError.bind(t)}function Yt(e){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+e)}var Xt=function(){},$t=new Map;function en(e){var t=$t.get(e);return t||(t=T(e)+"_"+$t.size,$t.set(e,t)),t}var tn="$$undefined",nn="$$empty";function rn(e){return{id:tn,styles:e.styles,encapsulation:e.encapsulation,data:e.data}}var on=0;function sn(e,t,n,r){return!(!(2&e.state)&&S(e.oldValues[t.bindingIndex+n],r))}function an(e,t,n,r){return!!sn(e,t,n,r)&&(e.oldValues[t.bindingIndex+n]=r,!0)}function un(e,t,n,r){var i=e.oldValues[t.bindingIndex+n];if(1&e.state||!dt(i,r)){var o=t.bindings[n].name;throw Jt(Qt.createDebugContext(e,t.nodeIndex),o+": "+i,o+": "+r,0!=(1&e.state))}}function cn(e){for(var t=e;t;)2&t.def.flags&&(t.state|=8),t=t.viewContainerParent||t.parent}function ln(e,t){for(var n=e;n&&n!==t;)n.state|=64,n=n.viewContainerParent||n.parent}function fn(e,t,n,r){try{return cn(33554432&e.def.nodes[t].flags?Ht(e,t).componentView:e),Qt.handleEvent(e,t,n,r)}catch(t){e.root.errorHandler.handleError(t)}}function hn(e){return e.parent?Ht(e.parent,e.parentNodeDef.nodeIndex):null}function dn(e){return e.parent?e.parentNodeDef.parent:null}function pn(e,t){switch(201347067&t.flags){case 1:return Ht(e,t.nodeIndex).renderElement;case 2:return zt(e,t.nodeIndex).renderText}}function vn(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function yn(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function mn(e){var t={},n=0,r={};return e&&e.forEach(function(e){var i=e[0],o=e[1];"number"==typeof i?(t[i]=o,n|=function(e){return 1<<e%32}(i)):r[i]=o}),{matchedQueries:t,references:r,matchedQueryIds:n}}function _n(e,t){return e.map(function(e){var n,r;return Array.isArray(e)?(r=e[0],n=e[1]):(r=0,n=e),n&&("function"==typeof n||"object"==typeof n)&&t&&Object.defineProperty(n,A,{value:t,configurable:!0}),{flags:r,token:n,tokenKey:en(n)}})}function gn(e,t,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===h.Native?Ht(e,n.renderParent.nodeIndex).renderElement:void 0:t}var bn=new WeakMap;function wn(e){var t=bn.get(e);return t||((t=e(function(){return Xt})).factory=e,bn.set(e,t)),t}function kn(e,t,n,r,i){3===t&&(n=e.renderer.parentNode(pn(e,e.def.lastRenderRootNode))),xn(e,t,0,e.def.nodes.length-1,n,r,i)}function xn(e,t,n,r,i,o,s){for(var a=n;a<=r;a++){var u=e.def.nodes[a];11&u.flags&&En(e,u,t,i,o,s),a+=u.childCount}}function Cn(e,t,n,r,i,o){for(var s=e;s&&!vn(s);)s=s.parent;for(var a=s.parent,u=dn(s),c=u.nodeIndex+u.childCount,l=u.nodeIndex+1;l<=c;l++){var f=a.def.nodes[l];f.ngContentIndex===t&&En(a,f,n,r,i,o),l+=f.childCount}if(!a.parent){var h=e.root.projectableNodes[t];if(h)for(l=0;l<h.length;l++)Sn(e,h[l],n,r,i,o)}}function En(e,t,n,r,i,o){if(8&t.flags)Cn(e,t.ngContent.index,n,r,i,o);else{var s=pn(e,t);if(3===n&&33554432&t.flags&&48&t.bindingFlags?(16&t.bindingFlags&&Sn(e,s,n,r,i,o),32&t.bindingFlags&&Sn(Ht(e,t.nodeIndex).componentView,s,n,r,i,o)):Sn(e,s,n,r,i,o),16777216&t.flags)for(var a=Ht(e,t.nodeIndex).viewContainer._embeddedViews,u=0;u<a.length;u++)kn(a[u],n,r,i,o);1&t.flags&&!t.element.name&&xn(e,n,t.nodeIndex+1,t.nodeIndex+t.childCount,r,i,o)}}function Sn(e,t,n,r,i,o){var s=e.renderer;switch(n){case 1:s.appendChild(r,t);break;case 2:s.insertBefore(r,t,i);break;case 3:s.removeChild(r,t);break;case 0:o.push(t)}}var Tn=/^:([^:]+):(.+)$/;function On(e){if(":"===e[0]){var t=e.match(Tn);return[t[1],t[2]]}return["",e]}function Pn(e){for(var t=0,n=0;n<e.length;n++)t|=e[n].flags;return t}function An(e,t,n,r,i,o){e|=1;var s=mn(t);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:e,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:s.matchedQueries,matchedQueryIds:s.matchedQueryIds,references:s.references,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?wn(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||Xt},provider:null,text:null,query:null,ngContent:null}}function In(e,t,n,r,i,o,s,a,u,c,l,f){void 0===s&&(s=[]),c||(c=Xt);var d=mn(n),p=d.matchedQueries,v=d.references,y=d.matchedQueryIds,m=null,_=null;o&&(m=(I=On(o))[0],_=I[1]),a=a||[];for(var g=new Array(a.length),b=0;b<a.length;b++){var w=a[b],k=w[0],x=w[2],C=On(w[1]),E=C[0],S=C[1],T=void 0,O=void 0;switch(15&k){case 4:O=x;break;case 1:case 8:T=x}g[b]={flags:k,ns:E,name:S,nonMinifiedName:S,securityContext:T,suffix:O}}u=u||[];var P=new Array(u.length);for(b=0;b<u.length;b++){var A=u[b];P[b]={type:0,target:A[0],eventName:A[1],propName:null}}var I,M=(s=s||[]).map(function(e){var t=e[1],n=On(e[0]);return[n[0],n[1],t]});return f=function(e){if(e&&e.id===tn){var t=null!=e.encapsulation&&e.encapsulation!==h.None||e.styles.length||Object.keys(e.data).length;e.id=t?"c"+on++:nn}return e&&e.id===nn&&(e=null),e||null}(f),l&&(t|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:p,matchedQueryIds:y,references:v,ngContentIndex:r,childCount:i,bindings:g,bindingFlags:Pn(g),outputs:P,element:{ns:m,name:_,attrs:M,template:null,componentProvider:null,componentView:l||null,componentRendererType:f,publicProviders:null,allProviders:null,handleEvent:c||Xt},provider:null,text:null,query:null,ngContent:null}}function Mn(e,t,n){var r,i=n.element,o=e.root.selectorOrNode,s=e.renderer;if(e.parent||!o){r=i.name?s.createElement(i.name,i.ns):s.createComment("");var a=gn(e,t,n);a&&s.appendChild(a,r)}else r=s.selectRootElement(o);if(i.attrs)for(var u=0;u<i.attrs.length;u++){var c=i.attrs[u];s.setAttribute(r,c[1],c[2],c[0])}return r}function Rn(e,t,n,r){for(var i=0;i<n.outputs.length;i++){var o=n.outputs[i],s=jn(e,n.nodeIndex,(f=o.eventName,(l=o.target)?l+":"+f:f)),a=o.target,u=e;"component"===o.target&&(a=null,u=t);var c=u.renderer.listen(a||r,o.eventName,s);e.disposables[n.outputIndex+i]=c}var l,f}function jn(e,t,n){return function(r){return fn(e,t,n,r)}}function Nn(e,t,n,r){if(!an(e,t,n,r))return!1;var i=t.bindings[n],o=Ht(e,t.nodeIndex),s=o.renderElement,a=i.name;switch(15&i.flags){case 1:!function(e,t,n,r,i,o){var s=t.securityContext,a=s?e.root.sanitizer.sanitize(s,o):o;a=null!=a?a.toString():null;var u=e.renderer;null!=o?u.setAttribute(n,i,a,r):u.removeAttribute(n,i,r)}(e,i,s,i.ns,a,r);break;case 2:!function(e,t,n,r){var i=e.renderer;r?i.addClass(t,n):i.removeClass(t,n)}(e,s,a,r);break;case 4:!function(e,t,n,r,i){var o=e.root.sanitizer.sanitize(Lt.STYLE,i);if(null!=o){o=o.toString();var s=t.suffix;null!=s&&(o+=s)}else o=null;var a=e.renderer;null!=o?a.setStyle(n,r,o):a.removeStyle(n,r)}(e,i,s,a,r);break;case 8:!function(e,t,n,r,i){var o=t.securityContext,s=o?e.root.sanitizer.sanitize(o,i):i;e.renderer.setProperty(n,r,s)}(33554432&t.flags&&32&i.flags?o.componentView:e,i,s,a,r)}return!0}var Dn=new Object,Fn=en(R),Un=en(xe);function Ln(e,t,n,r){return n=P(n),{index:-1,deps:_n(r,T(t)),flags:e,token:t,value:n}}function Vn(e){for(var t={},n=0;n<e.length;n++){var r=e[n];r.index=n,t[en(r.token)]=r}return{factory:null,providersByKey:t,providers:e}}function Bn(e,t,n){if(void 0===n&&(n=R.THROW_IF_NOT_FOUND),8&t.flags)return t.token;if(2&t.flags&&(n=null),1&t.flags)return e._parent.get(t.token,n);var r=t.tokenKey;switch(r){case Fn:case Un:return e}var i=e._def.providersByKey[r];if(i){var o=e._providers[i.index];return void 0===o&&(o=e._providers[i.index]=qn(e,i)),o===Dn?void 0:o}return e._parent.get(t.token,n)}function qn(e,t){var n;switch(201347067&t.flags){case 512:n=function(e,t,n){var r=n.length;switch(r){case 0:return new t;case 1:return new t(Bn(e,n[0]));case 2:return new t(Bn(e,n[0]),Bn(e,n[1]));case 3:return new t(Bn(e,n[0]),Bn(e,n[1]),Bn(e,n[2]));default:for(var i=new Array(r),o=0;o<r;o++)i[o]=Bn(e,n[o]);return new(t.bind.apply(t,[void 0].concat(i)))}}(e,t.value,t.deps);break;case 1024:n=function(e,t,n){var r=n.length;switch(r){case 0:return t();case 1:return t(Bn(e,n[0]));case 2:return t(Bn(e,n[0]),Bn(e,n[1]));case 3:return t(Bn(e,n[0]),Bn(e,n[1]),Bn(e,n[2]));default:for(var i=Array(r),o=0;o<r;o++)i[o]=Bn(e,n[o]);return t.apply(void 0,i)}}(e,t.value,t.deps);break;case 2048:n=Bn(e,t.deps[0]);break;case 256:n=t.value}return void 0===n?Dn:n}function zn(e,t){var n=e.viewContainer._embeddedViews;if((null==t||t>=n.length)&&(t=n.length-1),t<0)return null;var r=n[t];return r.viewContainerParent=null,Zn(n,t),Qt.dirtyParentQueries(r),Wn(r),r}function Hn(e,t,n){var r=t?pn(t,t.def.lastRenderRootNode):e.renderElement;kn(n,2,n.renderer.parentNode(r),n.renderer.nextSibling(r),void 0)}function Wn(e){kn(e,3,null,null,void 0)}function Gn(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Zn(e,t){t>=e.length-1?e.pop():e.splice(t,1)}var Qn=new Object;function Jn(e,t,n,r,i,o){return new Kn(e,t,n,r,i,o)}var Kn=function(e){function t(t,n,r,i,o,s){var a=e.call(this)||this;return a.selector=t,a.componentType=n,a._inputs=i,a._outputs=o,a.ngContentSelectors=s,a.viewDefFactory=r,a}return Object(r.__extends)(t,e),Object.defineProperty(t.prototype,"inputs",{get:function(){var e=[],t=this._inputs;for(var n in t)e.push({propName:n,templateName:t[n]});return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){var e=[];for(var t in this._outputs)e.push({propName:t,templateName:this._outputs[t]});return e},enumerable:!0,configurable:!0}),t.prototype.create=function(e,t,n,r){if(!r)throw new Error("ngModule should be provided");var i=wn(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,s=Qt.createRootView(e,t||[],n,i,r,Qn),a=Wt(s,o).instance;return n&&s.renderer.setAttribute(Ht(s,0).renderElement,"ng-version",p.full),new Yn(s,new tr(s),a)},t}(pe),Yn=function(e){function t(t,n,r){var i=e.call(this)||this;return i._view=t,i._viewRef=n,i._component=r,i._elDef=i._view.def.nodes[0],i.hostView=n,i.changeDetectorRef=n,i.instance=r,i}return Object(r.__extends)(t,e),Object.defineProperty(t.prototype,"location",{get:function(){return new nt(Ht(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return new or(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this._viewRef.destroy()},t.prototype.onDestroy=function(e){this._viewRef.onDestroy(e)},t}(function(){});function Xn(e,t,n){return new $n(e,t,n)}var $n=function(){function e(e,t,n){this._view=e,this._elDef=t,this._data=n,this._embeddedViews=[]}return Object.defineProperty(e.prototype,"element",{get:function(){return new nt(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new or(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentInjector",{get:function(){for(var e=this._view,t=this._elDef.parent;!t&&e;)t=dn(e),e=e.parent;return e?new or(e,t):new or(this._view,null)},enumerable:!0,configurable:!0}),e.prototype.clear=function(){for(var e=this._embeddedViews.length-1;e>=0;e--){var t=zn(this._data,e);Qt.destroyView(t)}},e.prototype.get=function(e){var t=this._embeddedViews[e];if(t){var n=new tr(t);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(e.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),e.prototype.createEmbeddedView=function(e,t,n){var r=e.createEmbeddedView(t||{});return this.insert(r,n),r},e.prototype.createComponent=function(e,t,n,r,i){var o=n||this.parentInjector;i||e instanceof ke||(i=o.get(xe));var s=e.create(o,r,void 0,i);return this.insert(s.hostView,t),s},e.prototype.insert=function(e,t){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,i,o,s=e;return i=s._view,o=(n=this._data).viewContainer._embeddedViews,null!==(r=t)&&void 0!==r||(r=o.length),i.viewContainerParent=this._view,Gn(o,r,i),function(e,t){var n=hn(t);if(n&&n!==e&&!(16&t.state)){t.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(t),function(e,n){if(!(4&n.flags)){t.parent.def.nodeFlags|=4,n.flags|=4;for(var r=n.parent;r;)r.childFlags|=4,r=r.parent}}(0,t.parentNodeDef)}}(n,i),Qt.dirtyParentQueries(i),Hn(n,r>0?o[r-1]:null,i),s.attachToViewContainerRef(this),e},e.prototype.move=function(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,i,o,s,a=this._embeddedViews.indexOf(e._view);return i=t,s=(o=(n=this._data).viewContainer._embeddedViews)[r=a],Zn(o,r),null==i&&(i=o.length),Gn(o,i,s),Qt.dirtyParentQueries(s),Wn(s),Hn(n,i>0?o[i-1]:null,s),e},e.prototype.indexOf=function(e){return this._embeddedViews.indexOf(e._view)},e.prototype.remove=function(e){var t=zn(this._data,e);t&&Qt.destroyView(t)},e.prototype.detach=function(e){var t=zn(this._data,e);return t?new tr(t):null},e}();function er(e){return new tr(e)}var tr=function(){function e(e){this._view=e,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(e.prototype,"rootNodes",{get:function(){return kn(this._view,0,void 0,void 0,e=[]),e;var e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),e.prototype.markForCheck=function(){cn(this._view)},e.prototype.detach=function(){this._view.state&=-5},e.prototype.detectChanges=function(){var e=this._view.root.rendererFactory;e.begin&&e.begin();try{Qt.checkAndUpdateView(this._view)}finally{e.end&&e.end()}},e.prototype.checkNoChanges=function(){Qt.checkNoChangesView(this._view)},e.prototype.reattach=function(){this._view.state|=4},e.prototype.onDestroy=function(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)},e.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Qt.destroyView(this._view)},e.prototype.detachFromAppRef=function(){this._appRef=null,Wn(this._view),Qt.dirtyParentQueries(this._view)},e.prototype.attachToAppRef=function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e},e.prototype.attachToViewContainerRef=function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e},e}();function nr(e,t){return new rr(e,t)}var rr=function(e){function t(t,n){var r=e.call(this)||this;return r._parentView=t,r._def=n,r}return Object(r.__extends)(t,e),t.prototype.createEmbeddedView=function(e){return new tr(Qt.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))},Object.defineProperty(t.prototype,"elementRef",{get:function(){return new nt(Ht(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),t}(it);function ir(e,t){return new or(e,t)}var or=function(){function e(e,t){this.view=e,this.elDef=t}return e.prototype.get=function(e,t){return void 0===t&&(t=R.THROW_IF_NOT_FOUND),Qt.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:e,tokenKey:en(e)},t)},e}();function sr(e,t){var n=e.def.nodes[t];if(1&n.flags){var r=Ht(e,n.nodeIndex);return n.element.template?r.template:r.renderElement}if(2&n.flags)return zt(e,n.nodeIndex).renderText;if(20240&n.flags)return Wt(e,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+t)}function ar(e){return new ur(e.renderer)}var ur=function(){function e(e){this.delegate=e}return e.prototype.selectRootElement=function(e){return this.delegate.selectRootElement(e)},e.prototype.createElement=function(e,t){var n=On(t),r=this.delegate.createElement(n[1],n[0]);return e&&this.delegate.appendChild(e,r),r},e.prototype.createViewRoot=function(e){return e},e.prototype.createTemplateAnchor=function(e){var t=this.delegate.createComment("");return e&&this.delegate.appendChild(e,t),t},e.prototype.createText=function(e,t){var n=this.delegate.createText(t);return e&&this.delegate.appendChild(e,n),n},e.prototype.projectNodes=function(e,t){for(var n=0;n<t.length;n++)this.delegate.appendChild(e,t[n])},e.prototype.attachViewAfter=function(e,t){for(var n=this.delegate.parentNode(e),r=this.delegate.nextSibling(e),i=0;i<t.length;i++)this.delegate.insertBefore(n,t[i],r)},e.prototype.detachView=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}},e.prototype.destroyView=function(e,t){for(var n=0;n<t.length;n++)this.delegate.destroyNode(t[n])},e.prototype.listen=function(e,t,n){return this.delegate.listen(e,t,n)},e.prototype.listenGlobal=function(e,t,n){return this.delegate.listen(e,t,n)},e.prototype.setElementProperty=function(e,t,n){this.delegate.setProperty(e,t,n)},e.prototype.setElementAttribute=function(e,t,n){var r=On(t),i=r[0],o=r[1];null!=n?this.delegate.setAttribute(e,o,n,i):this.delegate.removeAttribute(e,o,i)},e.prototype.setBindingDebugInfo=function(e,t,n){},e.prototype.setElementClass=function(e,t,n){n?this.delegate.addClass(e,t):this.delegate.removeClass(e,t)},e.prototype.setElementStyle=function(e,t,n){null!=n?this.delegate.setStyle(e,t,n):this.delegate.removeStyle(e,t)},e.prototype.invokeElementMethod=function(e,t,n){e[t].apply(e,n)},e.prototype.setText=function(e,t){this.delegate.setValue(e,t)},e.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},e}();function cr(e,t,n,r){return new lr(e,t,n,r)}var lr=function(){function e(e,t,n,r){this._moduleType=e,this._parent=t,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){for(var t=e._def,n=e._providers=new Array(t.providers.length),r=0;r<t.providers.length;r++){var i=t.providers[r];4096&i.flags||(n[r]=qn(e,i))}}(this)}return e.prototype.get=function(e,t){return void 0===t&&(t=R.THROW_IF_NOT_FOUND),Bn(this,{token:e,tokenKey:en(e),flags:0},t)},Object.defineProperty(e.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentFactoryResolver",{get:function(){return this.get(be)},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+T(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(e,t){for(var n=e._def,r=0;r<n.providers.length;r++)if(131072&n.providers[r].flags){var i=e._providers[r];i&&i!==Dn&&i.ngOnDestroy()}}(this),this._destroyListeners.forEach(function(e){return e()})},e.prototype.onDestroy=function(e){this._destroyListeners.push(e)},e}(),fr=en(function(){}),hr=en(tt),dr=en(nt),pr=en(ot),vr=en(it),yr=en(function(){}),mr=en(R);function _r(e,t,n,r,i,o,s,a){var u=[];if(s)for(var c in s){var l=s[c];u[l[0]]={flags:8,name:c,nonMinifiedName:l[1],ns:null,securityContext:null,suffix:null}}var f=[];if(a)for(var h in a)f.push({type:1,propName:h,target:null,eventName:a[h]});return br(e,t|=16384,n,r,i,i,o,u,f)}function gr(e,t,n,r,i){return br(-1,e,t,0,n,r,i)}function br(e,t,n,r,i,o,s,a,u){var c=mn(n),l=c.matchedQueries,f=c.references,h=c.matchedQueryIds;u||(u=[]),a||(a=[]),o=P(o);var d=_n(s,T(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:l,matchedQueryIds:h,references:f,ngContentIndex:-1,childCount:r,bindings:a,bindingFlags:Pn(a),outputs:u,element:null,provider:{token:i,value:o,deps:d},text:null,query:null,ngContent:null}}function wr(e,t){return Er(e,t)}function kr(e,t){for(var n=e;n.parent&&!vn(n);)n=n.parent;return Sr(n.parent,dn(n),!0,t.provider.value,t.provider.deps)}function xr(e,t){var n=Sr(e,t.parent,(32768&t.flags)>0,t.provider.value,t.provider.deps);if(t.outputs.length)for(var r=0;r<t.outputs.length;r++){var i=t.outputs[r],o=n[i.propName].subscribe(Cr(e,t.parent.nodeIndex,i.eventName));e.disposables[t.outputIndex+r]=o.unsubscribe.bind(o)}return n}function Cr(e,t,n){return function(r){return fn(e,t,n,r)}}function Er(e,t){var n=(8192&t.flags)>0,r=t.provider;switch(201347067&t.flags){case 512:return Sr(e,t.parent,n,r.value,r.deps);case 1024:return function(e,t,n,r,i){var o=i.length;switch(o){case 0:return r();case 1:return r(Or(e,t,n,i[0]));case 2:return r(Or(e,t,n,i[0]),Or(e,t,n,i[1]));case 3:return r(Or(e,t,n,i[0]),Or(e,t,n,i[1]),Or(e,t,n,i[2]));default:for(var s=Array(o),a=0;a<o;a++)s[a]=Or(e,t,n,i[a]);return r.apply(void 0,s)}}(e,t.parent,n,r.value,r.deps);case 2048:return Or(e,t.parent,n,r.deps[0]);case 256:return r.value}}function Sr(e,t,n,r,i){var o=i.length;switch(o){case 0:return new r;case 1:return new r(Or(e,t,n,i[0]));case 2:return new r(Or(e,t,n,i[0]),Or(e,t,n,i[1]));case 3:return new r(Or(e,t,n,i[0]),Or(e,t,n,i[1]),Or(e,t,n,i[2]));default:for(var s=new Array(o),a=0;a<o;a++)s[a]=Or(e,t,n,i[a]);return new(r.bind.apply(r,[void 0].concat(s)))}}var Tr={};function Or(e,t,n,r,i){if(void 0===i&&(i=R.THROW_IF_NOT_FOUND),8&r.flags)return r.token;var o=e;2&r.flags&&(i=null);var s=r.tokenKey;for(s===yr&&(n=!(!t||!t.element.componentView)),t&&1&r.flags&&(n=!1,t=t.parent);e;){if(t)switch(s){case fr:return ar(Pr(e,t,n));case hr:return Pr(e,t,n).renderer;case dr:return new nt(Ht(e,t.nodeIndex).renderElement);case pr:return Ht(e,t.nodeIndex).viewContainer;case vr:if(t.element.template)return Ht(e,t.nodeIndex).template;break;case yr:return er(Pr(e,t,n));case mr:return ir(e,t);default:var a=(n?t.element.allProviders:t.element.publicProviders)[s];if(a){var u=Wt(e,a.nodeIndex);return u||(u={instance:Er(e,a)},e.nodes[a.nodeIndex]=u),u.instance}}n=vn(e),t=dn(e),e=e.parent}var c=o.root.injector.get(r.token,Tr);return c!==Tr||i===Tr?c:o.root.ngModule.injector.get(r.token,i)}function Pr(e,t,n){var r;if(n)r=Ht(e,t.nodeIndex).componentView;else for(r=e;r.parent&&!vn(r);)r=r.parent;return r}function Ar(e,t,n,r,i,o){if(32768&n.flags){var s=Ht(e,n.parent.nodeIndex).componentView;2&s.def.flags&&(s.state|=8)}if(t.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};var a=pt.unwrap(e.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new vt(a,i,0!=(2&e.state))}return e.oldValues[n.bindingIndex+r]=i,o}function Ir(e,t){if(e.def.nodeFlags&t)for(var n=e.def.nodes,r=0,i=0;i<n.length;i++){var o=n[i],s=o.parent;for(!s&&o.flags&t&&Rr(e,i,o.flags&t,r++),0==(o.childFlags&t)&&(i+=o.childCount);s&&1&s.flags&&i===s.nodeIndex+s.childCount;)s.directChildFlags&t&&(r=Mr(e,s,t,r)),s=s.parent}}function Mr(e,t,n,r){for(var i=t.nodeIndex+1;i<=t.nodeIndex+t.childCount;i++){var o=e.def.nodes[i];o.flags&n&&Rr(e,i,o.flags&n,r++),i+=o.childCount}return r}function Rr(e,t,n,r){var i=Wt(e,t);if(i){var o=i.instance;o&&(Qt.setCurrentNode(e,t),1048576&n&&qt(e,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&qt(e,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}function jr(e){for(var t=e.def.nodeMatchedQueries;e.parent&&yn(e);){var n=e.parentNodeDef;e=e.parent;for(var r=n.nodeIndex+n.childCount,i=0;i<=r;i++)67108864&(o=e.def.nodes[i]).flags&&536870912&o.flags&&(o.query.filterId&t)===o.query.filterId&&Zt(e,i).setDirty(),!(1&o.flags&&i+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(i+=o.childCount)}if(134217728&e.def.nodeFlags)for(i=0;i<e.def.nodes.length;i++){var o;134217728&(o=e.def.nodes[i]).flags&&536870912&o.flags&&Zt(e,i).setDirty(),i+=o.childCount}}function Nr(e,t){var n=Zt(e,t.nodeIndex);if(n.dirty){var r,i=void 0;if(67108864&t.flags){var o=t.parent.parent;i=Dr(e,o.nodeIndex,o.nodeIndex+o.childCount,t.query,[]),r=Wt(e,t.parent.nodeIndex).instance}else 134217728&t.flags&&(i=Dr(e,0,e.def.nodes.length-1,t.query,[]),r=e.component);n.reset(i);for(var s=t.query.bindings,a=!1,u=0;u<s.length;u++){var c=s[u],l=void 0;switch(c.bindingType){case 0:l=n.first;break;case 1:l=n,a=!0}r[c.propName]=l}a&&n.notifyOnChanges()}}function Dr(e,t,n,r,i){for(var o=t;o<=n;o++){var s=e.def.nodes[o],a=s.matchedQueries[r.id];if(null!=a&&i.push(Fr(e,s,a)),1&s.flags&&s.element.template&&(s.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=Ht(e,o);if((s.childMatchedQueries&r.filterId)===r.filterId&&(Dr(e,o+1,o+s.childCount,r,i),o+=s.childCount),16777216&s.flags)for(var c=u.viewContainer._embeddedViews,l=0;l<c.length;l++){var f=c[l],h=hn(f);h&&h===u&&Dr(f,0,f.def.nodes.length-1,r,i)}var d=u.template._projectedViews;if(d)for(l=0;l<d.length;l++){var p=d[l];Dr(p,0,p.def.nodes.length-1,r,i)}}(s.childMatchedQueries&r.filterId)!==r.filterId&&(o+=s.childCount)}return i}function Fr(e,t,n){if(null!=n)switch(n){case 1:return Ht(e,t.nodeIndex).renderElement;case 0:return new nt(Ht(e,t.nodeIndex).renderElement);case 2:return Ht(e,t.nodeIndex).template;case 3:return Ht(e,t.nodeIndex).viewContainer;case 4:return Wt(e,t.nodeIndex).instance}}function Ur(e,t,n){var r=gn(e,t,n);r&&Cn(e,n.ngContent.index,1,r,null,void 0)}function Lr(e,t,n){for(var r=new Array(n.length-1),i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function Vr(e,t,n){var r,i=e.renderer;r=i.createText(n.text.prefix);var o=gn(e,t,n);return o&&i.appendChild(o,r),{renderText:r}}function Br(e,t){return(null!=e?e.toString():"")+t.suffix}function qr(e,t,n,r){for(var i=0,o=0,s=0,a=0,u=0,c=null,l=null,f=!1,h=!1,d=null,p=0;p<t.length;p++){var v=t[p];if(v.nodeIndex=p,v.parent=c,v.bindingIndex=i,v.outputIndex=o,v.renderParent=l,s|=v.flags,u|=v.matchedQueryIds,v.element){var y=v.element;y.publicProviders=c?c.element.publicProviders:Object.create(null),y.allProviders=y.publicProviders,f=!1,h=!1,v.element.template&&(u|=v.element.template.nodeMatchedQueries)}if(Hr(c,v,t.length),i+=v.bindings.length,o+=v.outputs.length,!l&&3&v.flags&&(d=v),20224&v.flags){f||(f=!0,c.element.publicProviders=Object.create(c.element.publicProviders),c.element.allProviders=c.element.publicProviders);var m=0!=(32768&v.flags);0==(8192&v.flags)||m?c.element.publicProviders[en(v.provider.token)]=v:(h||(h=!0,c.element.allProviders=Object.create(c.element.publicProviders)),c.element.allProviders[en(v.provider.token)]=v),m&&(c.element.componentProvider=v)}if(c?(c.childFlags|=v.flags,c.directChildFlags|=v.flags,c.childMatchedQueries|=v.matchedQueryIds,v.element&&v.element.template&&(c.childMatchedQueries|=v.element.template.nodeMatchedQueries)):a|=v.flags,v.childCount>0)c=v,zr(v)||(l=v);else for(;c&&p===c.nodeIndex+c.childCount;){var _=c.parent;_&&(_.childFlags|=c.childFlags,_.childMatchedQueries|=c.childMatchedQueries),l=(c=_)&&zr(c)?c.renderParent:c}}return{factory:null,nodeFlags:s,rootNodeFlags:a,nodeMatchedQueries:u,flags:e,nodes:t,updateDirectives:n||Xt,updateRenderer:r||Xt,handleEvent:function(e,n,r,i){return t[n].element.handleEvent(e,r,i)},bindingCount:i,outputCount:o,lastRenderRootNode:d}}function zr(e){return 0!=(1&e.flags)&&null===e.element.name}function Hr(e,t,n){var r=t.element&&t.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+t.nodeIndex+"!")}if(20224&t.flags&&0==(1&(e?e.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+t.nodeIndex+"!");if(t.query){if(67108864&t.flags&&(!e||0==(16384&e.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+t.nodeIndex+"!");if(134217728&t.flags&&e)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+t.nodeIndex+"!")}if(t.childCount){var i=e?e.nodeIndex+e.childCount:n-1;if(t.nodeIndex<=i&&t.nodeIndex+t.childCount>i)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+t.nodeIndex+"!")}}function Wr(e,t,n,r){var i=Qr(e.root,e.renderer,e,t,n);return Jr(i,e.component,r),Kr(i),i}function Gr(e,t,n){var r=Qr(e,e.renderer,null,null,t);return Jr(r,n,n),Kr(r),r}function Zr(e,t,n,r){var i,o=t.element.componentRendererType;return i=o?e.root.rendererFactory.createRenderer(r,o):e.root.renderer,Qr(e.root,i,e,t.element.componentProvider,n)}function Qr(e,t,n,r,i){var o=new Array(i.nodes.length),s=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:e,renderer:t,oldValues:new Array(i.bindingCount),disposables:s,initIndex:-1}}function Jr(e,t,n){e.component=t,e.context=n}function Kr(e){var t;vn(e)&&(t=Ht(e.parent,e.parentNodeDef.parent.nodeIndex).renderElement);for(var n=e.def,r=e.nodes,i=0;i<n.nodes.length;i++){var o=n.nodes[i];Qt.setCurrentNode(e,i);var s=void 0;switch(201347067&o.flags){case 1:var a=Mn(e,t,o),u=void 0;if(33554432&o.flags){var c=wn(o.element.componentView);u=Qt.createComponentView(e,o,c,a)}Rn(e,u,o,a),s={renderElement:a,componentView:u,viewContainer:null,template:o.element.template?nr(e,o):void 0},16777216&o.flags&&(s.viewContainer=Xn(e,o,s));break;case 2:s=Vr(e,t,o);break;case 512:case 1024:case 2048:case 256:(s=r[i])||4096&o.flags||(s={instance:wr(e,o)});break;case 16:s={instance:kr(e,o)};break;case 16384:(s=r[i])||(s={instance:xr(e,o)}),32768&o.flags&&Jr(Ht(e,o.parent.nodeIndex).componentView,s.instance,s.instance);break;case 32:case 64:case 128:s={value:void 0};break;case 67108864:case 134217728:s=new rt;break;case 8:Ur(e,t,o),s=void 0}r[i]=s}oi(e,ii.CreateViewNodes),ci(e,201326592,268435456,0)}function Yr(e){ei(e),Qt.updateDirectives(e,1),si(e,ii.CheckNoChanges),Qt.updateRenderer(e,1),oi(e,ii.CheckNoChanges),e.state&=-97}function Xr(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,Bt(e,0,256),ei(e),Qt.updateDirectives(e,0),si(e,ii.CheckAndUpdate),ci(e,67108864,536870912,0);var t=Bt(e,256,512);Ir(e,2097152|(t?1048576:0)),Qt.updateRenderer(e,0),oi(e,ii.CheckAndUpdate),ci(e,134217728,536870912,0),Ir(e,8388608|((t=Bt(e,512,768))?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,Bt(e,768,1024)}function $r(e,t,n,r,i,o,s,a,u,c,l,f,h){return 0===n?function(e,t,n,r,i,o,s,a,u,c,l,f){switch(201347067&t.flags){case 1:return function(e,t,n,r,i,o,s,a,u,c,l,f){var h=t.bindings.length,d=!1;return h>0&&Nn(e,t,0,n)&&(d=!0),h>1&&Nn(e,t,1,r)&&(d=!0),h>2&&Nn(e,t,2,i)&&(d=!0),h>3&&Nn(e,t,3,o)&&(d=!0),h>4&&Nn(e,t,4,s)&&(d=!0),h>5&&Nn(e,t,5,a)&&(d=!0),h>6&&Nn(e,t,6,u)&&(d=!0),h>7&&Nn(e,t,7,c)&&(d=!0),h>8&&Nn(e,t,8,l)&&(d=!0),h>9&&Nn(e,t,9,f)&&(d=!0),d}(e,t,n,r,i,o,s,a,u,c,l,f);case 2:return function(e,t,n,r,i,o,s,a,u,c,l,f){var h=!1,d=t.bindings,p=d.length;if(p>0&&an(e,t,0,n)&&(h=!0),p>1&&an(e,t,1,r)&&(h=!0),p>2&&an(e,t,2,i)&&(h=!0),p>3&&an(e,t,3,o)&&(h=!0),p>4&&an(e,t,4,s)&&(h=!0),p>5&&an(e,t,5,a)&&(h=!0),p>6&&an(e,t,6,u)&&(h=!0),p>7&&an(e,t,7,c)&&(h=!0),p>8&&an(e,t,8,l)&&(h=!0),p>9&&an(e,t,9,f)&&(h=!0),h){var v=t.text.prefix;p>0&&(v+=Br(n,d[0])),p>1&&(v+=Br(r,d[1])),p>2&&(v+=Br(i,d[2])),p>3&&(v+=Br(o,d[3])),p>4&&(v+=Br(s,d[4])),p>5&&(v+=Br(a,d[5])),p>6&&(v+=Br(u,d[6])),p>7&&(v+=Br(c,d[7])),p>8&&(v+=Br(l,d[8])),p>9&&(v+=Br(f,d[9]));var y=zt(e,t.nodeIndex).renderText;e.renderer.setValue(y,v)}return h}(e,t,n,r,i,o,s,a,u,c,l,f);case 16384:return function(e,t,n,r,i,o,s,a,u,c,l,f){var h=Wt(e,t.nodeIndex),d=h.instance,p=!1,v=void 0,y=t.bindings.length;return y>0&&sn(e,t,0,n)&&(p=!0,v=Ar(e,h,t,0,n,v)),y>1&&sn(e,t,1,r)&&(p=!0,v=Ar(e,h,t,1,r,v)),y>2&&sn(e,t,2,i)&&(p=!0,v=Ar(e,h,t,2,i,v)),y>3&&sn(e,t,3,o)&&(p=!0,v=Ar(e,h,t,3,o,v)),y>4&&sn(e,t,4,s)&&(p=!0,v=Ar(e,h,t,4,s,v)),y>5&&sn(e,t,5,a)&&(p=!0,v=Ar(e,h,t,5,a,v)),y>6&&sn(e,t,6,u)&&(p=!0,v=Ar(e,h,t,6,u,v)),y>7&&sn(e,t,7,c)&&(p=!0,v=Ar(e,h,t,7,c,v)),y>8&&sn(e,t,8,l)&&(p=!0,v=Ar(e,h,t,8,l,v)),y>9&&sn(e,t,9,f)&&(p=!0,v=Ar(e,h,t,9,f,v)),v&&d.ngOnChanges(v),65536&t.flags&&qt(e,256,t.nodeIndex)&&d.ngOnInit(),262144&t.flags&&d.ngDoCheck(),p}(e,t,n,r,i,o,s,a,u,c,l,f);case 32:case 64:case 128:return function(e,t,n,r,i,o,s,a,u,c,l,f){var h=t.bindings,d=!1,p=h.length;if(p>0&&an(e,t,0,n)&&(d=!0),p>1&&an(e,t,1,r)&&(d=!0),p>2&&an(e,t,2,i)&&(d=!0),p>3&&an(e,t,3,o)&&(d=!0),p>4&&an(e,t,4,s)&&(d=!0),p>5&&an(e,t,5,a)&&(d=!0),p>6&&an(e,t,6,u)&&(d=!0),p>7&&an(e,t,7,c)&&(d=!0),p>8&&an(e,t,8,l)&&(d=!0),p>9&&an(e,t,9,f)&&(d=!0),d){var v=Gt(e,t.nodeIndex),y=void 0;switch(201347067&t.flags){case 32:y=new Array(h.length),p>0&&(y[0]=n),p>1&&(y[1]=r),p>2&&(y[2]=i),p>3&&(y[3]=o),p>4&&(y[4]=s),p>5&&(y[5]=a),p>6&&(y[6]=u),p>7&&(y[7]=c),p>8&&(y[8]=l),p>9&&(y[9]=f);break;case 64:y={},p>0&&(y[h[0].name]=n),p>1&&(y[h[1].name]=r),p>2&&(y[h[2].name]=i),p>3&&(y[h[3].name]=o),p>4&&(y[h[4].name]=s),p>5&&(y[h[5].name]=a),p>6&&(y[h[6].name]=u),p>7&&(y[h[7].name]=c),p>8&&(y[h[8].name]=l),p>9&&(y[h[9].name]=f);break;case 128:var m=n;switch(p){case 1:y=m.transform(n);break;case 2:y=m.transform(r);break;case 3:y=m.transform(r,i);break;case 4:y=m.transform(r,i,o);break;case 5:y=m.transform(r,i,o,s);break;case 6:y=m.transform(r,i,o,s,a);break;case 7:y=m.transform(r,i,o,s,a,u);break;case 8:y=m.transform(r,i,o,s,a,u,c);break;case 9:y=m.transform(r,i,o,s,a,u,c,l);break;case 10:y=m.transform(r,i,o,s,a,u,c,l,f)}}v.value=y}return d}(e,t,n,r,i,o,s,a,u,c,l,f);default:throw"unreachable"}}(e,t,r,i,o,s,a,u,c,l,f,h):function(e,t,n){switch(201347067&t.flags){case 1:return function(e,t,n){for(var r=!1,i=0;i<n.length;i++)Nn(e,t,i,n[i])&&(r=!0);return r}(e,t,n);case 2:return function(e,t,n){for(var r=t.bindings,i=!1,o=0;o<n.length;o++)an(e,t,o,n[o])&&(i=!0);if(i){var s="";for(o=0;o<n.length;o++)s+=Br(n[o],r[o]);s=t.text.prefix+s;var a=zt(e,t.nodeIndex).renderText;e.renderer.setValue(a,s)}return i}(e,t,n);case 16384:return function(e,t,n){for(var r=Wt(e,t.nodeIndex),i=r.instance,o=!1,s=void 0,a=0;a<n.length;a++)sn(e,t,a,n[a])&&(o=!0,s=Ar(e,r,t,a,n[a],s));return s&&i.ngOnChanges(s),65536&t.flags&&qt(e,256,t.nodeIndex)&&i.ngOnInit(),262144&t.flags&&i.ngDoCheck(),o}(e,t,n);case 32:case 64:case 128:return function(e,t,n){for(var r=t.bindings,i=!1,o=0;o<n.length;o++)an(e,t,o,n[o])&&(i=!0);if(i){var s=Gt(e,t.nodeIndex),a=void 0;switch(201347067&t.flags){case 32:a=n;break;case 64:for(a={},o=0;o<n.length;o++)a[r[o].name]=n[o];break;case 128:var u=n[0],c=n.slice(1);a=u.transform.apply(u,c)}s.value=a}return i}(e,t,n);default:throw"unreachable"}}(e,t,r)}function ei(e){var t=e.def;if(4&t.nodeFlags)for(var n=0;n<t.nodes.length;n++){var r=t.nodes[n];if(4&r.flags){var i=Ht(e,n).template._projectedViews;if(i)for(var o=0;o<i.length;o++){var s=i[o];s.state|=32,ln(s,e)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function ti(e,t,n,r,i,o,s,a,u,c,l,f,h){return 0===n?function(e,t,n,r,i,o,s,a,u,c,l,f){var h=t.bindings.length;h>0&&un(e,t,0,n),h>1&&un(e,t,1,r),h>2&&un(e,t,2,i),h>3&&un(e,t,3,o),h>4&&un(e,t,4,s),h>5&&un(e,t,5,a),h>6&&un(e,t,6,u),h>7&&un(e,t,7,c),h>8&&un(e,t,8,l),h>9&&un(e,t,9,f)}(e,t,r,i,o,s,a,u,c,l,f,h):function(e,t,n){for(var r=0;r<n.length;r++)un(e,t,r,n[r])}(e,t,r),!1}function ni(e,t){if(Zt(e,t.nodeIndex).dirty)throw Jt(Qt.createDebugContext(e,t.nodeIndex),"Query "+t.query.id+" not dirty","Query "+t.query.id+" dirty",0!=(1&e.state))}function ri(e){if(!(128&e.state)){if(si(e,ii.Destroy),oi(e,ii.Destroy),Ir(e,131072),e.disposables)for(var t=0;t<e.disposables.length;t++)e.disposables[t]();!function(e){if(16&e.state){var t=hn(e);if(t){var n=t.template._projectedViews;n&&(Zn(n,n.indexOf(e)),Qt.dirtyParentQueries(e))}}}(e),e.renderer.destroyNode&&function(e){for(var t=e.def.nodes.length,n=0;n<t;n++){var r=e.def.nodes[n];1&r.flags?e.renderer.destroyNode(Ht(e,n).renderElement):2&r.flags?e.renderer.destroyNode(zt(e,n).renderText):(67108864&r.flags||134217728&r.flags)&&Zt(e,n).destroy()}}(e),vn(e)&&e.renderer.destroy(),e.state|=128}}var ii=function(){var e={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return e[e.CreateViewNodes]="CreateViewNodes",e[e.CheckNoChanges]="CheckNoChanges",e[e.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",e[e.CheckAndUpdate]="CheckAndUpdate",e[e.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",e[e.Destroy]="Destroy",e}();function oi(e,t){var n=e.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];33554432&i.flags?ai(Ht(e,r).componentView,t):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function si(e,t){var n=e.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];if(16777216&i.flags)for(var o=Ht(e,r).viewContainer._embeddedViews,s=0;s<o.length;s++)ai(o[s],t);else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function ai(e,t){var n=e.state;switch(t){case ii.CheckNoChanges:0==(128&n)&&(12==(12&n)?Yr(e):64&n&&ui(e,ii.CheckNoChangesProjectedViews));break;case ii.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Yr(e):64&n&&ui(e,t));break;case ii.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Xr(e):64&n&&ui(e,ii.CheckAndUpdateProjectedViews));break;case ii.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Xr(e):64&n&&ui(e,t));break;case ii.Destroy:ri(e);break;case ii.CreateViewNodes:Kr(e)}}function ui(e,t){si(e,t),oi(e,t)}function ci(e,t,n,r){if(e.def.nodeFlags&t&&e.def.nodeFlags&n)for(var i=e.def.nodes.length,o=0;o<i;o++){var s=e.def.nodes[o];if(s.flags&t&&s.flags&n)switch(Qt.setCurrentNode(e,s.nodeIndex),r){case 0:Nr(e,s);break;case 1:ni(e,s)}s.childFlags&t&&s.childFlags&n||(o+=s.childCount)}}var li=!1;function fi(e,t,n,r,i,o){return Gr(di(e,i,i.injector.get($e),t,n),r,o)}function hi(e,t,n,r,i,o){var s=i.injector.get($e),a=di(e,i,new Gi(s),t,n),u=ki(r);return Hi(Ii.create,Gr,null,[a,u,o])}function di(e,t,n,r,i){var o=t.injector.get(Vt),s=t.injector.get($);return{ngModule:t,injector:e,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:n.createRenderer(null,null),errorHandler:s}}function pi(e,t,n,r){var i=ki(n);return Hi(Ii.create,Wr,null,[e,t,i,r])}function vi(e,t,n,r){return n=_i.get(t.element.componentProvider.provider.token)||ki(n),Hi(Ii.create,Zr,null,[e,t,n,r])}function yi(e,t,n,r){return cr(e,t,n,function(e){var t=function(e){var t=!1,n=!1;return 0===mi.size?{hasOverrides:t,hasDeprecatedOverrides:n}:(e.providers.forEach(function(e){var r=mi.get(e.token);3840&e.flags&&r&&(t=!0,n=n||r.deprecatedBehavior)}),{hasOverrides:t,hasDeprecatedOverrides:n})}(e),n=t.hasDeprecatedOverrides;return t.hasOverrides?(function(e){for(var t=0;t<e.providers.length;t++){var r=e.providers[t];n&&(r.flags|=4096);var i=mi.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=_n(i.deps),r.value=i.value)}}(e=e.factory(function(){return Xt})),e):e}(r))}var mi=new Map,_i=new Map;function gi(e){mi.set(e.token,e)}function bi(e,t){var n=wn(wn(t.viewDefFactory).nodes[0].element.componentView);_i.set(e,n)}function wi(){mi.clear(),_i.clear()}function ki(e){if(0===mi.size)return e;var t=function(e){for(var t=[],n=null,r=0;r<e.nodes.length;r++){var i=e.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&mi.has(i.provider.token)&&(t.push(n.nodeIndex),n=null)}return t}(e);if(0===t.length)return e;e=e.factory(function(){return Xt});for(var n=0;n<t.length;n++)r(e,t[n]);return e;function r(e,t){for(var n=t+1;n<e.nodes.length;n++){var r=e.nodes[n];if(1&r.flags)return;if(3840&r.flags){var i=r.provider,o=mi.get(i.token);o&&(r.flags=-3841&r.flags|o.flags,i.deps=_n(o.deps),i.value=o.value)}}}}function xi(e,t,n,r,i,o,s,a,u,c,l,f,h){var d=e.def.nodes[t];return $r(e,d,n,r,i,o,s,a,u,c,l,f,h),224&d.flags?Gt(e,t).value:void 0}function Ci(e,t,n,r,i,o,s,a,u,c,l,f,h){var d=e.def.nodes[t];return ti(e,d,n,r,i,o,s,a,u,c,l,f,h),224&d.flags?Gt(e,t).value:void 0}function Ei(e){return Hi(Ii.detectChanges,Xr,null,[e])}function Si(e){return Hi(Ii.checkNoChanges,Yr,null,[e])}function Ti(e){return Hi(Ii.destroy,ri,null,[e])}var Oi,Pi,Ai,Ii=function(){var e={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return e[e.create]="create",e[e.detectChanges]="detectChanges",e[e.checkNoChanges]="checkNoChanges",e[e.destroy]="destroy",e[e.handleEvent]="handleEvent",e}();function Mi(e,t){Pi=e,Ai=t}function Ri(e,t,n,r){return Mi(e,t),Hi(Ii.handleEvent,e.def.handleEvent,null,[e,t,n,r])}function ji(e,t){if(128&e.state)throw Yt(Ii[Oi]);return Mi(e,Vi(e,0)),e.def.updateDirectives(function(e,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=e.def.nodes[n];return 0===t?Di(e,s,r,i):Fi(e,s,r,i),16384&s.flags&&Mi(e,Vi(e,n)),224&s.flags?Gt(e,s.nodeIndex).value:void 0},e)}function Ni(e,t){if(128&e.state)throw Yt(Ii[Oi]);return Mi(e,Bi(e,0)),e.def.updateRenderer(function(e,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=e.def.nodes[n];return 0===t?Di(e,s,r,i):Fi(e,s,r,i),3&s.flags&&Mi(e,Bi(e,n)),224&s.flags?Gt(e,s.nodeIndex).value:void 0},e)}function Di(e,t,n,r){if($r.apply(void 0,[e,t,n].concat(r))){var i=1===n?r[0]:r;if(16384&t.flags){for(var o={},s=0;s<t.bindings.length;s++){var a=t.bindings[s],u=i[s];8&a.flags&&(o[(h=a.nonMinifiedName,"ng-reflect-"+(h=h.replace(/[$@]/g,"_").replace(Ui,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"-"+e[1].toLowerCase()})))]=Li(u))}var c=t.parent,l=Ht(e,c.nodeIndex).renderElement;if(c.element.name)for(var f in o)null!=(u=o[f])?e.renderer.setAttribute(l,f,u):e.renderer.removeAttribute(l,f);else e.renderer.setValue(l,"bindings="+JSON.stringify(o,null,2))}}var h}function Fi(e,t,n,r){ti.apply(void 0,[e,t,n].concat(r))}var Ui=/([A-Z])/g;function Li(e){try{return null!=e?e.toString().slice(0,30):e}catch(e){return"[ERROR] Exception while trying to serialize the value"}}function Vi(e,t){for(var n=t;n<e.def.nodes.length;n++){var r=e.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function Bi(e,t){for(var n=t;n<e.def.nodes.length;n++){var r=e.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var qi=function(){function e(e,t){this.view=e,this.nodeIndex=t,null==t&&(this.nodeIndex=t=0),this.nodeDef=e.def.nodes[t];for(var n=this.nodeDef,r=e;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=dn(r),r=r.parent;this.elDef=n,this.elView=r}return Object.defineProperty(e.prototype,"elOrCompView",{get:function(){return Ht(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return ir(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providerTokens",{get:function(){var e=[];if(this.elDef)for(var t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){var n=this.elView.def.nodes[t];20224&n.flags&&e.push(n.provider.token),t+=n.childCount}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"references",{get:function(){var e={};if(this.elDef){zi(this.elView,this.elDef,e);for(var t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){var n=this.elView.def.nodes[t];20224&n.flags&&zi(this.elView,n,e),t+=n.childCount}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentRenderElement",{get:function(){var e=function(e){for(;e&&!vn(e);)e=e.parent;return e.parent?Ht(e.parent,dn(e).nodeIndex):null}(this.elOrCompView);return e?e.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?pn(this.view,this.nodeDef):pn(this.elView,this.elDef)},enumerable:!0,configurable:!0}),e.prototype.logError=function(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];2&this.nodeDef.flags?(t=this.view.def,n=this.nodeDef.nodeIndex):(t=this.elView.def,n=this.elDef.nodeIndex);var o=function(e,t){for(var n=-1,r=0;r<=t;r++)3&e.nodes[r].flags&&n++;return n}(t,n),s=-1;t.factory(function(){return++s===o?(t=e.error).bind.apply(t,[e].concat(r)):Xt;var t}),s<o&&(e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),e.error.apply(e,r))},e}();function zi(e,t,n){for(var r in t.references)n[r]=Fr(e,t,t.references[r])}function Hi(e,t,n,r){var i=Oi,o=Pi,s=Ai;try{Oi=e;var a=t.apply(n,r);return Pi=o,Ai=s,Oi=i,a}catch(e){if(K(e)||!Pi)throw e;throw function(e,t){return e instanceof Error||(e=new Error(e.toString())),Kt(e,t),e}(e,Wi())}}function Wi(){return Pi?new qi(Pi,Ai):null}var Gi=function(){function e(e){this.delegate=e}return e.prototype.createRenderer=function(e,t){return new Zi(this.delegate.createRenderer(e,t))},e.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},e.prototype.end=function(){this.delegate.end&&this.delegate.end()},e.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},e}(),Zi=function(){function e(e){this.delegate=e,this.data=this.delegate.data}return e.prototype.destroyNode=function(e){!function(e){lt.delete(e.nativeNode)}(ft(e)),this.delegate.destroyNode&&this.delegate.destroyNode(e)},e.prototype.destroy=function(){this.delegate.destroy()},e.prototype.createElement=function(e,t){var n=this.delegate.createElement(e,t),r=Wi();if(r){var i=new at(n,null,r);i.name=e,ht(i)}return n},e.prototype.createComment=function(e){var t=this.delegate.createComment(e),n=Wi();return n&&ht(new st(t,null,n)),t},e.prototype.createText=function(e){var t=this.delegate.createText(e),n=Wi();return n&&ht(new st(t,null,n)),t},e.prototype.appendChild=function(e,t){var n=ft(e),r=ft(t);n&&r&&n instanceof at&&n.addChild(r),this.delegate.appendChild(e,t)},e.prototype.insertBefore=function(e,t,n){var r=ft(e),i=ft(t),o=ft(n);r&&i&&r instanceof at&&r.insertBefore(o,i),this.delegate.insertBefore(e,t,n)},e.prototype.removeChild=function(e,t){var n=ft(e),r=ft(t);n&&r&&n instanceof at&&n.removeChild(r),this.delegate.removeChild(e,t)},e.prototype.selectRootElement=function(e){var t=this.delegate.selectRootElement(e),n=Wi();return n&&ht(new at(t,null,n)),t},e.prototype.setAttribute=function(e,t,n,r){var i=ft(e);i&&i instanceof at&&(i.attributes[r?r+":"+t:t]=n),this.delegate.setAttribute(e,t,n,r)},e.prototype.removeAttribute=function(e,t,n){var r=ft(e);r&&r instanceof at&&(r.attributes[n?n+":"+t:t]=null),this.delegate.removeAttribute(e,t,n)},e.prototype.addClass=function(e,t){var n=ft(e);n&&n instanceof at&&(n.classes[t]=!0),this.delegate.addClass(e,t)},e.prototype.removeClass=function(e,t){var n=ft(e);n&&n instanceof at&&(n.classes[t]=!1),this.delegate.removeClass(e,t)},e.prototype.setStyle=function(e,t,n,r){var i=ft(e);i&&i instanceof at&&(i.styles[t]=n),this.delegate.setStyle(e,t,n,r)},e.prototype.removeStyle=function(e,t,n){var r=ft(e);r&&r instanceof at&&(r.styles[t]=null),this.delegate.removeStyle(e,t,n)},e.prototype.setProperty=function(e,t,n){var r=ft(e);r&&r instanceof at&&(r.properties[t]=n),this.delegate.setProperty(e,t,n)},e.prototype.listen=function(e,t,n){if("string"!=typeof e){var r=ft(e);r&&r.listeners.push(new function(e,t){this.name=e,this.callback=t}(t,n))}return this.delegate.listen(e,t,n)},e.prototype.parentNode=function(e){return this.delegate.parentNode(e)},e.prototype.nextSibling=function(e){return this.delegate.nextSibling(e)},e.prototype.setValue=function(e,t){return this.delegate.setValue(e,t)},e}();function Qi(e,t,n){return new Ki(e,t,n)}var Ji,Ki=function(e){function t(t,n,r){var i=e.call(this)||this;return i.moduleType=t,i._bootstrapComponents=n,i._ngModuleDefFactory=r,i}return Object(r.__extends)(t,e),t.prototype.create=function(e){!function(){if(!li){li=!0;var e=We()?{setCurrentNode:Mi,createRootView:hi,createEmbeddedView:pi,createComponentView:vi,createNgModuleRef:yi,overrideProvider:gi,overrideComponentView:bi,clearOverrides:wi,checkAndUpdateView:Ei,checkNoChangesView:Si,destroyView:Ti,createDebugContext:function(e,t){return new qi(e,t)},handleEvent:Ri,updateDirectives:ji,updateRenderer:Ni}:{setCurrentNode:function(){},createRootView:fi,createEmbeddedView:Wr,createComponentView:Zr,createNgModuleRef:cr,overrideProvider:Xt,overrideComponentView:Xt,clearOverrides:Xt,checkAndUpdateView:Xr,checkNoChangesView:Yr,destroyView:ri,createDebugContext:function(e,t){return new qi(e,t)},handleEvent:function(e,t,n,r){return e.def.handleEvent(e,t,n,r)},updateDirectives:function(e,t){return e.def.updateDirectives(0===t?xi:Ci,e)},updateRenderer:function(e,t){return e.def.updateRenderer(0===t?xi:Ci,e)}};Qt.setCurrentNode=e.setCurrentNode,Qt.createRootView=e.createRootView,Qt.createEmbeddedView=e.createEmbeddedView,Qt.createComponentView=e.createComponentView,Qt.createNgModuleRef=e.createNgModuleRef,Qt.overrideProvider=e.overrideProvider,Qt.overrideComponentView=e.overrideComponentView,Qt.clearOverrides=e.clearOverrides,Qt.checkAndUpdateView=e.checkAndUpdateView,Qt.checkNoChangesView=e.checkNoChangesView,Qt.destroyView=e.destroyView,Qt.resolveDep=Or,Qt.createDebugContext=e.createDebugContext,Qt.handleEvent=e.handleEvent,Qt.updateDirectives=e.updateDirectives,Qt.updateRenderer=e.updateRenderer,Qt.dirtyParentQueries=jr}}();var t=wn(this._ngModuleDefFactory);return Qt.createNgModuleRef(this.moduleType,e||R.NULL,this._bootstrapComponents,t)},t}(function(){});"undefined"==typeof ngDevMode&&("undefined"!=typeof window&&(window.ngDevMode=!0),"undefined"!=typeof self&&(self.ngDevMode=!0),"undefined"!=typeof e&&(e.ngDevMode=!0)),Ji=function(e,t,n){return{parent:Ji,id:null,node:null,data:[],ngStaticData:[],cleanup:null,renderer:null,child:null,tail:null,next:null,bindingStartIndex:null,creationMode:!0,viewHookStartIndex:null}}()}).call(t,n("DuR2"))},Wl86:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwilsockUnavailableError=t.Transport=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=(r=n("0/AJ"))&&r.__esModule?r:{default:r};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n,r){return{to:function(e,t){var n=function(e){var t=e.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)(\/[^?#]*)(\?[^#]*|)(#.*|)$/);if(t){var n={protocol:t[1],host:t[2],hostname:t[3],port:t[4],pathname:t[5],search:t[6],hash:t[7]};if(n.search.length>0){var r=n.search.substring(1);n.params=r.split("&").map(function(e){return e.split("=")}).reduce(function(e,t){return e.hasOwnProperty(t[0])?Array.isArray(e[t[0]])?e[t[0]].push(t[1]):e[t[0]]=[e[t[0]],t[1]]:e[t[0]]=t[1],e},{})}return n}throw new Error("Incorrect URI: "+e)}(t),r={method:e,host:n.host,path:n.pathname};return n.params&&(r.params=n.params),r}(e,t),headers:n,body:r}}function u(e){return{status:e.header.http_status,headers:e.header.http_headers,body:e.body}}function c(e,t,n){return{url:e,headers:t,body:n}}function l(e){try{e.body=JSON.parse(e.body)}catch(e){}return e}function f(e){for(var t=Object.keys(e.headers),n=t.length,r={};n--;){var i=t[n];r[i.toLowerCase()]=e.headers[i]}return e.headers=r,e}var h=function(e){function t(){return s(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)),t}(),d=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,e),Object.defineProperties(this,{_activeGetRequests:{value:new Map},_twilsock:{value:t},_http:{value:o.default},_twilsockIsAvailable:{get:function(){return n._twilsock&&n._twilsock.isConnected}},_concurrentHttpRequestLimit:{value:r.concurrentHttpRequestLimit||1/0},_concurrentHttpRequestCount:{value:0,writable:!0},_requestQueue:{value:[]}}),t&&(t.connect(),t.on("connected",function(){return n._processQueuedRequests()}))}return i(e,[{key:"get",value:function(e,t,n){var r=this;if(this._activeGetRequests.has(e))return this._activeGetRequests.get(e);var i=this._get(e,t,n).then(function(t){return r._activeGetRequests.delete(e),t}).catch(function(t){throw r._activeGetRequests.delete(e),t});return this._activeGetRequests.set(e,i),i}},{key:"_oneOfBasedOnChannelAvailability",value:function(e,t){var n,r,i=this;return(n=e,r=n.sendDirectHttp,i._twilsockIsAvailable?(0,n.sendViaTwilsock)():t?Promise.reject(new h):i._concurrentHttpRequestCount>=i._concurrentHttpRequestLimit?new Promise(function(t,n){return i._requestQueue.push({sendingOptions:e,resolve:t,reject:n})}):(i._concurrentHttpRequestCount++,r().then(function(e){return i._concurrentHttpRequestCount--,i._processQueuedRequests(),e}).catch(function(e){throw i._concurrentHttpRequestCount--,i._processQueuedRequests(),e}))).then(f)}},{key:"_processQueuedRequests",value:function(){for(;this._requestQueue.length>0&&(this._twilsockIsAvailable||this._concurrentHttpRequestCount<this._concurrentHttpRequestLimit);){var e=this._requestQueue.shift();this._oneOfBasedOnChannelAvailability(e.sendingOptions,!1).then(e.resolve).catch(e.reject)}}},{key:"_get",value:function(e,t,n){var r=this;return this._oneOfBasedOnChannelAvailability({sendViaTwilsock:function(){return r._twilsock.send(a("GET",e,t)).then(u)},sendDirectHttp:function(){return r._http.get(c(e,t)).then(l)}},n)}},{key:"post",value:function(e,t,n,r){var i=this;return this._oneOfBasedOnChannelAvailability({sendViaTwilsock:function(){return i._twilsock.send(a("POST",e,t,n)).then(u)},sendDirectHttp:function(){return i._http.post(c(e,t,n)).then(l)}},r)}},{key:"put",value:function(e,t,n,r){var i=this;return this._oneOfBasedOnChannelAvailability({sendViaTwilsock:function(){return i._twilsock.send(a("PUT",e,t,n)).then(u)},sendDirectHttp:function(){return i._http.put(c(e,t,n)).then(l)}},r)}},{key:"delete",value:function(e,t,n){var r=this;return this._oneOfBasedOnChannelAvailability({sendViaTwilsock:function(){return r._twilsock.send(a("DELETE",e,t)).then(u)},sendDirectHttp:function(){return r._http.delete(c(e,t)).then(l)}},n)}}]),e}();t.default=d,t.Transport=d,t.TwilsockUnavailableError=h},WuwA:function(e,t){e.exports=window.FormData},WyG8:function(e,t,n){var r;e.exports=function e(t,n,i){function o(a,u){if(!n[a]){if(!t[a]){if(!u&&"function"==typeof r&&r)return r(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){return o(t[a][1][e]||e)},l,l.exports,e,t,n,i)}return n[a].exports}for(var s="function"==typeof r&&r,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){"use strict";var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,r=[],i=e[Symbol.iterator]();!(n=i.next()).done&&(r.push(n.value),!t||r.length!==t););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};n.isDestructive=function(e){var t=e.op;return"remove"===t||"replace"===t||"copy"===t||"move"===t},n.subtract=s,n.intersection=a,n.objectType=u,n.diffArrays=c,n.diffObjects=l,n.diffValues=f,n.diffAny=h,Object.defineProperty(n,"__esModule",{value:!0});var o=e("./equal").compare;function s(e,t){var n={};for(var r in e)n[r]=1;for(var i in t)delete n[i];return Object.keys(n)}function a(e){var t={};e.forEach(function(e){for(var n in e)t[n]=(t[n]||0)+1});var n=e.length;for(var r in t)t[r]<n&&delete t[r];return Object.keys(t)}function u(e){return void 0===e?"undefined":null===e?"null":Array.isArray(e)?"array":typeof e}function c(e,t,n){var s={"0,0":{operations:[],cost:0}},a=isNaN(e.length)||e.length<=0?0:e.length,u=isNaN(t.length)||t.length<=0?0:t.length,c=function n(r,i){var a=s[r+","+i];if(void 0===a){if(o(e[r-1],t[i-1]))a=n(r-1,i-1);else{var u=[];if(r>0){var c=n(r-1,i);u.push({operations:c.operations.concat({op:"remove",index:r-1}),cost:c.cost+1})}if(i>0){var l=n(r,i-1);u.push({operations:l.operations.concat({op:"add",index:r-1,value:t[i-1]}),cost:l.cost+1})}if(r>0&&i>0){var f=n(r-1,i-1);u.push({operations:f.operations.concat({op:"replace",index:r-1,original:e[r-1],value:t[i-1]}),cost:f.cost+1})}a=u.sort(function(e,t){return e.cost-t.cost})[0]}s[r+","+i]=a}return a}(a,u).operations.reduce(function(e,t){var o=r(e,2),s=o[0],u=o[1];if(function(e){return"add"===e.op}(t)){var c=t.index+1+u,l=c<a+u?String(c):"-",f={op:t.op,path:n.add(l).toString(),value:t.value};return[s.concat(f),u+1]}if(function(e){return"remove"===e.op}(t))return f={op:t.op,path:n.add(String(t.index+u)).toString()},[s.concat(f),u-1];var d=n.add(String(t.index+u)),p=h(t.original,t.value,d);return[s.concat.apply(s,i(p)),u]},[[],0]);return r(c,2)[0]}function l(e,t,n){var r=[];return s(e,t).forEach(function(e){r.push({op:"remove",path:n.add(e).toString()})}),s(t,e).forEach(function(e){r.push({op:"add",path:n.add(e).toString(),value:t[e]})}),a([e,t]).forEach(function(o){r.push.apply(r,i(h(e[o],t[o],n.add(o))))}),r}function f(e,t,n){return o(e,t)?[]:[{op:"replace",path:n.toString(),value:t}]}function h(e,t,n){var r=u(e),i=u(t);return"array"==r&&"array"==i?c(e,t,n):"object"==r&&"object"==i?l(e,t,n):f(e,t,n)}},{"./equal":2}],2:[function(e,t,n){"use strict";function r(e,t){return e.length===t.length&&function(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push([e[r],t[r]]);return n}(e,t).every(function(e){return i(e[0],e[1])})}function i(e,t){return e===t||(Array.isArray(e)&&Array.isArray(t)?r(e,t):Object(e)===e&&Object(t)===t&&function(e,t){var n=Object.keys(e);return!!r(n,Object.keys(t))&&n.every(function(n){return i(e[n],t[n])})}(e,t))}n.compare=i,Object.defineProperty(n,"__esModule",{value:!0})},{}],3:[function(e,t,n){"use strict";var r=function e(t,n,r){var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i&&i.writable)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},i=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(n,"__esModule",{value:!0}),n.MissingError=function(e){function t(e){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"Value required at path: "+e),this.path=e,this.name=this.constructor.name}return i(t,e),t}(Error),n.InvalidOperationError=function(e){function t(e){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"Invalid operation: "+e),this.op=e,this.name=this.constructor.name}return i(t,e),t}(Error),n.TestError=function(e){function t(e,n){o(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"Test failed: "+e+" != "+n),this.actual=e,this.expected=n,this.name=this.constructor.name,this.actual=e,this.expected=n}return i(t,e),t}(Error)},{}],4:[function(e,t,n){"use strict";n.applyPatch=function(e,t){return t.map(function(t){var n=s[t.op];return void 0===n?new i(t.op):n(e,t)})},n.createPatch=function(e,t){var n=new o;return u(e,t,n)},n.createTests=function(e,t){var n=new Array;return t.filter(c).forEach(function(t){var r=l(e,t.path);if(r&&n.push(r),"from"in t){var i=l(e,t.from);i&&n.push(i)}}),n},Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("./errors").InvalidOperationError,o=e("./pointer").Pointer,s=(r=e("./patch"))&&r.__esModule?r:{default:r},a=e("./diff"),u=a.diffAny,c=a.isDestructive;function l(e,t){var n=o.fromJSON(t).evaluate(e);if(void 0!==n)return{op:"test",path:t,value:n.value}}},{"./diff":1,"./errors":3,"./patch":5,"./pointer":6}],5:[function(e,t,n){"use strict";n.add=function(e,t){var n=r.fromJSON(t.path).evaluate(e);return void 0===n.parent?new s(t.path):(u(n.parent,n.key,t.value),null)},n.remove=function(e,t){var n=r.fromJSON(t.path).evaluate(e);return void 0===n.value?new s(t.path):(c(n.parent,n.key),null)},n.replace=function(e,t){var n=r.fromJSON(t.path).evaluate(e);return void 0===n.value?new s(t.path):(n.parent[n.key]=t.value,null)},n.move=function(e,t){var n=r.fromJSON(t.from).evaluate(e);if(void 0===n.value)return new s(t.from);var i=r.fromJSON(t.path).evaluate(e);return void 0===i.parent?new s(t.path):(c(n.parent,n.key),u(i.parent,i.key,n.value),null)},n.copy=function(e,t){var n=r.fromJSON(t.from).evaluate(e);if(void 0===n.value)return new s(t.from);var i=r.fromJSON(t.path).evaluate(e);return void 0===i.parent?new s(t.path):(c(n.parent,n.key),u(i.parent,i.key,n.value),null)},n.test=function(e,t){var n=r.fromJSON(t.path).evaluate(e);return i(n.value,t.value)?null:new a(n.value,t.value)},Object.defineProperty(n,"__esModule",{value:!0});var r=e("./pointer").Pointer,i=e("./equal").compare,o=e("./errors"),s=o.MissingError,a=o.TestError;function u(e,t,n){Array.isArray(e)?"-"==t?e.push(n):e.splice(t,0,n):e[t]=n}function c(e,t){Array.isArray(e)?e.splice(t,1):delete e[t]}},{"./equal":2,"./errors":3,"./pointer":6}],6:[function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function o(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function s(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Object.defineProperty(n,"__esModule",{value:!0}),n.Pointer=function(){function e(){var t=void 0===arguments[0]?[""]:arguments[0];i(this,e),this.tokens=t}return r(e,{toString:{value:function(){return this.tokens.map(s).join("/")}},evaluate:{value:function(e){for(var t=null,n=null,r=1,i=this.tokens.length;r<i;r++)n=this.tokens[r],e=((t=e)||{})[n];return{parent:t,key:n,value:e}}},push:{value:function(e){this.tokens.push(e)}},add:{value:function(t){return new e(this.tokens.concat(String(t)))}}},{fromJSON:{value:function(t){var n=t.split("/").map(o);if(""!==n[0])throw new Error("Invalid JSON Pointer: "+t);return new e(n)}}}),e}()},{}]},{},[4])(4)},X8DO:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},XHGe:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n("HSQo")),i=s(n("Zrlr")),o=s(n("wxAW"));function s(e){return e&&e.__esModule?e:{default:e}}var a="wss://tsock.twilio.com",u="/v3/wsconnect",c=function(){function e(t,n){var o=this;(0,i.default)(this,e),(0,r.default)(this,{_twilsockWsHost:{value:(((n=n||{}).Twilsock||{}).uri||n.wsServer||a)+u},_token:{value:t,writable:!0},twilsockUri:{get:function(){return o._twilsockWsHost}},token:{get:function(){return o._token}}})}return(0,o.default)(e,[{key:"updateToken",value:function(e){this._token=e}}]),e}();t.default=c,e.exports=t.default},XVn5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n("c/Tr")),i=o(n("BvyM"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return[e].concat((0,r.default)(t))}t.default={setLevel:function(e){i.default.setLevel(e)},trace:function(){i.default.trace.apply(null,s("Twilsock T:",arguments))},debug:function(){i.default.debug.apply(null,s("Twilsock D:",arguments))},info:function(){i.default.info.apply(null,s("Twilsock I:",arguments))},warn:function(){i.default.warn.apply(null,s("Twilsock W:",arguments))},error:function(){i.default.error.apply(null,s("Twilsock E:",arguments))}},e.exports=t.default},Xc4G:function(e,t,n){var r=n("lktj"),i=n("1kS7"),o=n("NpIQ");e.exports=function(e){var t=r(e),n=i.f;if(n)for(var s,a=n(e),u=o.f,c=0;a.length>c;)u.call(e,s=a[c++])&&t.push(s);return t}},Xd32:function(e,t,n){n("+tPU"),n("zQR9"),e.exports=n("5PlU")},XeUa:function(e,t,n){"use strict";var r=o(n("Zrlr")),i=o(n("wxAW"));function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s="https://mcs.us1.twilio.com",a=function(){function e(t,n,i){(0,r.default)(this,e),this.options=i.MCS||i||{},this.token=t,this.baseUrl=("undefined"==typeof this.options.realm?s:"https://mcs."+this.options.realm+".twilio.com")+n}return(0,i.default)(e,[{key:"updateToken",value:function(e){this.token=e}},{key:"backoffConfigOverride",get:function(){return this.options.backoffConfigOverride}},{key:"retryWhenThrottledOverride",get:function(){return this.options.retryWhenThrottledOverride}}],[{key:"backoffConfigDefault",get:function(){return{min:1e3,max:4e3,maxAttemptsCount:3}}},{key:"retryWhenThrottledDefault",get:function(){return!0}}]),e}();t.Configuration=a},Xjd4:function(e,t,n){n("9Bbf")("Map")},Xxa5:function(e,t,n){e.exports=n("jyFz")},Y39h:function(e,t,n){"use strict";var r=o(n("Zrlr")),i=o(n("wxAW"));function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n("P35s").Logger.scope("UserDescriptor"),a=function(){function e(t,n){(0,r.default)(this,e),this.services=t,this.descriptor=n,this.identity=n.identity,this.friendlyName=n.friendly_name,this.attributes=function(e){try{return JSON.parse(e)}catch(e){s.warn("Failed to parse user attributes",e)}return{}}(n.attributes),this.online=n.is_online,this.notifiable=n.is_notifiable}return(0,i.default)(e,[{key:"subscribe",value:function(){return this.services.users.getUser(this.identity,this.descriptor.sync_unique_name)}},{key:"_getDescriptor",value:function(){return this.descriptor}}]),e}();t.UserDescriptor=a},YaPU:function(e,t,n){"use strict";var r=n("AMGY"),i=n("OVmG"),o=n("tLDX"),s=n("t7NR"),a=n("+CnV"),u=n("f9aG");n.d(t,"a",function(){return c});var c=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,a=function(e,t,n){if(e){if(e instanceof i.a)return e;if(e[o.a])return e[o.a]()}return e||t||n?new i.a(e,t,n):new i.a(s.a)}(e,t,n);if(r?r.call(a,this.source):a.add(this.source||!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var n=this;if(t||(r.a.Rx&&r.a.Rx.config&&r.a.Rx.config.Promise?t=r.a.Rx.config.Promise:r.a.Promise&&(t=r.a.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,r){var i;i=n.subscribe(function(t){if(i)try{e(t)}catch(e){r(e),i.unsubscribe()}else e(t)},r,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[a.a]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 0===e.length?this:Object(u.b)(e)(this)},e.prototype.toPromise=function(e){var t=this;if(e||(r.a.Rx&&r.a.Rx.config&&r.a.Rx.config.Promise?e=r.a.Rx.config.Promise:r.a.Promise&&(e=r.a.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}()},Yobk:function(e,t,n){var r=n("77Pl"),i=n("qio6"),o=n("xnc9"),s=n("ax3d")("IE_PROTO"),a=function(){},u=function(){var e,t=n("ON07")("iframe"),r=o.length;for(t.style.display="none",n("RPLV").appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(a.prototype=r(e),n=new a,a.prototype=null,n[s]=e):n=u(),void 0===t?n:i(n,t)}},YsKZ:function(e,t,n){"use strict";var r=f(n("Dd8w")),i=f(n("Xxa5")),o=f(n("Zx67")),s=f(n("Zrlr")),a=f(n("wxAW")),u=f(n("zwoO")),c=f(n("Pf15")),l=f(n("//Fk"));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e,t,n,r){return new(n||(n=l.default))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var d=n("JuVV"),p=n("xIvG"),v=n("urP9"),y=n("eoM1"),m=n("FTGv"),_=function(e){function t(e,n,r){(0,s.default)(this,t);var i=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,r));return i.isDeleted=!1,i.updateMergingQueue=new y.MergingQueue(function(e,t){return"number"==typeof t.ttl?{ttl:t.ttl}:e}),i.descriptor=n,i.descriptor.data=i.descriptor.data||{},i.descriptor.date_updated=new Date(i.descriptor.date_updated),i}return(0,c.default)(t,p.SyncEntity),(0,a.default)(t,[{key:"_update",value:function(e){switch(e.date_created=new Date(e.date_created),e.type){case"document_updated":e.id>this.lastEventId?(this.descriptor.last_event_id=e.id,this.descriptor.revision=e.document_revision,this.descriptor.date_updated=e.date_created,this.descriptor.data=e.document_data,this.emit("updated",{value:e.document_data,isLocal:!1}),this.services.storage.update(this.type,this.sid,this.uniqueName,{last_event_id:e.id,revision:e.document_revision,date_updated:e.date_created,data:e.document_data})):d.default.trace("Document update skipped, current:",this.lastEventId,", remote:",e.id);break;case"document_removed":this.onRemoved(!1)}}},{key:"set",value:function(e,t){return h(this,void 0,void 0,i.default.mark(function n(){var r,o=this;return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return v.validateOptionalTtl((r=t||{}).ttl),n.abrupt("return",this.updateMergingQueue.squashAndAdd(r,function(t){return o._setUnconditionally(e,t.ttl)}));case 3:case"end":return n.stop()}},n,this)}))}},{key:"mutate",value:function(e,t){return h(this,void 0,void 0,i.default.mark(function n(){var r,o=this;return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return v.validateOptionalTtl((r=t||{}).ttl),n.abrupt("return",this.updateMergingQueue.add(r,function(t){return o._setWithIfMatch(e,t.ttl)}));case 3:case"end":return n.stop()}},n,this)}))}},{key:"update",value:function(e,t){return h(this,void 0,void 0,i.default.mark(function n(){return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.mutate(function(t){return(0,r.default)(t,e)},t));case 1:case"end":return n.stop()}},n,this)}))}},{key:"setTtl",value:function(e){return h(this,void 0,void 0,i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return v.validateMandatoryTtl(e),t.next=3,this._postUpdateToServer({ttl:e});case 3:this.descriptor.date_expires=t.sent.date_expires;case 5:case"end":return t.stop()}},t,this)}))}},{key:"_setUnconditionally",value:function(e,t){return h(this,void 0,void 0,i.default.mark(function n(){return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this._postUpdateToServer({data:e,revision:void 0,ttl:t});case 2:return this._handleSuccessfulUpdateResult(n.sent),n.abrupt("return",this.value);case 5:case"end":return n.stop()}},n,this)}))}},{key:"_setWithIfMatch",value:function(e,t){return h(this,void 0,void 0,i.default.mark(function n(){var r,o;return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=e(v.deepClone(this.value)))){n.next=22;break}return o=this.revision,n.prev=3,n.next=6,this._postUpdateToServer({data:r,revision:o,ttl:t});case 6:return this._handleSuccessfulUpdateResult(n.sent),n.abrupt("return",this.value);case 11:if(n.prev=11,n.t0=n.catch(3),412!==n.t0.status){n.next=19;break}return n.next=16,this._softSync();case 16:return n.abrupt("return",this._setWithIfMatch(e));case 19:throw n.t0;case 20:n.next=23;break;case 22:return n.abrupt("return",this.value);case 23:case"end":return n.stop()}},n,this,[[3,11]])}))}},{key:"_handleSuccessfulUpdateResult",value:function(e){e.last_event_id>this.descriptor.last_event_id&&(this.descriptor.revision=e.revision,this.descriptor.data=e.data,this.descriptor.last_event_id=e.last_event_id,this.descriptor.date_expires=e.date_expires,this.descriptor.date_updated=new Date(e.date_updated),this.services.storage.update(this.type,this.sid,this.uniqueName,{last_event_id:e.last_event_id,revision:e.revision,date_updated:e.date_updated,data:e.data}),this.emit("updated",{value:this.value,isLocal:!0}))}},{key:"_postUpdateToServer",value:function(e){return h(this,void 0,void 0,i.default.mark(function t(){var n,r,o;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isDeleted){t.next=17;break}return n={data:e.data},"number"==typeof e.ttl&&(n.ttl=e.ttl),r=e.revision,t.prev=4,t.next=7,this.services.network.post(this.uri,n,r);case 7:return t.abrupt("return",{revision:(o=t.sent).body.revision,data:e.data,last_event_id:o.body.last_event_id,date_updated:o.body.date_updated,date_expires:o.body.date_expires});case 11:throw t.prev=11,t.t0=t.catch(4),404===t.t0.status&&this.onRemoved(!1),t.t0;case 15:t.next=18;break;case 17:return t.abrupt("return",l.default.reject(new m.SyncError("The Document has been removed",404,54100)));case 18:case"end":return t.stop()}},t,this,[[4,11]])}))}},{key:"_softSync",value:function(){return h(this,void 0,void 0,i.default.mark(function e(){var t=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.services.network.get(this.uri).then(function(e){return t._update({type:"document_updated",id:e.body.last_event_id,document_revision:e.body.revision,document_data:e.body.data,date_created:e.body.date_updated}),t}).catch(function(e){404===e.status?t.onRemoved(!1):d.default.error("Can't get updates for "+t.sid+":",e)}));case 1:case"end":return e.stop()}},e,this)}))}},{key:"onRemoved",value:function(e){this.isDeleted||(this.isDeleted=!0,this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.emit("removed",{isLocal:e}))}},{key:"removeDocument",value:function(){return h(this,void 0,void 0,i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDeleted){e.next=6;break}return e.next=3,this.services.network.delete(this.uri);case 3:this.onRemoved(!0),e.next=7;break;case 6:return e.abrupt("return",l.default.reject(new m.SyncError("The Document has been removed",404,54100)));case 7:case"end":return e.stop()}},e,this)}))}},{key:"uri",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"type",get:function(){return"document"}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"value",get:function(){return this.descriptor.data}},{key:"dateUpdated",get:function(){return this.descriptor.date_updated}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}}],[{key:"type",get:function(){return"document"}}]),t}();t.SyncDocument=_,t.default=_},ZNPb:function(e,t,n){var r;r={VERSION:"2.4.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(e,t){var n="string"==typeof e.initial?{state:e.initial}:e.initial,i=e.terminal||e.final,o=t||e.target||{},s=e.events||[],a=e.callbacks||{},u={},c={},l=function(e){var t=Array.isArray(e.from)?e.from:e.from?[e.from]:[r.WILDCARD];u[e.name]=u[e.name]||{};for(var n=0;n<t.length;n++)c[t[n]]=c[t[n]]||[],c[t[n]].push(e.name),u[e.name][t[n]]=e.to||t[n];e.to&&(c[e.to]=c[e.to]||[])};n&&(n.event=n.event||"startup",l({name:n.event,from:"none",to:n.state}));for(var f=0;f<s.length;f++)l(s[f]);for(var h in u)u.hasOwnProperty(h)&&(o[h]=r.buildEvent(h,u[h]));for(var h in a)a.hasOwnProperty(h)&&(o[h]=a[h]);return o.current="none",o.is=function(e){return Array.isArray(e)?e.indexOf(this.current)>=0:this.current===e},o.can=function(e){return!this.transition&&void 0!==u[e]&&(u[e].hasOwnProperty(this.current)||u[e].hasOwnProperty(r.WILDCARD))},o.cannot=function(e){return!this.can(e)},o.transitions=function(){return(c[this.current]||[]).concat(c[r.WILDCARD]||[])},o.isFinished=function(){return this.is(i)},o.error=e.error||function(e,t,n,r,i,o,s){throw s||o},o.states=function(){return Object.keys(c).sort()},n&&!n.defer&&o[n.event](),o},doCallback:function(e,t,n,i,o,s){if(t)try{return t.apply(e,[n,i,o].concat(s))}catch(t){return e.error(n,i,o,s,r.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",t)}},beforeAnyEvent:function(e,t,n,i,o){return r.doCallback(e,e.onbeforeevent,t,n,i,o)},afterAnyEvent:function(e,t,n,i,o){return r.doCallback(e,e.onafterevent||e.onevent,t,n,i,o)},leaveAnyState:function(e,t,n,i,o){return r.doCallback(e,e.onleavestate,t,n,i,o)},enterAnyState:function(e,t,n,i,o){return r.doCallback(e,e.onenterstate||e.onstate,t,n,i,o)},changeState:function(e,t,n,i,o){return r.doCallback(e,e.onchangestate,t,n,i,o)},beforeThisEvent:function(e,t,n,i,o){return r.doCallback(e,e["onbefore"+t],t,n,i,o)},afterThisEvent:function(e,t,n,i,o){return r.doCallback(e,e["onafter"+t]||e["on"+t],t,n,i,o)},leaveThisState:function(e,t,n,i,o){return r.doCallback(e,e["onleave"+n],t,n,i,o)},enterThisState:function(e,t,n,i,o){return r.doCallback(e,e["onenter"+i]||e["on"+i],t,n,i,o)},beforeEvent:function(e,t,n,i,o){if(!1===r.beforeThisEvent(e,t,n,i,o)||!1===r.beforeAnyEvent(e,t,n,i,o))return!1},afterEvent:function(e,t,n,i,o){r.afterThisEvent(e,t,n,i,o),r.afterAnyEvent(e,t,n,i,o)},leaveState:function(e,t,n,i,o){var s=r.leaveThisState(e,t,n,i,o),a=r.leaveAnyState(e,t,n,i,o);return!1!==s&&!1!==a&&(r.ASYNC===s||r.ASYNC===a?r.ASYNC:void 0)},enterState:function(e,t,n,i,o){r.enterThisState(e,t,n,i,o),r.enterAnyState(e,t,n,i,o)},buildEvent:function(e,t){return function(){var n=this.current,i=t[n]||(t[r.WILDCARD]!=r.WILDCARD?t[r.WILDCARD]:n)||n,o=Array.prototype.slice.call(arguments);if(this.transition)return this.error(e,n,i,o,r.Error.PENDING_TRANSITION,"event "+e+" inappropriate because previous transition did not complete");if(this.cannot(e))return this.error(e,n,i,o,r.Error.INVALID_TRANSITION,"event "+e+" inappropriate in current state "+this.current);if(!1===r.beforeEvent(this,e,n,i,o))return r.Result.CANCELLED;if(n===i)return r.afterEvent(this,e,n,i,o),r.Result.NOTRANSITION;var s=this;this.transition=function(){return s.transition=null,s.current=i,r.enterState(s,e,n,i,o),r.changeState(s,e,n,i,o),r.afterEvent(s,e,n,i,o),r.Result.SUCCEEDED},this.transition.cancel=function(){s.transition=null,r.afterEvent(s,e,n,i,o)};var a=r.leaveState(this,e,n,i,o);return!1===a?(this.transition=null,r.Result.CANCELLED):r.ASYNC===a?r.Result.PENDING:this.transition?this.transition():void 0}}},"undefined"!=typeof e&&e.exports&&(t=e.exports=r),t.StateMachine=r},ZaQb:function(e,t,n){var r=n("EqjI"),i=n("77Pl"),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n("+ZMJ")(Function.call,n("LKZe").f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},Zrlr:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},Zx67:function(e,t,n){e.exports={default:n("fS6E"),__esModule:!0}},Zzip:function(e,t,n){e.exports={default:n("/n6Q"),__esModule:!0}},ZztE:function(e,t,n){"use strict";var r=o(n("Zrlr")),i=o(n("wxAW"));function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s="https://aim.twilio.com",a=function(){function e(t,n){(0,r.default)(this,e),this.options=(n=n||{}).Chat||n.IPMessaging||n||{};var i=this.options.apiUri||this.options.typingUri||s;this.token=t,this.baseUrl=i}return(0,i.default)(e,[{key:"updateToken",value:function(e){this.token=e}},{key:"typingIndicatorUri",get:function(){return this.baseUrl+"/v1/typing"}},{key:"typingIndicatorTimeoutDefault",get:function(){return 5e3}},{key:"httpCacheIntervalDefault",get:function(){return"PT5S"}},{key:"consumptionReportIntervalDefault",get:function(){return"PT5S"}},{key:"userInfosToSubscribeDefault",get:function(){return 100}},{key:"backoffConfigDefault",get:function(){return{min:1e3,max:4e3,maxAttemptsCount:3}}},{key:"backoffConfigOverride",get:function(){return this.options.backoffConfigOverride}},{key:"retryWhenThrottledDefault",get:function(){return!0}},{key:"retryWhenThrottledOverride",get:function(){return this.options.retryWhenThrottledOverride}},{key:"typingIndicatorTimeoutOverride",get:function(){return this.options.typingIndicatorTimeoutOverride}},{key:"httpCacheIntervalOverride",get:function(){return this.options.httpCacheIntervalOverride}},{key:"consumptionReportIntervalOverride",get:function(){return this.options.consumptionReportIntervalOverride}},{key:"userInfosToSubscribeOverride",get:function(){return this.options.userInfosToSubscribeOverride}}]),e}();t.Configuration=a},aB3u:function(e,t,n){"use strict";var r=a(n("Xxa5")),i=a(n("Zrlr")),o=a(n("wxAW")),s=a(n("//Fk"));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(e,t,n,r){return new(n||(n=s.default))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var c=n("JuVV"),l="com.twilio.rtd.cds.document",f="com.twilio.rtd.cds.list",h="com.twilio.rtd.cds.map",d="twilio.sync.event",p=function(){function e(t){var n=this;(0,i.default)(this,e),this.config=t.config,this.subscriptions=t.subscriptions,this.notifications=t.notifications,this.notifications.subscribe(d),this.notifications.subscribe(l),this.notifications.subscribe(f),this.notifications.subscribe(h),this.notifications.on("message",function(e,t){return n.onMessage(e,t)}),this.notifications.on("transportReady",function(e){return n.onConnectionStateChanged(e)})}return(0,o.default)(e,[{key:"onMessage",value:function(e,t){switch(c.default.trace("Notification type:",e,"content:",t),e){case l:case f:case h:this.subscriptions.acceptMessage(t,!1);break;case d:this.subscriptions.acceptMessage(t,!0)}}},{key:"subscribe",value:function(e,t){return u(this,void 0,void 0,r.default.mark(function n(){return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.subscriptions.add(e,t);case 2:case"end":return n.stop()}},n,this)}))}},{key:"unsubscribe",value:function(e,t){return u(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.subscriptions.remove(e);case 2:case"end":return t.stop()}},t,this)}))}},{key:"onConnectionStateChanged",value:function(e){this.subscriptions.onConnectionStateChanged(e)}}]),e}();t.Router=p,t.default=p},aPRC:function(e,t,n){var r=n("OMJi"),i=n("/+tP");function o(e){i.call(this,e),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()}r.inherits(o,i),o.prototype.next_=function(){var e=Math.min(this.nextBackoffDelay_,this.getMaxDelay());return this.nextBackoffDelay_+=this.backoffDelay_,this.backoffDelay_=e,e},o.prototype.reset_=function(){this.nextBackoffDelay_=this.getInitialDelay(),this.backoffDelay_=0},e.exports=o},ax3d:function(e,t,n){var r=n("e8AB")("keys"),i=n("3Eo+");e.exports=function(e){return r[e]||(r[e]=i(e))}},b1mB:function(e,t,n){"use strict";var r=f(n("mvHQ")),i=f(n("Xxa5")),o=f(n("Zx67")),s=f(n("Zrlr")),a=f(n("wxAW")),u=f(n("zwoO")),c=f(n("Pf15")),l=f(n("//Fk"));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e,t,n,r){return new(n||(n=l.default))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var d=n("vzCy"),p=n("dYWg"),v=n("P35s"),y=n("kjdv"),m=new v.Logger;function _(e,t){try{return t?JSON.parse(t):{}}catch(t){return m.warn("Got malformed attributes for the message",e),{}}}var g=function(e){function t(e,n,r,i){(0,s.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return a.channel=e,a.services=n,a.state={sid:i.sid,index:r,author:i.author,body:i.text,timestamp:i.timestamp?new Date(i.timestamp):null,dateUpdated:i.dateUpdated?new Date(i.dateUpdated):null,lastUpdatedBy:i.lastUpdatedBy?i.lastUpdatedBy:null,attributes:_(i.sid,i.attributes),type:i.type?i.type:"text",media:i.type&&"media"===i.type&&i.media?new y.Media(i.media,a.services):null},a}return(0,c.default)(t,d.EventEmitter),(0,a.default)(t,[{key:"_update",value:function(e){var t=!1;!e.text&&"string"!=typeof e.text||e.text===this.state.body||(this.state.body=e.text,t=!0),e.lastUpdatedBy&&e.lastUpdatedBy!==this.state.lastUpdatedBy&&(this.state.lastUpdatedBy=e.lastUpdatedBy,t=!0),e.dateUpdated&&new Date(e.dateUpdated).getTime()!==(this.state.dateUpdated&&this.state.dateUpdated.getTime())&&(this.state.dateUpdated=new Date(e.dateUpdated),t=!0),e.timestamp&&new Date(e.timestamp).getTime()!==(this.state.timestamp&&this.state.timestamp.getTime())&&(this.state.timestamp=new Date(e.timestamp),t=!0);var n=_(this.sid,e.attributes);p.isDeepEqual(this.state.attributes,n)||(this.state.attributes=n,t=!0),t&&this.emit("updated",this)}},{key:"remove",value:function(){return h(this,void 0,void 0,i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.addCommand("deleteMessage",{channelSid:this.channel.sid,messageIdx:this.index.toString()});case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}},e,this)}))}},{key:"updateBody",value:function(e){return h(this,void 0,void 0,i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("string"==typeof e){t.next=2;break}throw new Error("Body <String> is a required parameter for updateBody");case 2:return t.next=4,this.services.session.addCommand("editMessage",{channelSid:this.channel.sid,messageIdx:this.index.toString(),text:e});case 4:return t.abrupt("return",this);case 5:case"end":return t.stop()}},t,this)}))}},{key:"updateAttributes",value:function(e){return h(this,void 0,void 0,i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"!=typeof e){t.next=4;break}throw new Error("Attributes is a required parameter for updateAttributes");case 4:if(e.constructor===Object){t.next=6;break}throw new Error("Attributes must be a valid JSON object");case 6:return t.next=8,this.services.session.addCommand("editMessageAttributes",{channelSid:this.channel.sid,messageIdx:this.index,attributes:(0,r.default)(e)});case 8:return t.abrupt("return",this);case 9:case"end":return t.stop()}},t,this)}))}},{key:"sid",get:function(){return this.state.sid}},{key:"author",get:function(){return this.state.author}},{key:"body",get:function(){return"media"===this.type?null:this.state.body}},{key:"dateUpdated",get:function(){return this.state.dateUpdated}},{key:"index",get:function(){return this.state.index}},{key:"lastUpdatedBy",get:function(){return this.state.lastUpdatedBy}},{key:"timestamp",get:function(){return this.state.timestamp}},{key:"attributes",get:function(){return this.state.attributes}},{key:"type",get:function(){return this.state.type}},{key:"media",get:function(){return this.state.media}}]),t}();t.Message=g},"b7W+":function(e,t,n){"use strict";var r,i=(r=n("Zrlr"))&&r.__esModule?r:{default:r};Object.defineProperty(t,"__esModule",{value:!0}),t.PushNotification=function e(t){(0,i.default)(this,e),this.title=t.title||null,this.body=t.body||null,this.sound=t.sound||null,this.badge=t.badge||null,this.action=t.action||null,this.type=t.type||null,this.data=t.data||{}}},bAtF:function(e,t){e.exports={_args:[["twilio-sync@0.7.4","/Users/martin/Workspaces/ngry-chat"]],_from:"twilio-sync@0.7.4",_id:"twilio-sync@0.7.4",_inBundle:!1,_integrity:"sha1-+JCVS/2LbXPQ/wMJ2YLM6dIS7uE=",_location:"/twilio-sync",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"twilio-sync@0.7.4",name:"twilio-sync",escapedName:"twilio-sync",rawSpec:"0.7.4",saveSpec:null,fetchSpec:"0.7.4"},_requiredBy:["/twilio-chat"],_resolved:"https://registry.npmjs.org/twilio-sync/-/twilio-sync-0.7.4.tgz",_spec:"0.7.4",_where:"/Users/martin/Workspaces/ngry-chat",author:{name:"Twilio"},browser:"browser/index.js",dependencies:{"babel-runtime":"^6.23.0",karibu:"^1.0.1",loglevel:"^1.4.1","operation-retrier":"^1.1.2",platform:"^1.3.3",rfc6902:"^1.3.0","twilio-ems-client":"^0.2.6","twilio-notifications":"^0.4.4","twilio-transport":"^0.1.4",twilsock:"^0.3.5",uuid:"^3.0.1",xxhashjs:"^0.2.1"},description:"Twilio Sync client library",devDependencies:{"@types/chai":"^3.4.35","@types/chai-as-promised":"0.0.29","@types/loglevel":"^1.4.29","@types/mocha":"^2.2.39","@types/node":"^7.0.5","@types/sinon":"^2.3.3","@types/sinon-chai":"^2.7.27","async-test-tools":"^1.0.6","babel-cli":"^6.23.0","babel-plugin-add-module-exports":"^0.2.1","babel-plugin-array-includes":"^2.0.3","babel-plugin-transform-object-assign":"^6.22.0","babel-plugin-transform-runtime":"^6.23.0","babel-preset-es2015":"^6.22.0",babelify:"^7.3.0",backoff:"^2.5.0",browserify:"^14.1.0",chai:"^3.5.0","chai-as-promised":"^6.0.0",cheerio:"^0.22.0",del:"^2.2.2",gulp:"^3.9.1","gulp-babel":"^6.1.2","gulp-derequire":"^2.1.0","gulp-exit":"0.0.2","gulp-insert":"^0.5.0","gulp-istanbul":"^1.1.1","gulp-mocha":"^4.0.1","gulp-rename":"^1.2.2","gulp-replace":"^0.5.4","gulp-tap":"^0.1.3","gulp-tslint":"^7.1.0","gulp-typescript":"^3.1.5","gulp-uglify":"^2.0.1","gulp-util":"^3.0.8","ink-docstrap":"^1.3.0",isparta:"^4.0.0",jsdoc:"^3.4.3",jsonwebtoken:"^7.3.0",karma:"^1.5.0","karma-browserify":"^5.1.1","karma-browserstack-launcher":"^1.2.0","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.2","run-sequence":"^1.2.2",sinon:"^2.3.3","sinon-chai":"^2.8.0","ts-node":"^3.0.0",tslint:"^4.5.1",twilio:"^3.10.0",typescript:"2.2.1",underscore:"^1.8.3","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0",watchify:"^3.9.0"},engines:{node:">=6"},license:"MIT",main:"lib/index.js",name:"twilio-sync",scripts:{prepare:"gulp build",test:"gulp unit-test"},version:"0.7.4"}},bAzZ:function(e,t,n){"use strict";var r=s(n("Zrlr")),i=s(n("wxAW")),o=s(n("c/Tr"));function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("BvyM");function u(e,t){return[e].concat((0,o.default)(t))}var c=function(){function e(){(0,r.default)(this,e),this.prefix=""}return(0,i.default)(e,[{key:"setLevel",value:function(e){a.setLevel(e)}},{key:"trace",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.trace.apply(null,u("MCS T:"+this.prefix,t))}},{key:"debug",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.debug.apply(null,u("MCS D:"+this.prefix,t))}},{key:"info",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.info.apply(null,u("MCS I:"+this.prefix,t))}},{key:"warn",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.warn.apply(null,u("MCS W:"+this.prefix,t))}},{key:"error",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.error.apply(null,u("MCS E:"+this.prefix,t))}}],[{key:"scope",value:function(t){return new e}},{key:"setLevel",value:function(e){a.setLevel(e)}},{key:"trace",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.trace.apply(null,u("MCS T:",t))}},{key:"debug",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.debug.apply(null,u("MCS D:",t))}},{key:"info",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.info.apply(null,u("MCS I:",t))}},{key:"warn",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.warn.apply(null,u("MCS W:",t))}},{key:"error",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.error.apply(null,u("MCS E:",t))}}]),e}();t.Logger=c},bRrM:function(e,t,n){"use strict";var r=n("7KvD"),i=n("FeBl"),o=n("evD5"),s=n("+E39"),a=n("dSzd")("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];s&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}},bqnK:function(e,t,n){n("HpRW")("Map")},bxzj:function(e,t){e.exports={_args:[["twilio-chat@2.1.0","/Users/martin/Workspaces/ngry-chat"]],_from:"twilio-chat@2.1.0",_id:"twilio-chat@2.1.0",_inBundle:!1,_integrity:"sha1-8Z3cojku9oWQd3QsDBbliMvBl6o=",_location:"/twilio-chat",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"twilio-chat@2.1.0",name:"twilio-chat",escapedName:"twilio-chat",rawSpec:"2.1.0",saveSpec:null,fetchSpec:"2.1.0"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/twilio-chat/-/twilio-chat-2.1.0.tgz",_spec:"2.1.0",_where:"/Users/martin/Workspaces/ngry-chat",author:{name:"Twilio"},browser:"browser/index.js",dependencies:{durational:"^1.1.0","isomorphic-form-data":"^1.0.0",loglevel:"^1.6.0","operation-retrier":"^1.3.2",platform:"^1.3.4",rfc6902:"^1.3.0","twilio-ems-client":"^0.2.6","twilio-mcs-client":"^0.0.4","twilio-notifications":"^0.4.4","twilio-sync":"^0.7.2","twilio-transport":"^0.1.4",twilsock:"^0.3.6",uuid:"^3.1.0"},description:"Twilio Chat service client library",devDependencies:{"@types/chai":"^3.4.35","@types/chai-as-promised":"0.0.31","@types/chai-string":"^1.1.30","@types/core-js":"^0.9.44","@types/mocha":"^2.2.46","@types/node":"^7.0.52","@types/sinon":"^2.3.7","@types/sinon-chai":"^2.7.27",async:"^2.6.0","async-test-tools":"^1.0.6","babel-eslint":"^7.2.3","babel-plugin-add-module-exports":"^0.2.1","babel-plugin-istanbul":"^4.1.5","babel-plugin-transform-async-to-generator":"^6.24.1","babel-plugin-transform-object-assign":"^6.22.0","babel-plugin-transform-runtime":"^6.23.0","babel-preset-es2015":"^6.24.1","babel-require":"^1.0.1","babel-runtime":"^6.23.0",babelify:"^7.3.0",browserify:"^14.5.0","browserify-replace":"^0.9.0",chai:"^3.5.0","chai-as-promised":"^6.0.0","chai-string":"^1.4.0",cheerio:"^0.22.0",del:"^3.0.0",fs:"0.0.1-security",gulp:"^3.9.1","gulp-babel":"^6.1.2","gulp-derequire":"^2.1.0","gulp-if":"^2.0.2","gulp-insert":"^0.5.0","gulp-mocha":"^4.1.0","gulp-rename":"^1.2.2","gulp-sourcemaps":"^2.6.3","gulp-tap":"^1.0.1","gulp-tslint":"^8.1.0","gulp-typescript":"^3.2.3","gulp-uglify":"^3.0.0","gulp-util":"^3.0.8",gulpclass:"^0.1.2","ink-docstrap":"^1.3.2",jsdoc:"^3.5.5","jsdoc-strip-async-await":"^0.1.0","loglevel-message-prefix":"^2.0.1","mocha.parallel":"0.15.3",nyc:"^11.4.1",path:"^0.12.7",sinon:"^2.3.2","sinon-chai":"^2.14.0","source-map-explorer":"^1.5.0","ts-node":"^3.0.4",tslint:"^5.8.0",twilio:"^3.11.0",typescript:"^2.6.2","uglify-save-license":"^0.4.1","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0"},engines:{node:">=6"},license:"MIT",main:"lib/index.js",name:"twilio-chat",types:"./lib/client.d.ts",version:"2.1.0"}},"c/Tr":function(e,t,n){e.exports={default:n("5zde"),__esModule:!0}},c45H:function(e,t,n){n("1alW"),e.exports=n("FeBl").Number.isInteger},cQXm:function(e,t,n){"use strict";t.a=function(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}},crlp:function(e,t,n){var r=n("7KvD"),i=n("FeBl"),o=n("O4g8"),s=n("Kh4W"),a=n("evD5").f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},d7EF:function(e,t,n){"use strict";t.__esModule=!0;var r=o(n("us/S")),i=o(n("BO1k"));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(Array.isArray(e))return e;if((0,r.default)(Object(e)))return function(e,t){var n=[],r=!0,o=!1,s=void 0;try{for(var a,u=(0,i.default)(e);!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,s=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},dDqI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("hqSd");t.SyncClient=r.SyncClient;var i=n("YsKZ");t.SyncDocument=i.SyncDocument;var o=n("sN9T");t.SyncList=o.SyncList;var s=n("phvU");t.SyncListItem=s.ListItem;var a=n("sGH6");t.SyncMap=a.SyncMap;var u=n("W81h");t.SyncMapItem=u.MapItem,t.default=r.SyncClient,e.exports=r.SyncClient,e.exports.SyncClient=r.SyncClient},dNDb:function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},dSzd:function(e,t,n){var r=n("e8AB")("wks"),i=n("3Eo+"),o=n("7KvD").Symbol,s="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=s&&o[e]||(s?o:i)("Symbol."+e))}).store=r},dY0y:function(e,t,n){var r=n("dSzd")("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},e(o)}catch(e){}return n}},dYWg:function(e,t,n){"use strict";var r=s(n("Zrlr")),i=s(n("wxAW")),o=s(n("mvHQ"));function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("WyG8");t.isDeepEqual=function(e,t){return 0===a.createPatch(e,t).length},t.deepClone=function(e){return JSON.parse((0,o.default)(e))},t.parseToNumber=function(e){return"undefined"==typeof e||isNaN(Number(e))?null:Number(e)};var u=function(){function e(t){(0,r.default)(this,e),this.base=t.replace(/\/$/,""),this.args=[],this.paths=[]}return(0,i.default)(e,[{key:"arg",value:function(e,t){return"undefined"!=typeof t&&this.args.push(encodeURIComponent(e)+"="+encodeURIComponent(t)),this}},{key:"path",value:function(e){return this.paths.push(encodeURIComponent(e)),this}},{key:"build",value:function(){var e=this.base;return this.paths.length&&(e+="/"+this.paths.join("/")),this.args.length&&(e+="?"+this.args.join("&")),e}}]),e}();t.UriBuilder=u},dgOU:function(e,t,n){"use strict";t.a=function(e){return null!=e&&"object"==typeof e}},e21k:function(e,t,n){var r=n("JHvc"),i=n("+fTR"),o=n("aPRC"),s=n("i7zY");e.exports.Backoff=r,e.exports.FunctionCall=s,e.exports.FibonacciStrategy=o,e.exports.ExponentialStrategy=i,e.exports.fibonacci=function(e){return new r(new o(e))},e.exports.exponential=function(e){return new r(new i(e))},e.exports.call=function(e,t,n){var r=Array.prototype.slice.call(arguments);return e=r[0],t=r.slice(1,r.length-1),new s(e,t,r[r.length-1])}},e6n0:function(e,t,n){var r=n("evD5").f,i=n("D2L2"),o=n("dSzd")("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},e8AB:function(e,t,n){var r=n("7KvD"),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},eoM1:function(e,t,n){"use strict";var r=u(n("Xxa5")),i=u(n("ifoU")),o=u(n("Zrlr")),s=u(n("wxAW")),a=u(n("//Fk"));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e,t,n,r){return new(n||(n=a.default))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(t){(0,o.default)(this,e),this.queuedRequests=[],this.isRequestInFlight=!1,this.inputMergingFunction=t}return(0,s.default)(e,[{key:"add",value:function(e,t){var n=this,r=new a.default(function(r,i){return n.queuedRequests.push({input:e,requestFunction:t,resolve:r,reject:i})});return this.wakeupQueue(),r}},{key:"squashAndAdd",value:function(e,t){var n=this.queuedRequests;this.queuedRequests=[];var r=void 0;n.length>0?(r=n.map(function(e){return e.input}).reduce(this.inputMergingFunction),r=this.inputMergingFunction(r,e)):r=e;var i=this.add(r,t);return n.forEach(function(e){return i.then(e.resolve,e.reject)}),i}},{key:"isEmpty",value:function(){return 0===this.queuedRequests.length&&!this.isRequestInFlight}},{key:"wakeupQueue",value:function(){var e=this;if(0!==this.queuedRequests.length&&!this.isRequestInFlight){var t=this.queuedRequests.shift();this.isRequestInFlight=!0,t.requestFunction(t.input).then(t.resolve,t.reject).then(function(t){e.isRequestInFlight=!1,e.wakeupQueue()})}}}]),e}();t.MergingQueue=l;var f=function(){function e(t){(0,o.default)(this,e),this.queueByNamespaceKey=new i.default,this.inputReducer=t}return(0,s.default)(e,[{key:"add",value:function(e,t,n){return c(this,void 0,void 0,r.default.mark(function i(){return r.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.invokeQueueMethod(e,function(e){return e.add(t,n)}));case 1:case"end":return r.stop()}},i,this)}))}},{key:"squashAndAdd",value:function(e,t,n){return c(this,void 0,void 0,r.default.mark(function i(){return r.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.invokeQueueMethod(e,function(e){return e.squashAndAdd(t,n)}));case 1:case"end":return r.stop()}},i,this)}))}},{key:"invokeQueueMethod",value:function(e,t){return c(this,void 0,void 0,r.default.mark(function n(){var i,o;return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.queueByNamespaceKey.has(e)||this.queueByNamespaceKey.set(e,new l(this.inputReducer)),i=this.queueByNamespaceKey.get(e),o=t(i),this.queueByNamespaceKey.get(e).isEmpty()&&this.queueByNamespaceKey.delete(e),n.abrupt("return",o);case 5:case"end":return n.stop()}},n,this)}))}}]),e}();t.NamespacedMergingQueue=f},etqZ:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var n=e.Set;if(n&&"function"==typeof(new n)["@@iterator"])return"@@iterator";var r=e.Map;if(r)for(var i=Object.getOwnPropertyNames(r.prototype),o=0;o<i.length;++o){var s=i[o];if("entries"!==s&&"size"!==s&&r.prototype[s]===r.prototype.entries)return s}return"@@iterator"}(n("AMGY").a)},evD5:function(e,t,n){var r=n("77Pl"),i=n("SfB7"),o=n("MmMw"),s=Object.defineProperty;t.f=n("+E39")?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},exh5:function(e,t,n){var r=n("kM2E");r(r.S,"Object",{setPrototypeOf:n("ZaQb").set})},f9aG:function(e,t,n){"use strict";t.a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return i(e)},t.b=i;var r=n("gIN1");function i(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:r.a}},fBQ2:function(e,t,n){"use strict";var r=n("evD5"),i=n("X8DO");e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},fC4T:function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},fJUb:function(e,t,n){var r=n("77Pl"),i=n("EqjI"),o=n("qARP");e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},fKB6:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={e:{}}},fS6E:function(e,t,n){n("Kh5d"),e.exports=n("FeBl").Object.getPrototypeOf},fWfb:function(e,t,n){"use strict";var r=n("7KvD"),i=n("D2L2"),o=n("+E39"),s=n("kM2E"),a=n("880/"),u=n("06OY").KEY,c=n("S82l"),l=n("e8AB"),f=n("e6n0"),h=n("3Eo+"),d=n("dSzd"),p=n("Kh4W"),v=n("crlp"),y=n("Xc4G"),m=n("7UMu"),_=n("77Pl"),g=n("EqjI"),b=n("TcQ7"),w=n("MmMw"),k=n("X8DO"),x=n("Yobk"),C=n("Rrel"),E=n("LKZe"),S=n("evD5"),T=n("lktj"),O=E.f,P=S.f,A=C.f,I=r.Symbol,M=r.JSON,R=M&&M.stringify,j=d("_hidden"),N=d("toPrimitive"),D={}.propertyIsEnumerable,F=l("symbol-registry"),U=l("symbols"),L=l("op-symbols"),V=Object.prototype,B="function"==typeof I,q=r.QObject,z=!q||!q.prototype||!q.prototype.findChild,H=o&&c(function(){return 7!=x(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=O(V,t);r&&delete V[t],P(e,t,n),r&&e!==V&&P(V,t,r)}:P,W=function(e){var t=U[e]=x(I.prototype);return t._k=e,t},G=B&&"symbol"==typeof I.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof I},Z=function(e,t,n){return e===V&&Z(L,t,n),_(e),t=w(t,!0),_(n),i(U,t)?(n.enumerable?(i(e,j)&&e[j][t]&&(e[j][t]=!1),n=x(n,{enumerable:k(0,!1)})):(i(e,j)||P(e,j,k(1,{})),e[j][t]=!0),H(e,t,n)):P(e,t,n)},Q=function(e,t){_(e);for(var n,r=y(t=b(t)),i=0,o=r.length;o>i;)Z(e,n=r[i++],t[n]);return e},J=function(e){var t=D.call(this,e=w(e,!0));return!(this===V&&i(U,e)&&!i(L,e))&&(!(t||!i(this,e)||!i(U,e)||i(this,j)&&this[j][e])||t)},K=function(e,t){if(e=b(e),t=w(t,!0),e!==V||!i(U,t)||i(L,t)){var n=O(e,t);return!n||!i(U,t)||i(e,j)&&e[j][t]||(n.enumerable=!0),n}},Y=function(e){for(var t,n=A(b(e)),r=[],o=0;n.length>o;)i(U,t=n[o++])||t==j||t==u||r.push(t);return r},X=function(e){for(var t,n=e===V,r=A(n?L:b(e)),o=[],s=0;r.length>s;)!i(U,t=r[s++])||n&&!i(V,t)||o.push(U[t]);return o};B||(a((I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===V&&t.call(L,n),i(this,j)&&i(this[j],e)&&(this[j][e]=!1),H(this,e,k(1,n))};return o&&z&&H(V,e,{configurable:!0,set:t}),W(e)}).prototype,"toString",function(){return this._k}),E.f=K,S.f=Z,n("n0T6").f=C.f=Y,n("NpIQ").f=J,n("1kS7").f=X,o&&!n("O4g8")&&a(V,"propertyIsEnumerable",J,!0),p.f=function(e){return W(d(e))}),s(s.G+s.W+s.F*!B,{Symbol:I});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;$.length>ee;)d($[ee++]);for(var te=T(d.store),ne=0;te.length>ne;)v(te[ne++]);s(s.S+s.F*!B,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=I(e)},keyFor:function(e){if(!G(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){z=!0},useSimple:function(){z=!1}}),s(s.S+s.F*!B,"Object",{create:function(e,t){return void 0===t?x(e):Q(x(e),t)},defineProperty:Z,defineProperties:Q,getOwnPropertyDescriptor:K,getOwnPropertyNames:Y,getOwnPropertySymbols:X}),M&&s(s.S+s.F*(!B||c(function(){var e=I();return"[null]"!=R([e])||"{}"!=R({a:e})||"{}"!=R(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(g(t)||void 0!==e)&&!G(e))return m(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!G(t))return t}),r[1]=t,R.apply(M,r)}}),I.prototype[N]||n("hJx8")(I.prototype,N,I.prototype.valueOf),f(I,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},fkB2:function(e,t,n){var r=n("UuGF"),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},fwxS:function(e,t,n){"use strict";var r=d(n("Xxa5")),i=d(n("mvHQ")),o=d(n("lHA8")),s=d(n("ifoU")),a=d(n("Zx67")),u=d(n("Zrlr")),c=d(n("wxAW")),l=d(n("zwoO")),f=d(n("Pf15")),h=d(n("//Fk"));function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e,t,n,r){return new(n||(n=h.default))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var v=n("vzCy"),y=n("P35s"),m=n("KcGS");t.Channel=m.Channel;var _=n("Ibl0"),g=y.Logger.scope(""),b=function(e){function t(e){(0,u.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this));return n.services=e,n.channels=new s.default,n.thumbstones=new o.default,n.syncListFetched=!1,n.syncListRead=new _.Deferred,n}return(0,f.default)(t,v.EventEmitter),(0,c.default)(t,[{key:"getMap",value:function(){var e=this;return this.services.session.getMyChannelsId().then(function(t){return e.services.syncClient.map({id:t,mode:"open_existing"})})}},{key:"addChannel",value:function(e){return p(this,void 0,void 0,r.default.mark(function t(){var n,o,s,a,u;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.services.session.addCommand("createChannel",{friendlyName:e.friendlyName,uniqueName:e.uniqueName,type:e.isPrivate?"private":"public",attributes:(0,i.default)(e.attributes)});case 2:if(o="channelSid"in(n=t.sent)?n.channelSid:null,s="channel"in n?n.channel:null,!(a=this.channels.get(o))){t.next=10;break}return t.next=9,a._subscribe();case 9:return t.abrupt("return",a);case 10:return u=new m.Channel(this.services,{channel:s,name:null,entityName:null,uniqueName:null,attributes:null,createdBy:null,friendlyName:null,lastConsumedMessageIndex:null,type:e.isPrivate?"private":"public",dateCreated:null,dateUpdated:null},o),this.channels.set(u.sid,u),this.registerForEvents(u),t.next=15,u._subscribe();case 15:return this.emit("channelAdded",u),t.abrupt("return",u);case 17:case"end":return t.stop()}},t,this)}))}},{key:"fetchChannels",value:function(){var e=this;this.getMap().then(function(t){return p(e,void 0,void 0,r.default.mark(function e(){var n,i,o=this;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.on("itemAdded",function(e){o.upsertChannel("sync",e.item.key,e.item.value)}),t.on("itemRemoved",function(e){var t=e.key;o.syncListFetched||o.thumbstones.add(t);var n=o.channels.get(t);n&&("joined"!==n.status&&"invited"!==n.status||(n._setStatus("known","sync"),o.emit("channelLeft",n)),n.isPrivate&&(o.channels.delete(t),o.emit("channelRemoved",n)))}),t.on("itemUpdated",function(e){o.upsertChannel("sync",e.item.key,e.item.value)}),n=[],e.next=6,this.services.syncList.getPage();case 6:(i=e.sent).items.forEach(function(e){n.push(o.upsertChannel("synclist",e.channel_sid,e.descriptor))});case 9:if(!i.hasNextPage){e.next=16;break}return e.next=12,i.nextPage();case 12:(i=e.sent).items.forEach(function(e){n.push(o.upsertChannel("synclist",e.channel_sid,e.descriptor))}),e.next=9;break;case 16:return this.syncListRead.set(!0),e.abrupt("return",h.default.all(n));case 18:case"end":return e.stop()}},e,this)}))}).then(function(){e.syncListFetched=!0,e.thumbstones.clear(),g.debug("Channels list fetched")}).then(function(){return e}).catch(function(e){throw g.error("Failed to get channels list",e),e})}},{key:"_wrapPaginator",value:function(e,t){var n=this;return t(e.items).then(function(r){return{items:r,hasNextPage:e.hasNextPage,hasPrevPage:e.hasPrevPage,nextPage:function(){return e.nextPage().then(function(e){return n._wrapPaginator(e,t)})},prevPage:function(){return e.prevPage().then(function(e){return n._wrapPaginator(e,t)})}}})}},{key:"getChannels",value:function(e){var t=this;return this.getMap().then(function(t){return t.getItems(e)}).then(function(e){return t._wrapPaginator(e,function(e){return h.default.all(e.map(function(e){return t.upsertChannel("sync",e.key,e.value)}))})})}},{key:"getChannel",value:function(e){var t=this;return this.getMap().then(function(t){return t.getItems({key:e})}).then(function(e){return e.items.map(function(e){return t.upsertChannel("sync",e.key,e.value)})}).then(function(e){return e.length>0?e[0]:null})}},{key:"pushChannel",value:function(e){var t=e.sid;return this.upsertChannel("chat",t,{name:null,entityName:null,lastConsumedMessageIndex:e.lastConsumedMessageIndex,type:e.type,status:e.status,friendlyName:e.friendlyName,dateUpdated:e.dateUpdated,dateCreated:e.dateCreated,uniqueName:e.uniqueName,createdBy:e.createdBy,attributes:e.attributes,channel:e.channel,sid:t})}},{key:"upsertChannel",value:function(e,t,n){var r=this;g.trace("upsertChannel(sid="+t+", data=",n);var i=this.channels.get(t);return i?(g.trace("upsertChannel: channel "+t+" is known and it's status is known from source "+i._statusSource()+" and update came from source "+e,i),"undefined"==typeof i._statusSource()||e===i._statusSource()||"synclist"===e&&"sync"!==i._statusSource()||"sync"===e?"joined"===n.status&&"joined"!==i.status?(i._setStatus("joined",e),"undefined"!=typeof n.lastConsumedMessageIndex&&i._update({lastConsumedMessageIndex:n.lastConsumedMessageIndex}),i._subscribe().then(function(){r.emit("channelJoined",i)})):"invited"===n.status&&"invited"!==i.status?(i._setStatus("invited",e),i._subscribe().then(function(){r.emit("channelInvited",i)})):"known"!==n.status||"invited"!==i.status&&"joined"!==i.status?"notParticipating"!==n.status&&"known"!==n.status||"private"!==n.type?i._update(n):i._subscribe():(i._setStatus("known",e),i._update(n),i._subscribe().then(function(){r.emit("channelLeft",i)})):g.trace("upsertChannel: channel is known from sync and came from chat, ignoring",{sid:t,data:n.status,channel:i.status}),i._subscribe().then(function(){return i})):"chat"!==e&&"synclist"!==e||!this.thumbstones.has(t)?(g.trace("upsertChannel: creating local channel object with sid "+t,n),i=new m.Channel(this.services,n,t),this.registerForEvents(i),this.channels.set(t,i),i._subscribe().then(function(){return r.emit("channelAdded",i),"joined"===n.status?(i._setStatus("joined",e),r.emit("channelJoined",i)):"invited"===n.status&&(i._setStatus("invited",e),r.emit("channelInvited",i)),i})):void g.trace("upsertChannel: channel is deleted and came again from chat, ignoring",t)}},{key:"onChannelRemoved",value:function(e){var t=this.channels.get(e);t&&(this.channels.delete(e),this.emit("channelRemoved",t))}},{key:"registerForEvents",value:function(e){var t=this;e.on("removed",function(){return t.onChannelRemoved(e.sid)}),e.on("updated",function(){return t.emit("channelUpdated",e)}),e.on("memberJoined",this.emit.bind(this,"memberJoined")),e.on("memberLeft",this.emit.bind(this,"memberLeft")),e.on("memberUpdated",this.emit.bind(this,"memberUpdated")),e.on("messageAdded",this.emit.bind(this,"messageAdded")),e.on("messageUpdated",this.emit.bind(this,"messageUpdated")),e.on("messageRemoved",this.emit.bind(this,"messageRemoved")),e.on("typingStarted",this.emit.bind(this,"typingStarted")),e.on("typingEnded",this.emit.bind(this,"typingEnded"))}}]),t}();t.Channels=b},fxRn:function(e,t,n){n("+tPU"),n("zQR9"),e.exports=n("g8Ux")},g5jc:function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"a",function(){return f});var r=n("TToO"),i=n("YaPU"),o=n("OVmG"),s=n("VwZZ"),a=n("x6VL"),u=n("1Bqh"),c=n("tLDX"),l=function(e){function t(t){e.call(this,t),this.destination=t}return Object(r.__extends)(t,e),t}(o.a),f=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return Object(r.__extends)(t,e),t.prototype[c.a]=function(){return new l(this)},t.prototype.lift=function(e){var t=new h(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new a.a;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new a.a;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new a.a;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new a.a;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new a.a;return this.hasError?(e.error(this.thrownError),s.a.EMPTY):this.isStopped?(e.complete(),s.a.EMPTY):(this.observers.push(e),new u.a(this,e))},t.prototype.asObservable=function(){var e=new i.a;return e.source=this,e},t.create=function(e,t){return new h(e,t)},t}(i.a),h=function(e){function t(t,n){e.call(this),this.destination=t,this.source=n}return Object(r.__extends)(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):s.a.EMPTY},t}(f)},g8Ux:function(e,t,n){var r=n("77Pl"),i=n("3fs2");e.exports=n("FeBl").getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},gApy:function(e,t,n){var r,i,o=n("i4uy"),s=n("MAlW"),a=0,u=0;e.exports=function(e,t,n){var c=t&&n||0,l=t||[],f=(e=e||{}).node||r,h=void 0!==e.clockseq?e.clockseq:i;if(null==f||null==h){var d=o();null==f&&(f=r=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==h&&(h=i=16383&(d[6]<<8|d[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:u+1,y=p-a+(v-u)/1e4;if(y<0&&void 0===e.clockseq&&(h=h+1&16383),(y<0||p>a)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,u=v,i=h;var m=(1e4*(268435455&(p+=122192928e5))+v)%4294967296;l[c++]=m>>>24&255,l[c++]=m>>>16&255,l[c++]=m>>>8&255,l[c++]=255&m;var _=p/4294967296*1e4&268435455;l[c++]=_>>>8&255,l[c++]=255&_,l[c++]=_>>>24&15|16,l[c++]=_>>>16&255,l[c++]=h>>>8|128,l[c++]=255&h;for(var g=0;g<6;++g)l[c+g]=f[g];return t||s(l)}},gIN1:function(e,t,n){"use strict";t.a=function(){}},gPwX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(n("u2KI")),i=p(n("lHA8")),o=p(n("HSQo")),s=p(n("Zx67")),a=p(n("Zrlr")),u=p(n("wxAW")),c=p(n("zwoO")),l=p(n("Pf15")),f=p(n("DlMc")),h=p(n("J5uf")),d=p(n("vzCy"));function p(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(e,n,r){(0,a.default)(this,t);var u=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this));return e.id=f.default.v4(),(0,o.default)(u,{_twilsock:{value:n},_messageTypes:{value:new i.default},config:{value:r},context:{value:e}}),n.on("stateChanged",function(e){"connected"!==e&&u.emit("transportReady",!1)}),n.on("registered",function(t){e&&t===e.id&&"connected"===n.state&&u.emit("transportReady",!0)}),u}return(0,l.default)(t,d.default),(0,u.default)(t,[{key:"setNotificationId",value:function(){return!1}},{key:"updateToken",value:function(){this._twilsock.removeNotificationsContext(this.context.id),this.context.id=f.default.v4(),this._updateContext()}},{key:"has",value:function(e){return this._messageTypes.has(e)}},{key:"subscribe",value:function(e){return this._messageTypes.has(e)?(h.default.trace("Message type already registered ",e),!1):(this._messageTypes.add(e),this._updateContext(),!0)}},{key:"unsubscribe",value:function(e){return!!this._messageTypes.has(e)&&(this._messageTypes.delete(e),this._messageTypes.size>0?this._updateContext():this._twilsock.removeNotificationsContext(this.context.id),!0)}},{key:"_updateContext",value:function(){if(this.config.token){var e,t=(e=[],this._messageTypes.forEach(function(t){return e.push(t)}),e),n={product_id:this.context.productId,notification_protocol_version:4,endpoint_platform:this.context.platform,ttl:172800,token:this.config.token,message_types:t};this.emit("transportReady",!1),this._twilsock.setNotificationsContext(this.context.id,n)}}}]),t}();t.default=v,(0,r.default)(v),e.exports=t.default},h65t:function(e,t,n){var r=n("UuGF"),i=n("52gC");e.exports=function(e){return function(t,n){var o,s,a=String(i(t)),u=r(n),c=a.length;return u<0||u>=c?e?"":void 0:(o=a.charCodeAt(u))<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?e?a.charAt(u):o:e?a.slice(u,u+2):s-56320+(o-55296<<10)+65536}}},hJx8:function(e,t,n){var r=n("evD5"),i=n("X8DO");e.exports=n("+E39")?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},hqSd:function(e,t,n){"use strict";var r=f(n("Xxa5")),i=f(n("Zx67")),o=f(n("Zrlr")),s=f(n("wxAW")),a=f(n("zwoO")),u=f(n("Pf15")),c=f(n("Dd8w")),l=f(n("//Fk"));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e,t,n,r){return new(n||(n=l.default))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var d=n("vzCy"),p=n("hz4m"),v=n("r/lS"),y=n("Wl86"),m=n("55yF"),_=n("SZqs"),g=n("urP9"),b=n("JuVV"),w=n("txox"),k=n("pKtz"),x=n("aB3u"),C=n("zwQy"),E=n("YsKZ"),S=n("sN9T"),T=n("sGH6"),O=n("4ft4"),P=n("qVh1"),A=n("AyQt"),I=n("urP9"),M=n("jzsz"),R=n("FTGv"),j=n("RxiC"),N="data_sync",D=n("bAtF").version;function F(e){return e._subscribe(),e}function U(e){return e?"string"==typeof e?{id:e,mode:"open_or_create"}:(g.validateOptionalTtl(e.ttl),(0,c.default)({},e,{mode:e.mode||(e.id?"open_or_create":"create_new")})):{mode:"create_new"}}var L=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.default)(this,t);var r=(0,a.default)(this,(t.__proto__||(0,i.default)(t)).call(this));if(!e)throw new Error("Sync library needs a valid Twilio token to be passed");n.hasOwnProperty("logLevel")&&b.default.setLevel(n.logLevel),r.productId=n.productId=n.productId||N;var s=n.twilsockClient=n.twilsockClient||new v(e,n),u=n.transport=n.transport||new y.Transport(n.twilsockClient,{concurrentHttpRequestLimit:20}),c=n.emsClient=n.emsClient||new m.EmsClient(n),l=n.notificationsClient=n.notificationsClient||new _(e,n),f=new w.Configuration(null,n),h=new C.Network(r.productId,new O.ClientInfo(D),f,u),d=new A.SessionStorage(f);r.localStorageId=null,r.fpaToken=e,r.authData=new M.Deferred,r.authData.promise.then(function(e){return r.handleEmsResponse(e)}),c.once("response",function(e){return r.authData.update(e)}),c.setToken(e).catch(function(e){b.default.warn("Failed to set token",e)}),s.connect(),r.services={config:f,twilsock:s,notifications:l,network:h,emsClient:c,storage:d,router:null,subscriptions:null};var p=new k.Subscriptions(r.services),g=new x.Router({config:f,subscriptions:p,notifications:l});return r.services.router=g,r.services.subscriptions=p,r.entities=new P.EntitiesCache,l.on("connectionStateChanged",function(){r.emit("connectionStateChanged",r.services.notifications.connectionState)}),r}return(0,u.default)(t,d.EventEmitter),(0,s.default)(t,[{key:"handleEmsResponse",value:function(e){this.services.config.updateToken(e.token);try{var t=e.identity,n=e.serviceSids[this.productId],r=p.h64().update("TW::"+t+"::"+n).digest().toString(16);this.services.storage.updateStorageId(r)}catch(e){b.default.error("Failed to initialize persistent storage",e)}}},{key:"ensureReady",value:function(){return h(this,void 0,void 0,r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authData.promise;case 2:case"end":return e.stop()}},e,this)}))}},{key:"storeRootInSessionCache",value:function(e,t,n){if(this.services.config.sessionStorageEnabled&&t){var r=I.deepClone(n);e!==S.SyncList.type&&e!==T.SyncMap.type||(r.last_event_id=null,delete r.items),this.services.storage.store(e,t,r)}}},{key:"readRootFromSessionCache",value:function(e,t){return this.services.config.sessionStorageEnabled&&t?this.services.storage.read(e,t):null}},{key:"_get",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return h(this,void 0,void 0,r.default.mark(function i(){var o;return r.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return",null);case 2:return o=new g.UriBuilder(e).pathSegment(t).queryParam("Include",n?"items":void 0).build(),r.next=5,this.services.network.get(o);case 5:return r.abrupt("return",r.sent.body);case 7:case"end":return r.stop()}},i,this)}))}},{key:"_createDocument",value:function(e,t,n){var r={unique_name:e,data:t||{}};return"number"==typeof n&&(r.ttl=n),this.services.network.post(this.services.config.documentsUri,r).then(function(e){return e.body.data=r.data,e.body})}},{key:"_getDocument",value:function(e){return h(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.readRootFromSessionCache(E.SyncDocument.type,e)||this._get(this.services.config.documentsUri,e));case 1:case"end":return t.stop()}},t,this)}))}},{key:"_createList",value:function(e,t,n,r){var i={unique_name:e,purpose:t,context:n};return"number"==typeof r&&(i.ttl=r),this.services.network.post(this.services.config.listsUri,i).then(function(e){return e.body})}},{key:"_getList",value:function(e){return h(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.readRootFromSessionCache(S.SyncList.type,e)||this._get(this.services.config.listsUri,e));case 1:case"end":return t.stop()}},t,this)}))}},{key:"_createMap",value:function(e,t){var n={unique_name:e};return"number"==typeof t&&(n.ttl=t),this.services.network.post(this.services.config.mapsUri,n).then(function(e){return e.body})}},{key:"_getMap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return h(this,void 0,void 0,r.default.mark(function n(){return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.readRootFromSessionCache(T.SyncMap.type,e)||this._get(this.services.config.mapsUri,e,t));case 1:case"end":return n.stop()}},n,this)}))}},{key:"_getStream",value:function(e){return h(this,void 0,void 0,r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.readRootFromSessionCache(j.SyncStream.type,e)||this._get(this.services.config.streamsUri,e,!1));case 1:case"end":return t.stop()}},t,this)}))}},{key:"_createStream",value:function(e,t){return h(this,void 0,void 0,r.default.mark(function n(){var i;return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i={unique_name:e},"number"==typeof t&&(i.ttl=t),n.next=4,this.services.network.post(this.services.config.streamsUri,i);case 4:return n.abrupt("return",n.sent.body);case 7:case"end":return n.stop()}},n,this)}))}},{key:"getCached",value:function(e,t){return e&&this.entities.get(e,t)||null}},{key:"removeFromCacheAndSession",value:function(e,t,n){this.entities.remove(t),this.services.config.sessionStorageEnabled&&this.services.storage.remove(e,t,n)}},{key:"document",value:function(e){return h(this,void 0,void 0,r.default.mark(function t(){var n,i,o,s,a=this;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureReady();case 2:if(n=U(e),i=void 0,"create_new"!==n.mode){t.next=10;break}return t.next=7,this._createDocument(n.id,n.value,n.ttl);case 7:i=t.sent,t.next=40;break;case 10:if(!(o=this.getCached(n.id,E.SyncDocument.type))){t.next=15;break}return t.abrupt("return",o);case 15:return t.prev=15,t.next=18,this._getDocument(n.id);case 18:i=t.sent,t.next=40;break;case 21:if(t.prev=21,t.t0=t.catch(15),404===t.t0.status&&"open_existing"!==n.mode){t.next=27;break}throw t.t0;case 27:return t.prev=27,t.next=30,this._createDocument(n.id,n.value,n.ttl);case 30:i=t.sent,t.next=40;break;case 33:if(t.prev=33,t.t1=t.catch(27),409!==t.t1.status){t.next=39;break}return t.abrupt("return",this.document(e));case 39:throw t.t1;case 40:return this.storeRootInSessionCache(E.SyncDocument.type,n.id,i),s=new E.SyncDocument(this.services,i,function(e,t,n){return a.removeFromCacheAndSession(e,t,n)}),s=this.entities.store(s),t.abrupt("return",F(s));case 44:case"end":return t.stop()}},t,this,[[15,21],[27,33]])}))}},{key:"map",value:function(e){return h(this,void 0,void 0,r.default.mark(function t(){var n,i,o,s,a=this;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureReady();case 2:if(n=U(e),i=void 0,"create_new"!==n.mode){t.next=10;break}return t.next=7,this._createMap(n.id,n.ttl);case 7:i=t.sent,t.next=40;break;case 10:if(!(o=this.getCached(n.id,T.SyncMap.type))){t.next=15;break}return t.abrupt("return",o);case 15:return t.prev=15,t.next=18,this._getMap(n.id,n.includeItems);case 18:i=t.sent,t.next=40;break;case 21:if(t.prev=21,t.t0=t.catch(15),404===t.t0.status&&"open_existing"!==n.mode){t.next=27;break}throw t.t0;case 27:return t.prev=27,t.next=30,this._createMap(n.id,n.ttl);case 30:i=t.sent,t.next=40;break;case 33:if(t.prev=33,t.t1=t.catch(27),409!==t.t1.status){t.next=39;break}return t.abrupt("return",this.map(e));case 39:throw t.t1;case 40:return this.storeRootInSessionCache(T.SyncMap.type,n.id,i),s=new T.SyncMap(this.services,i,function(e,t,n){return a.removeFromCacheAndSession(e,t,n)}),s=this.entities.store(s),t.abrupt("return",F(s));case 44:case"end":return t.stop()}},t,this,[[15,21],[27,33]])}))}},{key:"list",value:function(e){return h(this,void 0,void 0,r.default.mark(function t(){var n,i,o,s,a=this;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureReady();case 2:if(n=U(e),i=void 0,"create_new"!==n.mode){t.next=10;break}return t.next=7,this._createList(n.id,n.purpose,n.context,n.ttl);case 7:i=t.sent,t.next=40;break;case 10:if(!(o=this.getCached(n.id,S.SyncList.type))){t.next=15;break}return t.abrupt("return",o);case 15:return t.prev=15,t.next=18,this._getList(n.id);case 18:i=t.sent,t.next=40;break;case 21:if(t.prev=21,t.t0=t.catch(15),404===t.t0.status&&"open_existing"!==n.mode){t.next=27;break}throw t.t0;case 27:return t.prev=27,t.next=30,this._createList(n.id,n.purpose,n.context,n.ttl);case 30:i=t.sent,t.next=40;break;case 33:if(t.prev=33,t.t1=t.catch(27),409!==t.t1.status){t.next=39;break}return t.abrupt("return",this.list(e));case 39:throw t.t1;case 40:return this.storeRootInSessionCache(S.SyncList.type,n.id,i),s=new S.SyncList(this.services,i,function(e,t,n){return a.removeFromCacheAndSession(e,t,n)}),s=this.entities.store(s),t.abrupt("return",F(s));case 44:case"end":return t.stop()}},t,this,[[15,21],[27,33]])}))}},{key:"stream",value:function(e){return h(this,void 0,void 0,r.default.mark(function t(){var n,i,o,s,a=this;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureReady();case 2:if(n=U(e),i=void 0,"create_new"!==n.mode){t.next=10;break}return t.next=7,this._createStream(n.id,n.ttl);case 7:i=t.sent,t.next=40;break;case 10:if(!(o=this.getCached(n.id,j.SyncStream.type))){t.next=15;break}return t.abrupt("return",o);case 15:return t.prev=15,t.next=18,this._getStream(n.id);case 18:i=t.sent,t.next=40;break;case 21:if(t.prev=21,t.t0=t.catch(15),404===t.t0.status&&"open_existing"!==n.mode){t.next=27;break}throw t.t0;case 27:return t.prev=27,t.next=30,this._createStream(n.id,n.ttl);case 30:i=t.sent,t.next=40;break;case 33:if(t.prev=33,t.t1=t.catch(27),409!==t.t1.status){t.next=39;break}return t.abrupt("return",this.stream(e));case 39:throw t.t1;case 40:return this.storeRootInSessionCache(j.SyncStream.type,n.id,i),s=new j.SyncStream(this.services,i,function(e,t,n){return a.removeFromCacheAndSession(e,t,n)}),s=this.entities.store(s),t.abrupt("return",F(s));case 45:case"end":return t.stop()}},t,this,[[15,21],[27,33]])}))}},{key:"shutdown",value:function(){return h(this,void 0,void 0,r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.subscriptions.shutdown();case 2:return e.next=4,this.services.twilsock.disconnect();case 4:case"end":return e.stop()}},e,this)}))}},{key:"updateToken",value:function(e){return h(this,void 0,void 0,r.default.mark(function t(){var n;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.services.emsClient.setToken(e);case 2:if("NEW"!==(n=t.sent).status){t.next=8;break}throw b.default.error("Failed to update token: "+n.reason),new R.default("Failed to update token: "+n.reason,400,0);case 8:return this.services.config.updateToken(n.token),t.next=11,l.default.all([this.services.notifications.updateToken(e),this.services.twilsock.updateToken(e)]);case 11:this.fpaToken=e;case 12:case"end":return t.stop()}},t,this)}))}},{key:"connectionState",get:function(){return this.services.notifications.connectionState}}],[{key:"version",get:function(){return D}}]),t}();t.Client=L,t.SyncClient=L,t.default=L},hskC:function(e,t,n){(function(t){var r=n("S1/o").UINT64,i=r("11400714785074694791"),o=r("14029467366897019727"),s=r("1609587929392839161"),a=r("9650029242287828579"),u=r("2870177450012600261");function c(){return 2==arguments.length?new c(arguments[1]).update(arguments[0]).digest():this instanceof c?void l.call(this,arguments[0]):new c(arguments[0])}function l(e){return this.seed=e instanceof r?e.clone():r(e),this.v1=this.seed.clone().add(i).add(o),this.v2=this.seed.clone().add(o),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(i),this.total_len=0,this.memsize=0,this.memory=null,this}c.prototype.init=l,c.prototype.update=function(e){var n,s="string"==typeof e;s&&(e=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);i<128?t.push(i):i<2048?t.push(192|i>>6,128|63&i):i<55296||i>=57344?t.push(224|i>>12,128|i>>6&63,128|63&i):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++n)),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return new Uint8Array(t)}(e),s=!1,n=!0),"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer&&(n=!0,e=new Uint8Array(e));var a=0,u=e.length,c=a+u;if(0==u)return this;if(this.total_len+=u,0==this.memsize&&(this.memory=s?"":n?new Uint8Array(32):new t(32)),this.memsize+u<32)return s?this.memory+=e:n?this.memory.set(e.subarray(0,u),this.memsize):e.copy(this.memory,this.memsize,0,u),this.memsize+=u,this;if(this.memsize>0){s?this.memory+=e.slice(0,32-this.memsize):n?this.memory.set(e.subarray(0,32-this.memsize),this.memsize):e.copy(this.memory,this.memsize,0,32-this.memsize);var l=0;s?(h=r(this.memory.charCodeAt(l+1)<<8|this.memory.charCodeAt(l),this.memory.charCodeAt(l+3)<<8|this.memory.charCodeAt(l+2),this.memory.charCodeAt(l+5)<<8|this.memory.charCodeAt(l+4),this.memory.charCodeAt(l+7)<<8|this.memory.charCodeAt(l+6)),this.v1.add(h.multiply(o)).rotl(31).multiply(i),h=r(this.memory.charCodeAt((l+=8)+1)<<8|this.memory.charCodeAt(l),this.memory.charCodeAt(l+3)<<8|this.memory.charCodeAt(l+2),this.memory.charCodeAt(l+5)<<8|this.memory.charCodeAt(l+4),this.memory.charCodeAt(l+7)<<8|this.memory.charCodeAt(l+6)),this.v2.add(h.multiply(o)).rotl(31).multiply(i),h=r(this.memory.charCodeAt((l+=8)+1)<<8|this.memory.charCodeAt(l),this.memory.charCodeAt(l+3)<<8|this.memory.charCodeAt(l+2),this.memory.charCodeAt(l+5)<<8|this.memory.charCodeAt(l+4),this.memory.charCodeAt(l+7)<<8|this.memory.charCodeAt(l+6)),this.v3.add(h.multiply(o)).rotl(31).multiply(i),h=r(this.memory.charCodeAt((l+=8)+1)<<8|this.memory.charCodeAt(l),this.memory.charCodeAt(l+3)<<8|this.memory.charCodeAt(l+2),this.memory.charCodeAt(l+5)<<8|this.memory.charCodeAt(l+4),this.memory.charCodeAt(l+7)<<8|this.memory.charCodeAt(l+6)),this.v4.add(h.multiply(o)).rotl(31).multiply(i)):(h=r(this.memory[l+1]<<8|this.memory[l],this.memory[l+3]<<8|this.memory[l+2],this.memory[l+5]<<8|this.memory[l+4],this.memory[l+7]<<8|this.memory[l+6]),this.v1.add(h.multiply(o)).rotl(31).multiply(i),h=r(this.memory[(l+=8)+1]<<8|this.memory[l],this.memory[l+3]<<8|this.memory[l+2],this.memory[l+5]<<8|this.memory[l+4],this.memory[l+7]<<8|this.memory[l+6]),this.v2.add(h.multiply(o)).rotl(31).multiply(i),h=r(this.memory[(l+=8)+1]<<8|this.memory[l],this.memory[l+3]<<8|this.memory[l+2],this.memory[l+5]<<8|this.memory[l+4],this.memory[l+7]<<8|this.memory[l+6]),this.v3.add(h.multiply(o)).rotl(31).multiply(i),h=r(this.memory[(l+=8)+1]<<8|this.memory[l],this.memory[l+3]<<8|this.memory[l+2],this.memory[l+5]<<8|this.memory[l+4],this.memory[l+7]<<8|this.memory[l+6]),this.v4.add(h.multiply(o)).rotl(31).multiply(i)),a+=32-this.memsize,this.memsize=0,s&&(this.memory="")}if(a<=c-32){var f=c-32;do{var h;s?(h=r(e.charCodeAt(a+1)<<8|e.charCodeAt(a),e.charCodeAt(a+3)<<8|e.charCodeAt(a+2),e.charCodeAt(a+5)<<8|e.charCodeAt(a+4),e.charCodeAt(a+7)<<8|e.charCodeAt(a+6)),this.v1.add(h.multiply(o)).rotl(31).multiply(i),h=r(e.charCodeAt((a+=8)+1)<<8|e.charCodeAt(a),e.charCodeAt(a+3)<<8|e.charCodeAt(a+2),e.charCodeAt(a+5)<<8|e.charCodeAt(a+4),e.charCodeAt(a+7)<<8|e.charCodeAt(a+6)),this.v2.add(h.multiply(o)).rotl(31).multiply(i),h=r(e.charCodeAt((a+=8)+1)<<8|e.charCodeAt(a),e.charCodeAt(a+3)<<8|e.charCodeAt(a+2),e.charCodeAt(a+5)<<8|e.charCodeAt(a+4),e.charCodeAt(a+7)<<8|e.charCodeAt(a+6)),this.v3.add(h.multiply(o)).rotl(31).multiply(i),h=r(e.charCodeAt((a+=8)+1)<<8|e.charCodeAt(a),e.charCodeAt(a+3)<<8|e.charCodeAt(a+2),e.charCodeAt(a+5)<<8|e.charCodeAt(a+4),e.charCodeAt(a+7)<<8|e.charCodeAt(a+6)),this.v4.add(h.multiply(o)).rotl(31).multiply(i)):(h=r(e[a+1]<<8|e[a],e[a+3]<<8|e[a+2],e[a+5]<<8|e[a+4],e[a+7]<<8|e[a+6]),this.v1.add(h.multiply(o)).rotl(31).multiply(i),h=r(e[(a+=8)+1]<<8|e[a],e[a+3]<<8|e[a+2],e[a+5]<<8|e[a+4],e[a+7]<<8|e[a+6]),this.v2.add(h.multiply(o)).rotl(31).multiply(i),h=r(e[(a+=8)+1]<<8|e[a],e[a+3]<<8|e[a+2],e[a+5]<<8|e[a+4],e[a+7]<<8|e[a+6]),this.v3.add(h.multiply(o)).rotl(31).multiply(i),h=r(e[(a+=8)+1]<<8|e[a],e[a+3]<<8|e[a+2],e[a+5]<<8|e[a+4],e[a+7]<<8|e[a+6]),this.v4.add(h.multiply(o)).rotl(31).multiply(i)),a+=8}while(a<=f)}return a<c&&(s?this.memory+=e.slice(a):n?this.memory.set(e.subarray(a,c),this.memsize):e.copy(this.memory,this.memsize,a,c),this.memsize=c-a),this},c.prototype.digest=function(){var e,t,n=this.memory,c="string"==typeof n,l=0,f=this.memsize,h=new r;for(this.total_len>=32?((e=this.v1.clone().rotl(1)).add(this.v2.clone().rotl(7)),e.add(this.v3.clone().rotl(12)),e.add(this.v4.clone().rotl(18)),e.xor(this.v1.multiply(o).rotl(31).multiply(i)),e.multiply(i).add(a),e.xor(this.v2.multiply(o).rotl(31).multiply(i)),e.multiply(i).add(a),e.xor(this.v3.multiply(o).rotl(31).multiply(i)),e.multiply(i).add(a),e.xor(this.v4.multiply(o).rotl(31).multiply(i)),e.multiply(i).add(a)):e=this.seed.clone().add(u),e.add(h.fromNumber(this.total_len));l<=f-8;)c?h.fromBits(n.charCodeAt(l+1)<<8|n.charCodeAt(l),n.charCodeAt(l+3)<<8|n.charCodeAt(l+2),n.charCodeAt(l+5)<<8|n.charCodeAt(l+4),n.charCodeAt(l+7)<<8|n.charCodeAt(l+6)):h.fromBits(n[l+1]<<8|n[l],n[l+3]<<8|n[l+2],n[l+5]<<8|n[l+4],n[l+7]<<8|n[l+6]),h.multiply(o).rotl(31).multiply(i),e.xor(h).rotl(27).multiply(i).add(a),l+=8;for(l+4<=f&&(c?h.fromBits(n.charCodeAt(l+1)<<8|n.charCodeAt(l),n.charCodeAt(l+3)<<8|n.charCodeAt(l+2),0,0):h.fromBits(n[l+1]<<8|n[l],n[l+3]<<8|n[l+2],0,0),e.xor(h.multiply(i)).rotl(23).multiply(o).add(s),l+=4);l<f;)h.fromBits(c?n.charCodeAt(l++):n[l++],0,0,0),e.xor(h.multiply(u)).rotl(11).multiply(i);return t=e.clone().shiftRight(33),e.xor(t).multiply(o),t=e.clone().shiftRight(29),e.xor(t).multiply(s),t=e.clone().shiftRight(32),e.xor(t),this.init(this.seed),e},e.exports=c}).call(t,n("EuP9").Buffer)},hz4m:function(e,t,n){e.exports={h32:n("JTgQ"),h64:n("hskC")}},"i/C/":function(e,t,n){n("exh5"),e.exports=n("FeBl").Object.setPrototypeOf},i4uy:function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},i7zY:function(e,t,n){var r=n("vzCy"),i=n("oYPl"),o=n("OMJi"),s=n("JHvc"),a=n("aPRC");function u(e,t,n){r.EventEmitter.call(this),i.checkIsFunction(e,"Expected fn to be a function."),i.checkIsArray(t,"Expected args to be an array."),i.checkIsFunction(n,"Expected callback to be a function."),this.function_=e,this.arguments_=t,this.callback_=n,this.lastResult_=[],this.numRetries_=0,this.backoff_=null,this.strategy_=null,this.failAfter_=-1,this.retryPredicate_=u.DEFAULT_RETRY_PREDICATE_,this.state_=u.State_.PENDING}o.inherits(u,r.EventEmitter),u.State_={PENDING:0,RUNNING:1,COMPLETED:2,ABORTED:3},u.DEFAULT_RETRY_PREDICATE_=function(e){return!0},u.prototype.isPending=function(){return this.state_==u.State_.PENDING},u.prototype.isRunning=function(){return this.state_==u.State_.RUNNING},u.prototype.isCompleted=function(){return this.state_==u.State_.COMPLETED},u.prototype.isAborted=function(){return this.state_==u.State_.ABORTED},u.prototype.setStrategy=function(e){return i.checkState(this.isPending(),"FunctionCall in progress."),this.strategy_=e,this},u.prototype.retryIf=function(e){return i.checkState(this.isPending(),"FunctionCall in progress."),this.retryPredicate_=e,this},u.prototype.getLastResult=function(){return this.lastResult_.concat()},u.prototype.getNumRetries=function(){return this.numRetries_},u.prototype.failAfter=function(e){return i.checkState(this.isPending(),"FunctionCall in progress."),this.failAfter_=e,this},u.prototype.abort=function(){this.isCompleted()||this.isAborted()||(this.isRunning()&&this.backoff_.reset(),this.state_=u.State_.ABORTED,this.lastResult_=[new Error("Backoff aborted.")],this.emit("abort"),this.doCallback_())},u.prototype.start=function(e){i.checkState(!this.isAborted(),"FunctionCall is aborted."),i.checkState(this.isPending(),"FunctionCall already started.");var t=this.strategy_||new a;this.backoff_=e?e(t):new s(t),this.backoff_.on("ready",this.doCall_.bind(this,!0)),this.backoff_.on("fail",this.doCallback_.bind(this)),this.backoff_.on("backoff",this.handleBackoff_.bind(this)),this.failAfter_>0&&this.backoff_.failAfter(this.failAfter_),this.state_=u.State_.RUNNING,this.doCall_(!1)},u.prototype.doCall_=function(e){e&&this.numRetries_++;var t=["call"].concat(this.arguments_);r.EventEmitter.prototype.emit.apply(this,t);var n=this.handleFunctionCallback_.bind(this);this.function_.apply(null,this.arguments_.concat(n))},u.prototype.doCallback_=function(){this.callback_.apply(null,this.lastResult_)},u.prototype.handleFunctionCallback_=function(){if(!this.isAborted()){var e=Array.prototype.slice.call(arguments);this.lastResult_=e,r.EventEmitter.prototype.emit.apply(this,["callback"].concat(e));var t=e[0];t&&this.retryPredicate_(t)?this.backoff_.backoff(t):(this.state_=u.State_.COMPLETED,this.doCallback_())}},u.prototype.handleBackoff_=function(e,t,n){this.emit("backoff",e,t,n)},e.exports=u},ifoU:function(e,t,n){e.exports={default:n("3C/1"),__esModule:!0}},ioQ5:function(e,t,n){n("HpRW")("Set")},itFT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n("HSQo")),i=s(n("Zrlr")),o=s(n("wxAW"));function s(e){return e&&e.__esModule?e:{default:e}}var a="https://ers.twilio.com",u="/v1/registrations",c=function(){function e(t,n){var o=this;(0,i.default)(this,e),(0,r.default)(this,{_registrarUri:{value:((n=(n||{}).Notification||{}).ersUri||a)+u},_token:{value:t,writable:!0},registrarUri:{get:function(){return o._registrarUri}},token:{get:function(){return o._token}}})}return(0,o.default)(e,[{key:"updateToken",value:function(e){this._token=e}}]),e}();t.default=c,e.exports=t.default},"j/gz":function(e,t,n){(function(){var t,r={}.hasOwnProperty;t=function(){function e(e,t,r,i,o){this.maxNb=e,this.minTime=t,this.highWater=r,this.strategy=i,this.rejectOnDrop=o,this.limiters={},this.Bottleneck=n("qd++"),this.timeout=3e5,this.startAutoCleanup()}return e.prototype.key=function(e){var t;return null==e&&(e=""),null!=(t=this.limiters[e])?t:this.limiters[e]=new this.Bottleneck(this.maxNb,this.minTime,this.highWater,this.strategy,this.rejectOnDrop)},e.prototype.deleteKey=function(e){return null==e&&(e=""),delete this.limiters[e]},e.prototype.all=function(e){var t,n,i;for(t in i=[],n=this.limiters)r.call(n,t)&&i.push(e(n[t]));return i},e.prototype.keys=function(){return Object.keys(this.limiters)},e.prototype.startAutoCleanup=function(){var e,t;return this.stopAutoCleanup(),"function"==typeof(e=this.interval=setInterval((t=this,function(){var e,n,r,i;for(e in i=Date.now(),r=[],n=t.limiters)r.push(n[e]._nextRequest+t.timeout<i?t.deleteKey(e):void 0);return r}),this.timeout/10)).unref?e.unref():void 0},e.prototype.stopAutoCleanup=function(){return clearInterval(this.interval)},e.prototype.changeTimeout=function(e){return this.timeout=e,this.startAutoCleanup()},e}(),e.exports=t}).call(this)},"jKW+":function(e,t,n){"use strict";var r=n("kM2E"),i=n("qARP"),o=n("dNDb");r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},jyFz:function(e,t,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n("SldL"),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},jzsz:function(e,t,n){"use strict";var r=s(n("//Fk")),i=s(n("Zrlr")),o=s(n("wxAW"));function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){var t=this;(0,i.default)(this,e),this._promise=new r.default(function(e,n){t._resolve=e,t._reject=n})}return(0,o.default)(e,[{key:"update",value:function(e){this._resolve(e)}},{key:"set",value:function(e){this.current=e,this._resolve(e)}},{key:"fail",value:function(e){this._reject(e)}},{key:"promise",get:function(){return this._promise}}]),e}();t.Deferred=a},kM2E:function(e,t,n){var r=n("7KvD"),i=n("FeBl"),o=n("+ZMJ"),s=n("hJx8"),a=function(e,t,n){var u,c,l,f=e&a.F,h=e&a.G,d=e&a.S,p=e&a.P,v=e&a.B,y=e&a.W,m=h?i:i[t]||(i[t]={}),_=m.prototype,g=h?r:d?r[t]:(r[t]||{}).prototype;for(u in h&&(n=t),n)(c=!f&&g&&void 0!==g[u])&&u in m||(l=c?g[u]:n[u],m[u]=h&&"function"!=typeof g[u]?n[u]:v&&c?o(l,r):y&&g[u]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):p&&"function"==typeof l?o(Function.call,l):l,p&&((m.virtual||(m.virtual={}))[u]=l,e&a.R&&_&&!_[u]&&s(_,u,l)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,e.exports=a},kiBT:function(e,t,n){e.exports={default:n("i/C/"),__esModule:!0}},kjdv:function(e,t,n){"use strict";var r=a(n("Xxa5")),i=a(n("Zrlr")),o=a(n("wxAW")),s=a(n("//Fk"));function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(t,n){(0,i.default)(this,e),this.mcsMedia=null,this.services=n,this.state={sid:t.sid,filename:t.filename,contentType:t.contentType,size:t.size}}return(0,o.default)(e,[{key:"getContentUrl",value:function(){return e=this,void 0,t=void 0,n=r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mcsMedia){e.next=8;break}if(!this.services.mcsClient){e.next=7;break}return e.next=4,this.services.mcsClient.get(this.state.sid);case 4:this.mcsMedia=e.sent,e.next=8;break;case 7:throw new Error("Media Content Service is unavailable");case 8:return e.abrupt("return",this.mcsMedia.getContentUrl());case 9:case"end":return e.stop()}},e,this)}),new(t||(t=s.default))(function(r,i){function o(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){e.done?r(e.value):new t(function(t){t(e.value)}).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n}},{key:"sid",get:function(){return this.state.sid}},{key:"filename",get:function(){return this.state.filename}},{key:"contentType",get:function(){return this.state.contentType}},{key:"size",get:function(){return this.state.size}}]),e}();t.Media=u},knuC:function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},lAP5:function(e,t,n){"use strict";t.a=function(e){return e}},lHA8:function(e,t,n){e.exports={default:n("pPW7"),__esModule:!0}},lOnJ:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},lktj:function(e,t,n){var r=n("Ibhu"),i=n("xnc9");e.exports=Object.keys||function(e){return r(e,i)}},m9gC:function(e,t,n){var r=n("RY/4"),i=n("4WTo");e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},mClu:function(e,t,n){var r=n("kM2E");r(r.S+r.F*!n("+E39"),"Object",{defineProperty:n("evD5").f})},msXi:function(e,t,n){var r=n("77Pl");e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},mvHQ:function(e,t,n){e.exports={default:n("qkKv"),__esModule:!0}},n0T6:function(e,t,n){var r=n("Ibhu"),i=n("xnc9").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},nErT:function(e,t){var n=/^PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?$/;function r(e){return void 0===e?0:parseInt(e,10)}t.fromSeconds=function(e){if("number"!=typeof e)throw new TypeError("Argument `seconds` must be a number");var t=e%60,n=(e-t)%3600;return{hours:(e-t-n)/3600,minutes:n/60,seconds:t}},t.fromString=function(e){if("string"!=typeof e)throw new TypeError("Argument `string` must be a string");var t=e.match(n);if(null===t||void 0===t[1]&&void 0===t[2]&&void 0===t[3])throw new Error('Could not parse "'+e+'" as a duration.');return{hours:r(t[1]),minutes:r(t[2]),seconds:r(t[3])}},t.toString=function(e){"number"==typeof e&&(e=t.fromSeconds(e));var n="PT";return e.hours>0&&(n+=e.hours+"H"),e.minutes>0&&(n+=e.minutes+"M"),e.seconds>0&&(n+=e.seconds+"S"),"PT"===n&&(n+="0S"),n},t.toSeconds=function(e){var n=e;return"string"==typeof e&&(n=t.fromString(e)),3600*n.hours+60*n.minutes+n.seconds}},o6NP:function(e,t,n){"use strict";var r,i=(r=n("Zrlr"))&&r.__esModule?r:{default:r};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){(0,i.default)(this,e);var n=t.emsClient||{};this.url=n.url||n.emsUri||n.emsUrl||"https://ems."+(t.realm||"us1")+".twilio.com/v1/token"}},oM7Q:function(e,t,n){n("sF+V");var r=n("FeBl").Object;e.exports=function(e,t){return r.create(e,t)}},oNmr:function(e,t,n){n("9Bbf")("Set")},oQSX:function(e,t,n){"use strict";var r=a(n("Xxa5")),i=a(n("Zrlr")),o=a(n("wxAW")),s=a(n("//Fk"));function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n("dYWg"),c=n("+DgU"),l=n("pLhp"),f=function(){function e(t,n,r){(0,i.default)(this,e),this.client=t,this.services=n,this.url=r}return(0,o.default)(e,[{key:"getChannels",value:function(){var e,t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=this,void 0,t=void 0,n=r.default.mark(function e(){var t,n,o=this;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new u.UriBuilder(this.url).arg("PageToken",i.pageToken).build(),e.next=3,this.services.network.get(t);case 3:return e.abrupt("return",new c.RestPaginator((n=e.sent).body.channels.map(function(e){return new l.ChannelDescriptor(o.client,e)}),function(e){return o.getChannels({pageToken:e})},n.body.meta.previous_token,n.body.meta.next_token));case 5:case"end":return e.stop()}},e,this)}),new(t||(t=s.default))(function(r,i){function o(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){e.done?r(e.value):new t(function(t){t(e.value)}).then(o,s)}a((n=n.apply(e,[])).next())})}}]),e}();t.UserChannels=f},oYPl:function(e,t,n){e.exports=n("63Gd")},oeOm:function(e,t,n){var r=n("7Doy");e.exports=function(e,t){return new(r(e))(t)}},pFYg:function(e,t,n){"use strict";t.__esModule=!0;var r=s(n("Zzip")),i=s(n("5QVw")),o="function"==typeof i.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function s(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof i.default&&"symbol"===o(r.default)?function(e){return"undefined"==typeof e?"undefined":o(e)}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":"undefined"==typeof e?"undefined":o(e)}},pKtz:function(e,t,n){"use strict";var r=f(n("Xxa5")),i=f(n("d7EF")),o=f(n("BO1k")),s=f(n("Dd8w")),a=f(n("ifoU")),u=f(n("Zrlr")),c=f(n("wxAW")),l=f(n("//Fk"));function f(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var h=n("e21k"),d=n("JuVV"),p=n("FTGv"),v=n("Wl86"),y=function(){function e(t){(0,u.default)(this,e),this.localObject=t,this.pendingCorrelationId=null,this.pendingAction=null,this.established=!1,this.retryCount=0}return(0,c.default)(e,[{key:"update",value:function(e,t){this.localObject._update(e,t)}},{key:"updatePending",value:function(e,t){this.pendingAction=e,this.pendingCorrelationId=t}},{key:"reset",value:function(){this.updatePending(null,null),this.retryCount=0,this.established=!1,this.localObject._setSubscriptionState("none")}},{key:"markAsFailed",value:function(e){this.rejectedWithError=e.error,this.updatePending(null,null),this.localObject.reportFailure(new p.SyncError("Failed to subscribe on service events: "+e.error.message,e.error.status,e.error.code))}},{key:"complete",value:function(e){this.updatePending(null,null),this.established=!0,this.localObject._advanceLastEventId(e)}},{key:"sid",get:function(){return this.localObject.sid}},{key:"type",get:function(){return this.localObject.type}},{key:"lastEventId",get:function(){return this.localObject.lastEventId}},{key:"isEstablished",get:function(){return this.established}}]),e}(),m=function(){function e(t){var n=this;(0,u.default)(this,e),this.isConnected=!1,this.maxBatchSize=100,this.subscriptionTtlTimer=null,this.pendingPokeReason=null,this.services=t,this.subscriptions=new a.default,this.persisted=new a.default,this.latestPokeResponseArrivalTimestampByCorrelationId=new a.default,this.backoff=h.exponential((0,s.default)({randomisationFactor:.2,initialDelay:100,maxDelay:12e4},this.services.config.backoffConfig)),this.backoff.on("ready",function(){var e=n.getSubscriptionUpdateBatch(),t=e.action;t?n.applyNewSubscriptionUpdateBatch(t,e.subscriptions):(n.backoff.reset(),d.default.debug("All subscriptions resolved."))})}return(0,c.default)(e,[{key:"getSubscriptionUpdateBatch",value:function(){function e(e,t,n,r){var s=[],a=!0,u=!1,c=void 0;try{for(var l,f=(0,o.default)(e);!(a=(l=f.next()).done);a=!0){var h=(0,i.default)(l.value,2),d=h[1];if(!t.get(h[0])&&n!==d.pendingAction&&!d.rejectedWithError&&(s.push(d),r&&s.length>=r))break}}catch(e){u=!0,c=e}finally{try{!a&&f.return&&f.return()}finally{if(u)throw c}}return s}var t=e(this.subscriptions,this.persisted,"establish",this.maxBatchSize);if(t.length>0)return{action:"establish",subscriptions:t};var n=e(this.persisted,this.subscriptions,"cancel",this.maxBatchSize);return n.length>0?{action:"cancel",subscriptions:n}:{action:null,subscriptions:null}}},{key:"persist",value:function(){try{this.backoff.backoff()}catch(e){}}},{key:"applyNewSubscriptionUpdateBatch",value:function(e,t){return n=this,void 0,i=void 0,s=r.default.mark(function n(){var i,s,a,u,c,l,f,h,p,y,m,_,g,b,w,k,x=this;return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.isConnected){n.next=4;break}return d.default.debug("Twilsock connection (required for subscription) not ready; waiting\u2026"),this.backoff.reset(),n.abrupt("return");case 4:for(t=this.processLocalActions(e,t),i=(new Date).getTime(),s=!0,a=!1,u=void 0,n.prev=9,c=(0,o.default)(t);!(s=(l=c.next()).done);s=!0)this.recordActionAttemptOn(l.value,e,i);n.next=17;break;case 13:n.prev=13,n.t0=n.catch(9),a=!0,u=n.t0;case 17:n.prev=17,n.prev=18,!s&&c.return&&c.return();case 20:if(n.prev=20,!a){n.next=23;break}throw u;case 23:return n.finish(20);case 24:return n.finish(17);case 25:return f=this.pendingPokeReason,this.pendingPokeReason=null,n.prev=27,n.next=30,this.request(e,i,f,t);case 30:p=(h=n.sent).body.max_batch_size,!isNaN(parseInt(p))&&isFinite(p)&&p>0&&(this.maxBatchSize=p),this.subscriptionTtlTimer||(y=h.body.ttl_in_s,!isNaN(parseFloat(y))&&isFinite(y)&&y>0&&(this.subscriptionTtlTimer=setTimeout(function(){return x.onSubscriptionTtlElapsed()},1e3*y))),"establish"===e&&(m=h.body.estimated_delivery_in_ms,!isNaN(parseFloat(m))&&isFinite(m)&&m>0?setTimeout(function(){return x.verifyPokeDelivery(i,m,t)},m):d.default.error("Invalid timeout: "+m),t.filter(function(e){return e.pendingCorrelationId===i}).forEach(function(e){return e.localObject._setSubscriptionState("response_in_flight")})),this.backoff.reset(),n.next=60;break;case 38:for(n.prev=38,n.t1=n.catch(27),_=!0,g=!1,b=void 0,n.prev=43,w=(0,o.default)(t);!(_=(k=w.next()).done);_=!0)this.recordActionFailureOn(k.value,e);n.next=51;break;case 47:n.prev=47,n.t2=n.catch(43),g=!0,b=n.t2;case 51:n.prev=51,n.prev=52,!_&&w.return&&w.return();case 54:if(n.prev=54,!g){n.next=57;break}throw b;case 57:return n.finish(54);case 58:return n.finish(51);case 59:n.t1 instanceof v.TwilsockUnavailableError?(d.default.debug("Twilsock connection (required for subscription) not ready (c:"+i+"); waiting\u2026"),this.backoff.reset()):(d.default.debug("Failed an attempt to "+e+" subscriptions (c:"+i+"); retrying",n.t1),this.persist());case 60:case"end":return n.stop()}},n,this,[[9,13,17,25],[18,,20,24],[27,38],[43,47,51,59],[52,,54,58]])}),new(i||(i=l.default))(function(e,t){function r(e){try{a(s.next(e))}catch(e){t(e)}}function o(e){try{a(s.throw(e))}catch(e){t(e)}}function a(t){t.done?e(t.value):new i(function(e){e(t.value)}).then(r,o)}a((s=s.apply(n,[])).next())});var n,i,s}},{key:"verifyPokeDelivery",value:function(e,t,n){var r=this,i=this.latestPokeResponseArrivalTimestampByCorrelationId.get(e),o=i?(new Date).getTime()-i:t;o>=t?(n.filter(function(t){return t.pendingCorrelationId===e}).forEach(function(e){e.updatePending(null,null),e.retryCount++,r.persisted.delete(e.sid)}),this.persist(),this.latestPokeResponseArrivalTimestampByCorrelationId.delete(e)):setTimeout(function(){return r.verifyPokeDelivery(e,t,n)},t-o)}},{key:"processLocalActions",value:function(e,t){return"cancel"===e?t.filter(function(e){return!e.rejectedWithError}):t}},{key:"recordActionAttemptOn",value:function(e,t,n){if(e.localObject._setSubscriptionState("request_in_flight"),"establish"===t)this.persisted.set(e.sid,e),e.updatePending(t,n);else{var r=this.persisted.get(e.sid);r&&r.updatePending(t,n)}}},{key:"recordActionFailureOn",value:function(e,t){e.localObject._setSubscriptionState("none"),e.updatePending(null,null),"establish"===t&&this.persisted.delete(e.sid)}},{key:"request",value:function(e,t,n,r){var i=r.map(function(t){return{object_sid:t.sid,object_type:t.type,last_event_id:"establish"===e?t.lastEventId:void 0}}),o=r.filter(function(e){return e.retryCount>0}).length;d.default.debug("Attempting '"+e+"' request (c:"+t+"):",i);var s={event_protocol_version:3,action:e,correlation_id:t,retried_requests:o,ttl_in_s:-1,requests:i};return"ttl"===n&&(s.reason=n),this.services.network.post(this.services.config.subscriptionsUri,s,null,!0)}},{key:"add",value:function(e,t){d.default.debug("Establishing intent to subscribe to "+e);var n=this.subscriptions.get(e);n&&n.lastEventId===t.lastEventId||(this.persisted.delete(e),this.subscriptions.set(e,new y(t)),this.persist())}},{key:"remove",value:function(e){d.default.debug("Establishing intent to unsubscribe from "+e),this.subscriptions.delete(e)&&this.persist()}},{key:"acceptMessage",value:function(e,t){switch(d.default.trace("Subscriptions received",e),e.correlation_id&&this.latestPokeResponseArrivalTimestampByCorrelationId.set(e.correlation_id,(new Date).getTime()),e.event_type){case"subscription_established":this.applySubscriptionEstablishedMessage(e.event,e.correlation_id);break;case"subscription_canceled":this.applySubscriptionCancelledMessage(e.event,e.correlation_id);break;case"subscription_failed":this.applySubscriptionFailedMessage(e.event,e.correlation_id);break;case(e.event_type.match(/^(?:map|list|document|stream)_/)||{}).input:this.applyEventToSubscribedEntity(e.event_type.match(/^map_/)?e.event.map_sid:e.event_type.match(/^list_/)?e.event.list_sid:e.event_type.match(/^document_/)?e.event.document_sid:e.event_type.match(/^stream_/)?e.event.stream_sid:void 0,e,t);break;default:d.default.debug("Dropping unknown message type "+e.event_type)}}},{key:"applySubscriptionEstablishedMessage",value:function(e,t){var n=e.object_sid,r=this.persisted.get(e.object_sid);r&&r.pendingCorrelationId===t?"interrupted"===e.replay_status?(d.default.debug("Event Replay for subscription to "+n+" (c:"+t+") interrupted; continuing eagerly."),r.updatePending(null,null),this.persisted.delete(r.sid),this.backoff.reset()):"completed"===e.replay_status&&(d.default.debug("Event Replay for subscription to "+n+" (c:"+t+") completed. Subscription is ready."),r.complete(e.last_event_id),this.persisted.set(e.object_sid,r),r.localObject._setSubscriptionState("established"),this.backoff.reset()):d.default.debug("Late message for "+e.object_sid+" (c:"+t+") dropped."),this.persist()}},{key:"applySubscriptionCancelledMessage",value:function(e,t){var n=this.persisted.get(e.object_sid);n&&n.pendingCorrelationId===t?(n.updatePending(null,null),n.localObject._setSubscriptionState("none"),this.persisted.delete(e.object_sid)):d.default.debug("Late message for "+e.object_sid+" (c:"+t+") dropped."),this.persist()}},{key:"applySubscriptionFailedMessage",value:function(e,t){var n=e.object_sid,r=this.subscriptions.get(n),i=this.persisted.get(n);r&&i?i.pendingCorrelationId===t&&(d.default.error("Failed to subscribe on "+i.sid,e.error),i.markAsFailed(e),i.localObject._setSubscriptionState("none")):!r&&i&&(this.persisted.delete(n),i.localObject._setSubscriptionState("none")),this.persist()}},{key:"applyEventToSubscribedEntity",value:function(e,t,n){if(e){var r;n=n||(r=this.persisted.get(e))&&r.isEstablished;var i=this.subscriptions.get(e);i?(t.event.type=t.event_type,i.update(t.event,n)):d.default.debug("Message dropped for SID '"+e+"', for which there is no subscription.")}}},{key:"onConnectionStateChanged",value:function(e){this.isConnected=e,e&&this.poke("reconnect")}},{key:"onSubscriptionTtlElapsed",value:function(){this.isConnected&&this.poke("ttl")}},{key:"poke",value:function(e){d.default.debug("Triggering event replay for all subscriptions, reason="+e),this.pendingPokeReason=e,this.subscriptionTtlTimer&&(clearTimeout(this.subscriptionTtlTimer),this.subscriptionTtlTimer=null);var t=[],n=!0,r=!1,i=void 0;try{for(var s,a=(0,o.default)(this.persisted.values());!(n=(s=a.next()).done);n=!0){var u=s.value;u.reset(),u.rejectedWithError&&t.push(u)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}this.persisted.clear();var c=!0,l=!1,f=void 0;try{for(var h,p=(0,o.default)(t);!(c=(h=p.next()).done);c=!0){var v=h.value;this.persisted.set(v.sid,v)}}catch(e){l=!0,f=e}finally{try{!c&&p.return&&p.return()}finally{if(l)throw f}}this.persist()}},{key:"shutdown",value:function(){this.backoff.reset(),this.subscriptions.clear()}}]),e}();t.Subscriptions=m,t.default=m},pLhp:function(e,t,n){"use strict";var r=o(n("Zrlr")),i=o(n("wxAW"));function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n("P35s"),a=n("KcGS"),u=new s.Logger;function c(e){try{return new Date(e)}catch(e){return null}}var l=function(){function e(t,n){(0,r.default)(this,e),this.client=t,this.descriptor=n,n.sid?(this.sid=n.sid,this.channel=n.sid+".channel"):(this.sid=n.channel_sid,this.channel=n.channel_sid+".channel"),this.uniqueName=n.unique_name,this.friendlyName=n.friendly_name,this.attributes=function(e){try{return JSON.parse(e)}catch(e){u.warn("Failed to parse channel attributes",e)}return{}}(n.attributes),this.createdBy=n.created_by,this.dateCreated=c(n.date_created),this.dateUpdated=c(n.date_updated),this.messagesCount=n.messages_count,this.membersCount=n.members_count,this.type=n.type,this.isPrivate="private"==n.type,this.lastConsumedMessageIndex=n.last_consumed_message_index,this.status=n.status?a.filterStatus(n.status):"unknown"}return(0,i.default)(e,[{key:"getChannel",value:function(){return this.client.getChannelBySid(this.sid)}}]),e}();t.ChannelDescriptor=l},pPW7:function(e,t,n){n("M6a0"),n("zQR9"),n("+tPU"),n("ttyz"),n("BDhv"),n("oNmr"),n("ioQ5"),e.exports=n("FeBl").Set},pQdt:function(e,t,n){"use strict";var r,i=(r=n("Zrlr"))&&r.__esModule?r:{default:r};Object.defineProperty(t,"__esModule",{value:!0});var o=function e(){(0,i.default)(this,e)};o.HTTP_200_OK=200,o.HTTP_400_BAD_REQUEST=400,o.HTTP_404_NOT_FOUND=404,o.ACCESS_FORBIDDEN_FOR_IDENTITY=54007,o.LIST_NOT_FOUND=54150,t.ResponseCodes=o},pRCB:function(e,t,n){var r=n("kM2E");r(r.S+r.F*!n("+E39"),"Object",{defineProperties:n("qio6")})},phvU:function(e,t,n){"use strict";var r=o(n("Zrlr")),i=o(n("wxAW"));function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t){(0,r.default)(this,e),this.data=t}return(0,i.default)(e,[{key:"update",value:function(e,t,n,r){return this.data.lastEventId=e,this.data.revision=t,this.data.value=n,this.data.dateUpdated=r,this}},{key:"updateDateExpires",value:function(e){this.data.dateExpires=e}},{key:"uri",get:function(){return this.data.uri}},{key:"revision",get:function(){return this.data.revision}},{key:"lastEventId",get:function(){return this.data.lastEventId}},{key:"dateUpdated",get:function(){return this.data.dateUpdated}},{key:"dateExpires",get:function(){return this.data.dateExpires}},{key:"index",get:function(){return this.data.index}},{key:"value",get:function(){return this.data.value}}]),e}();t.ListItem=s,t.default=s},qARP:function(e,t,n){"use strict";var r=n("lOnJ");e.exports.f=function(e){return new function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=r(t),this.reject=r(n)}(e)}},qCoq:function(e,t,n){"use strict";var r=n("9C8M"),i=n("LIJb");e.exports=n("qo66")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},qVh1:function(e,t,n){"use strict";var r=s(n("ifoU")),i=s(n("Zrlr")),o=s(n("wxAW"));function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){(0,i.default)(this,e),this.names=new r.default,this.entities=new r.default}return(0,o.default)(e,[{key:"store",value:function(e){return this.entities.get(e.sid)||(this.entities.set(e.sid,e),e.uniqueName&&this.names.set(e.type+"::"+e.uniqueName,e.sid),e)}},{key:"getResolved",value:function(e,t){var n=this.names.get(t+"::"+e);return n?this.entities.get(n):null}},{key:"get",value:function(e,t){return this.entities.get(e)||this.getResolved(e,t)||null}},{key:"remove",value:function(e){var t=this.entities.get(e);t&&(this.entities.delete(e),t.uniqueName&&this.names.delete(t.type+"::"+t.uniqueName))}}]),e}();t.EntitiesCache=a},"qd++":function(e,t,n){(function(){var t,r=function(e,t){return function(){return e.apply(t,arguments)}},i=[].slice;t=function(){function e(t,n,i,o,s){this.maxNb=null!=t?t:0,this.minTime=null!=n?n:0,this.highWater=null!=i?i:-1,this.strategy=null!=o?o:e.prototype.strategy.LEAK,this.rejectOnDrop=null!=s&&s,this.schedulePriority=r(this.schedulePriority,this),this.submitPriority=r(this.submitPriority,this),this.submit=r(this.submit,this),this._nextRequest=Date.now(),this._nbRunning=0,this._queues=this._makeQueues(),this._running={},this._nextIndex=0,this._unblockTime=0,this.penalty=15*this.minTime||5e3,this.interrupt=!1,this.reservoir=null,this.limiter=null,this.events={}}return e.default=e,e.strategy=e.prototype.strategy={LEAK:1,OVERFLOW:2,OVERFLOW_PRIORITY:4,BLOCK:3},e.Cluster=e.prototype.Cluster=n("j/gz"),e.DLList=e.prototype.DLList=n("EBT7"),e.Promise=e.prototype.Promise=function(){try{return n("0Qa9")}catch(e){return"undefined"!=typeof Promise&&null!==Promise?Promise:function(){throw new Error("Bottleneck: install 'bluebird' or use Node 0.12 or higher for Promise support")}}}(),e.prototype._trigger=function(e,t){return this.rejectOnDrop&&"dropped"===e&&t[0].cb.apply({},[new Error("This job has been dropped by Bottleneck")]),setTimeout((n=this,function(){var r;return null!=(r=n.events[e])?r.forEach(function(e){return e.apply({},t)}):void 0}),0);var n},e.prototype._makeQueues=function(){var t,n;for(n=[],t=1;t<=10;++t)n.push(new e.prototype.DLList);return n},e.prototype.chain=function(e){return this.limiter=e,this},e.prototype.isBlocked=function(){return this._unblockTime>=Date.now()},e.prototype._sanitizePriority=function(e){var t;return(t=~~e!==e?5:e)<0?0:t>9?9:t},e.prototype._find=function(e,t){var n,r,i,o;for(n=r=0,i=e.length;r<i;n=++r)if(t(o=e[n]))return o;return[]},e.prototype.nbQueued=function(e){return null!=e?this._queues[this._sanitizePriority(e)].length:this._queues.reduce(function(e,t){return e+t.length},0)},e.prototype.nbRunning=function(){return this._nbRunning},e.prototype._getFirst=function(e){return this._find(e,function(e){return e.length>0})},e.prototype._conditionsCheck=function(){return(this.nbRunning()<this.maxNb||this.maxNb<=0)&&(null==this.reservoir||this.reservoir>0)},e.prototype.check=function(){return this._conditionsCheck()&&this._nextRequest-Date.now()<=0},e.prototype._tryToRun=function(){var e,t,n,r,i,o;return!!(this._conditionsCheck()&&(r=this.nbQueued())>0)&&(this._nbRunning++,null!=this.reservoir&&this.reservoir--,i=Math.max(this._nextRequest-Date.now(),0),this._nextRequest=Date.now()+i+this.minTime,n=this._getFirst(this._queues).shift(),1===r&&this._trigger("empty",[]),e=!1,t=this._nextIndex++,this._running[t]={timeout:setTimeout((o=this,function(){var r;return r=function(){var r;if(!e&&(e=!0,delete o._running[t],o._nbRunning--,o._tryToRun(),0===o.nbRunning()&&0===o.nbQueued()&&o._trigger("idle",[]),!o.interrupt))return null!=(r=n.cb)?r.apply({},Array.prototype.slice.call(arguments,0)):void 0},null!=o.limiter?o.limiter.submit.apply(o.limiter,Array.prototype.concat(n.task,n.args,r)):n.task.apply({},n.args.concat(r))}),i),job:n},!0)},e.prototype.submit=function(){var e;return e=1<=arguments.length?i.call(arguments,0):[],this.submitPriority.apply({},Array.prototype.concat(5,e))},e.prototype.submitPriority=function(){var t,n,r,o,s;return r=arguments[0],n={task:arguments[1],args:4<=arguments.length?i.call(arguments,2,t=arguments.length-1):(t=2,[]),cb:arguments[t++]},r=this._sanitizePriority(r),o=this.highWater>=0&&this.nbQueued()===this.highWater&&!this.check(),this.strategy===e.prototype.strategy.BLOCK&&(o||this.isBlocked())?(this._unblockTime=Date.now()+this.penalty,this._nextRequest=this._unblockTime+this.minTime,this._queues=this._makeQueues(),this._trigger("dropped",[n]),!0):o&&(null!=(s=this.strategy===e.prototype.strategy.LEAK?this._getFirst(this._queues.slice(r).reverse()).shift():this.strategy===e.prototype.strategy.OVERFLOW_PRIORITY?this._getFirst(this._queues.slice(r+1).reverse()).shift():this.strategy===e.prototype.strategy.OVERFLOW?n:void 0)&&this._trigger("dropped",[s]),null==s||this.strategy===e.prototype.strategy.OVERFLOW)?o:(this._queues[r].push(n),this._tryToRun(),o)},e.prototype.schedule=function(){var e;return e=1<=arguments.length?i.call(arguments,0):[],this.schedulePriority.apply({},Array.prototype.concat(5,e))},e.prototype.schedulePriority=function(){var t,n,r,o,s;return n=arguments[0],r=arguments[1],t=3<=arguments.length?i.call(arguments,2):[],o=function(){var e,t,n;return e=2<=arguments.length?i.call(arguments,0,n=arguments.length-1):(n=0,[]),t=arguments[n++],r.apply({},e).then(function(){var e;return e=1<=arguments.length?i.call(arguments,0):[],t.apply({},Array.prototype.concat(null,e))}).catch(function(){var e;return e=1<=arguments.length?i.call(arguments,0):[],t.apply({},e)})},new e.prototype.Promise((s=this,function(e,r){return s.submitPriority.apply({},Array.prototype.concat(n,o,t,function(){var t;return(null!=(t=1<=arguments.length?i.call(arguments,0):[])[0]?r:(t.shift(),e)).apply({},t)}))}))},e.prototype.changeSettings=function(e,t,n,r,i){for(this.maxNb=null!=e?e:this.maxNb,this.minTime=null!=t?t:this.minTime,this.highWater=null!=n?n:this.highWater,this.strategy=null!=r?r:this.strategy,this.rejectOnDrop=null!=i?i:this.rejectOnDrop;this._tryToRun(););return this},e.prototype.changePenalty=function(e){return this.penalty=null!=e?e:this.penalty,this},e.prototype.changeReservoir=function(e){for(this.reservoir=e;this._tryToRun(););return this},e.prototype.incrementReservoir=function(e){return null==e&&(e=0),this.changeReservoir(this.reservoir+e),this},e.prototype.on=function(e,t){return null!=this.events[e]?this.events[e].push(t):this.events[e]=[t],this},e.prototype.removeAllListeners=function(e){return null==e&&(e=null),null!=e?delete this.events[e]:this.events={},this},e.prototype.stopAll=function(e){var t,n,r,o,s,a,u;for(this.interrupt=null!=e?e:this.interrupt,t=0,a=(o=Object.keys(this._running)).length;t<a;t++)r=o[t],clearTimeout(this._running[r].timeout);if(this._tryToRun=function(){},this.check=function(){return!1},this.submit=this.submitPriority=function(){var e;return 2<=arguments.length?i.call(arguments,0,e=arguments.length-1):e=0,(0,arguments[e++])(new Error("This limiter is stopped"))},this.schedule=this.schedulePriority=function(){return Promise.reject(new Error("This limiter is stopped"))},this.interrupt)for(s=0,u=o.length;s<u;s++)this._trigger("dropped",[this._running[r=o[s]].job]);for(;n=this._getFirst(this._queues).shift();)this._trigger("dropped",[n]);return this._trigger("empty",[]),0===this.nbRunning()&&this._trigger("idle",[]),this},e}(),e.exports=t}).call(this)},qio6:function(e,t,n){var r=n("evD5"),i=n("77Pl"),o=n("lktj");e.exports=n("+E39")?Object.defineProperties:function(e,t){i(e);for(var n,s=o(t),a=s.length,u=0;a>u;)r.f(e,n=s[u++],t[n]);return e}},qkKv:function(e,t,n){var r=n("FeBl"),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},qo66:function(e,t,n){"use strict";var r=n("7KvD"),i=n("kM2E"),o=n("06OY"),s=n("S82l"),a=n("hJx8"),u=n("xH/j"),c=n("NWt+"),l=n("2KxR"),f=n("EqjI"),h=n("e6n0"),d=n("evD5").f,p=n("ALrJ")(0),v=n("+E39");e.exports=function(e,t,n,y,m,_){var g=r[e],b=g,w=m?"set":"add",k=b&&b.prototype,x={};return v&&"function"==typeof b&&(_||k.forEach&&!s(function(){(new b).entries().next()}))?(b=t(function(t,n){l(t,b,e,"_c"),t._c=new g,void 0!=n&&c(n,m,t[w],t)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in k&&(!_||"clear"!=e)&&a(b.prototype,e,function(n,r){if(l(this,b,e),!t&&_&&!f(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i})}),_||d(b.prototype,"size",{get:function(){return this._c.size}})):(b=y.getConstructor(t,e,m,w),u(b.prototype,n),o.NEED=!0),h(b,e),x[e]=b,i(i.G+i.W+i.F,x),_||y.setStrong(b,e,m),b}},qyJz:function(e,t,n){"use strict";var r=n("+ZMJ"),i=n("kM2E"),o=n("sB3e"),s=n("msXi"),a=n("Mhyx"),u=n("QRG4"),c=n("fBQ2"),l=n("3fs2");i(i.S+i.F*!n("dY0y")(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,f,h=o(e),d="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,y=void 0!==v,m=0,_=l(h);if(y&&(v=r(v,p>2?arguments[2]:void 0,2)),void 0==_||d==Array&&a(_))for(n=new d(t=u(h.length));t>m;m++)c(n,m,y?v(h[m],m):h[m]);else for(f=_.call(h),n=new d;!(i=f.next()).done;m++)c(n,m,y?s(f,v,[i.value,m],!0):i.value);return n.length=m,n}})},"r/lS":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n("2D4L"))&&r.__esModule?r:{default:r};t.default=i.default,e.exports=t.default},s1go:function(e,t,n){"use strict";var r=o(n("Zrlr")),i=o(n("wxAW"));function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n("VXCu"),a=function(){function e(t,n){(0,r.default)(this,e),this.value=t,this.revision=n||0}return(0,i.default)(e,[{key:"isValid",get:function(){return!0}}]),e}(),u=function(){function e(t){(0,r.default)(this,e),this.revision=t}return(0,i.default)(e,[{key:"isValid",get:function(){return!1}}]),e}(),c=function(){function e(){(0,r.default)(this,e),this.items=new s.TreeMap}return(0,i.default)(e,[{key:"store",value:function(e,t,n){var r=this.items.get(e);return r&&r.revision>n?r.isValid?r.value:null:(this.items.set(e,new a(t,n)),t)}},{key:"delete",value:function(e,t){var n=this.items.get(e);(!n||n.revision<t)&&this.items.set(e,new u(t))}},{key:"isKnown",value:function(e,t){var n=this.items.get(e);return n&&n.revision>=t}},{key:"get",value:function(e){var t=this.items.get(e);return t&&t.isValid?t.value:null}},{key:"has",value:function(e){var t=this.items.get(e);return t&&t.isValid}}]),e}();t.Cache=c,t.default=c},sB3e:function(e,t,n){var r=n("52gC");e.exports=function(e){return Object(r(e))}},"sF+V":function(e,t,n){var r=n("kM2E");r(r.S,"Object",{create:n("Yobk")})},sGH6:function(e,t,n){"use strict";var r=f(n("Dd8w")),i=f(n("Xxa5")),o=f(n("Zx67")),s=f(n("Zrlr")),a=f(n("wxAW")),u=f(n("zwoO")),c=f(n("Pf15")),l=f(n("//Fk"));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e,t,n,r){return new(n||(n=l.default))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var d=n("urP9"),p=n("JuVV"),v=n("xIvG"),y=n("W81h"),m=n("MeuS"),_=n("s1go"),g=n("eoM1"),b=n("FTGv"),w=function(e){function t(e,n,r){(0,s.default)(this,t);var i=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,r));return i.updateMergingQueue=new g.NamespacedMergingQueue(function(e,t){return"number"==typeof t.ttl?{ttl:t.ttl}:e}),i.cache=new _.Cache,i.descriptor=n,i.descriptor.date_updated=new Date(i.descriptor.date_updated),n.items&&n.items.forEach(function(e){e.date_updated=new Date(e.date_updated),i.cache.store(e.key,new y.MapItem(e),e.last_event_id)}),i}return(0,c.default)(t,v.SyncEntity),(0,a.default)(t,[{key:"set",value:function(e,t,n){return h(this,void 0,void 0,i.default.mark(function r(){var o,s=this;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return d.validateOptionalTtl((o=n||{}).ttl),r.abrupt("return",this.updateMergingQueue.squashAndAdd(e,o,function(n){return s._putItemUnconditionally(e,t,n.ttl)}));case 3:case"end":return r.stop()}},r,this)}))}},{key:"get",value:function(e){return h(this,void 0,void 0,i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.cache.has(e)){t.next=4;break}return t.abrupt("return",this.cache.get(e));case 4:return t.abrupt("return",this._getItemFromServer(e));case 5:case"end":return t.stop()}},t,this)}))}},{key:"_getItemFromServer",value:function(e){return h(this,void 0,void 0,i.default.mark(function t(){var n;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.queryItems({key:e});case 2:if(!((n=t.sent).items.length<1)){t.next=7;break}throw new b.SyncError("No item with key "+e+" found",404,54201);case 7:return t.abrupt("return",n.items[0]);case 8:case"end":return t.stop()}},t,this)}))}},{key:"mutate",value:function(e,t,n){return h(this,void 0,void 0,i.default.mark(function r(){var o,s=this;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return d.validateOptionalTtl((o=n||{}).ttl),r.abrupt("return",this.updateMergingQueue.add(e,o,function(n){return s._putItemWithIfMatch(e,t,n.ttl)}));case 3:case"end":return r.stop()}},r,this)}))}},{key:"update",value:function(e,t,n){return h(this,void 0,void 0,i.default.mark(function o(){return i.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",this.mutate(e,function(e){return(0,r.default)(e,t)},n));case 1:case"end":return i.stop()}},o,this)}))}},{key:"_putItemUnconditionally",value:function(e,t,n){return h(this,void 0,void 0,i.default.mark(function r(){var o,s;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this._putItemToServer(e,t,void 0,n);case 2:return this._handleItemMutated((s=(o=r.sent).item).key,s.url,s.last_event_id,s.revision,s.data,s.date_updated,s.date_expires,o.added,!1),r.abrupt("return",this.cache.get(s.key));case 6:case"end":return r.stop()}},r,this)}))}},{key:"_putItemWithIfMatch",value:function(e,t,n){return h(this,void 0,void 0,i.default.mark(function r(){var o,s,a,u,c;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.get(e).catch(function(t){if(404===t.status)return new y.MapItem({key:e,data:{},last_event_id:-1,revision:"-1",url:null,date_updated:null,date_expires:null});throw t});case 2:if(!(s=t(d.deepClone((o=r.sent).value)))){r.next=26;break}return a=o.revision,r.prev=6,r.next=9,this._putItemToServer(e,s,a,n);case 9:return this._handleItemMutated((c=(u=r.sent).item).key,c.url,c.last_event_id,c.revision,c.data,c.date_updated,c.date_expires,u.added,!1),r.abrupt("return",this.cache.get(c.key));case 15:if(r.prev=15,r.t0=r.catch(6),412!==r.t0.status){r.next=23;break}return r.next=20,this._getItemFromServer(e);case 20:return r.abrupt("return",this._putItemWithIfMatch(e,t,n));case 23:throw r.t0;case 24:r.next=27;break;case 26:return r.abrupt("return",o);case 27:case"end":return r.stop()}},r,this,[[6,15]])}))}},{key:"_putItemToServer",value:function(e,t,n,r){return h(this,void 0,void 0,i.default.mark(function o(){var s,a,u,c;return i.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return s=new d.UriBuilder(this.links.items).pathSegment(e).build(),a={data:t},"number"==typeof r&&(a.ttl=r),i.prev=3,i.next=6,this.services.network.put(s,a,n);case 6:return(c=(u=i.sent).body).data=t,c.date_updated=new Date(c.date_updated),i.abrupt("return",{added:201===u.status.code,item:c});case 14:throw i.prev=14,i.t0=i.catch(3),404===i.t0.status&&this.onRemoved(!1),i.t0;case 18:case"end":return i.stop()}},o,this,[[3,14]])}))}},{key:"remove",value:function(e){return h(this,void 0,void 0,i.default.mark(function t(){var n,r;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"!=typeof e){t.next=2;break}throw new Error("Key argument is invalid");case 2:return t.next=4,this.get(e);case 4:return n=t.sent,t.next=7,this.services.network.delete(n.uri);case 7:this._handleItemRemoved(e,(r=t.sent).body.last_event_id,void 0,new Date(r.body.date_updated),!1);case 9:case"end":return t.stop()}},t,this)}))}},{key:"queryItems",value:function(e){return h(this,void 0,void 0,i.default.mark(function t(){var n,r,o,s,a=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=e||{},n=new d.UriBuilder(this.links.items).queryParam("From",e.from).queryParam("PageSize",e.limit).queryParam("Key",e.key).queryParam("PageToken",e.pageToken).queryParam("Order",e.order).build(),t.next=4,this.services.network.get(n);case 4:return o=(r=t.sent).body.items.map(function(e){return e.date_updated=new Date(e.date_updated),a.cache.get(e.key)?a._handleItemMutated(e.key,e.url,e.last_event_id,e.revision,e.data,e.date_updated,e.date_expires,!1,!0):a.cache.store(e.key,new y.MapItem(e),e.last_event_id),a.cache.get(e.key)}),t.abrupt("return",new m.Paginator(o,function(e){return a.queryItems({pageToken:e})},(s=r.body.meta).previous_token,s.next_token));case 8:case"end":return t.stop()}},t,this)}))}},{key:"getItems",value:function(e){return h(this,void 0,void 0,i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d.validatePageSize((e=e||{}).pageSize),e.limit=e.pageSize||e.limit||50,e.order=e.order||"asc",t.abrupt("return",this.queryItems(e));case 5:case"end":return t.stop()}},t,this)}))}},{key:"forEach",value:function(e){var t=this;return new l.default(function(n,r){t.queryItems().then(function t(i){i.items.forEach(function(t){return e(t)}),i.hasNextPage?i.nextPage().then(t).catch(r):n()}).catch(r)})}},{key:"shouldIgnoreEvent",value:function(e,t){return this.cache.isKnown(e,t)}},{key:"_update",value:function(e,t){switch(e.date_created=new Date(e.date_created),e.type){case"map_item_added":case"map_item_updated":this._handleItemMutated(e.item_key,e.item_url,e.id,e.item_revision,e.item_data,e.date_created,void 0,"map_item_added"===e.type,!0);break;case"map_item_removed":this._handleItemRemoved(e.item_key,e.id,e.item_data,e.date_created,!0);break;case"map_removed":this.onRemoved(!1)}t&&this._advanceLastEventId(e.id,e.map_revision)}},{key:"_advanceLastEventId",value:function(e,t){this.lastEventId<e&&(this.descriptor.last_event_id=e,t&&(this.descriptor.revision=t))}},{key:"_updateRootDateUpdated",value:function(e){(!this.descriptor.date_updated||e.getTime()>this.descriptor.date_updated.getTime())&&(this.descriptor.date_updated=e,this.services.storage.update(this.type,this.sid,this.uniqueName,{date_updated:e}))}},{key:"_handleItemMutated",value:function(e,t,n,r,i,o,s,a,u){if(this.shouldIgnoreEvent(e,n))p.default.trace("Item ",e," update skipped, current:",this.lastEventId,", remote:",n);else{this._updateRootDateUpdated(o);var c=this.cache.get(e);c?c.lastEventId<=n&&(c.update(n,r,i,o),void 0!==s&&c.updateDateExpires(s),this.emitItemMutationEvent(c,u,!1)):(c=new y.MapItem({key:e,url:t,last_event_id:n,revision:r,data:i,date_updated:o,date_expires:s}),this.cache.store(e,c,n),this.emitItemMutationEvent(c,u,a))}}},{key:"emitItemMutationEvent",value:function(e,t,n){this.emit(n?"itemAdded":"itemUpdated",{item:e,isLocal:!t})}},{key:"_handleItemRemoved",value:function(e,t,n,r,i){this._updateRootDateUpdated(r),this.cache.delete(e,t),this.emit("itemRemoved",{key:e,isLocal:!i,value:n})}},{key:"onRemoved",value:function(e){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.emit("removed",{isLocal:e})}},{key:"setTtl",value:function(e){return h(this,void 0,void 0,i.default.mark(function t(){var n;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d.validateMandatoryTtl(e),t.prev=1,n={ttl:e},t.next=5,this.services.network.post(this.uri,n);case 5:this.descriptor.date_expires=t.sent.body.date_expires,t.next=13;break;case 9:throw t.prev=9,t.t0=t.catch(1),404===t.t0.status&&this.onRemoved(!1),t.t0;case 13:case"end":return t.stop()}},t,this,[[1,9]])}))}},{key:"setItemTtl",value:function(e,t){return h(this,void 0,void 0,i.default.mark(function n(){var r,o;return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return d.validateMandatoryTtl(t),n.next=3,this.get(e);case 3:return r=n.sent,o={ttl:t},n.next=7,this.services.network.post(r.uri,o);case 7:r.updateDateExpires(n.sent.body.date_expires);case 9:case"end":return n.stop()}},n,this)}))}},{key:"removeMap",value:function(){return h(this,void 0,void 0,i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.network.delete(this.uri);case 2:this.onRemoved(!0);case 3:case"end":return e.stop()}},e,this)}))}},{key:"uri",get:function(){return this.descriptor.url}},{key:"links",get:function(){return this.descriptor.links}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"type",get:function(){return"map"}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}},{key:"dateUpdated",get:function(){return this.descriptor.date_updated}}],[{key:"type",get:function(){return"map"}}]),t}();t.SyncMap=w,t.default=w},sN9T:function(e,t,n){"use strict";var r=f(n("Dd8w")),i=f(n("Xxa5")),o=f(n("Zx67")),s=f(n("Zrlr")),a=f(n("wxAW")),u=f(n("zwoO")),c=f(n("Pf15")),l=f(n("//Fk"));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e,t,n,r){return new(n||(n=l.default))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var d=n("urP9"),p=n("JuVV"),v=n("xIvG"),y=n("phvU"),m=n("MeuS"),_=n("s1go"),g=n("eoM1"),b=n("FTGv"),w=function(e){function t(e,n,r){(0,s.default)(this,t);var i=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,r));return i.updateMergingQueue=new g.NamespacedMergingQueue(function(e,t){return"number"==typeof t.ttl?{ttl:t.ttl}:e}),i.cache=new _.Cache,i.descriptor=n,i.descriptor.date_updated=new Date(i.descriptor.date_updated),i}return(0,c.default)(t,v.SyncEntity),(0,a.default)(t,[{key:"_addOrUpdateItemOnServer",value:function(e,t,n,r){return h(this,void 0,void 0,i.default.mark(function o(){var s,a;return i.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return s={data:t},"number"==typeof r&&(s.ttl=r),i.next=4,this.services.network.post(e,s,n);case 4:return(a=i.sent).body.data=t,a.body.date_updated=new Date(a.body.date_updated),i.abrupt("return",a.body);case 8:case"end":return i.stop()}},o,this)}))}},{key:"push",value:function(e,t){return h(this,void 0,void 0,i.default.mark(function n(){var r,o,s;return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return d.validateOptionalTtl(r=(t||{}).ttl),n.next=4,this._addOrUpdateItemOnServer(this.links.items,e,void 0,r);case 4:return o=n.sent,s=Number(o.index),this._handleItemMutated(s,o.url,o.last_event_id,o.revision,e,o.date_updated,o.date_expires,!0,!1),n.abrupt("return",this.cache.get(s));case 8:case"end":return n.stop()}},n,this)}))}},{key:"set",value:function(e,t,n){var r=this,i=n||{};return d.validateOptionalTtl(i.ttl),this.updateMergingQueue.squashAndAdd(e,i,function(n){return r._updateItemUnconditionally(e,t,n.ttl)})}},{key:"_updateItemUnconditionally",value:function(e,t,n){return h(this,void 0,void 0,i.default.mark(function r(){var o,s;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.get(e);case 2:return o=r.sent,r.next=5,this._addOrUpdateItemOnServer(o.uri,t,void 0,n);case 5:return this._handleItemMutated(e,(s=r.sent).url,s.last_event_id,s.revision,s.data,s.date_updated,s.date_expires,!1,!1),r.abrupt("return",this.cache.get(e));case 8:case"end":return r.stop()}},r,this)}))}},{key:"_updateItemWithIfMatch",value:function(e,t,n){return h(this,void 0,void 0,i.default.mark(function r(){var o,s,a,u;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.get(e);case 2:if(!(s=t(d.deepClone((o=r.sent).value)))){r.next=25;break}return a=o.revision,r.prev=6,r.next=9,this._addOrUpdateItemOnServer(o.uri,s,a,n);case 9:return this._handleItemMutated(e,(u=r.sent).url,u.last_event_id,u.revision,u.data,u.date_updated,u.date_expires,!1,!1),r.abrupt("return",this.cache.get(e));case 14:if(r.prev=14,r.t0=r.catch(6),412!==r.t0.status){r.next=22;break}return r.next=19,this._getItemFromServer(e);case 19:return r.abrupt("return",this._updateItemWithIfMatch(e,t,n));case 22:throw r.t0;case 23:r.next=26;break;case 25:return r.abrupt("return",o);case 26:case"end":return r.stop()}},r,this,[[6,14]])}))}},{key:"mutate",value:function(e,t,n){return h(this,void 0,void 0,i.default.mark(function r(){var o,s=this;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return d.validateOptionalTtl((o=n||{}).ttl),r.abrupt("return",this.updateMergingQueue.add(e,o,function(n){return s._updateItemWithIfMatch(e,t,n.ttl)}));case 3:case"end":return r.stop()}},r,this)}))}},{key:"update",value:function(e,t,n){return h(this,void 0,void 0,i.default.mark(function o(){return i.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",this.mutate(e,function(e){return(0,r.default)(e,t)},n));case 1:case"end":return i.stop()}},o,this)}))}},{key:"remove",value:function(e){return h(this,void 0,void 0,i.default.mark(function t(){var n,r;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get(e);case 2:return n=t.sent,t.next=5,this.services.network.delete(n.uri);case 5:this._handleItemRemoved(e,(r=t.sent).body.last_event_id,void 0,new Date(r.body.date_updated),!1);case 7:case"end":return t.stop()}},t,this)}))}},{key:"get",value:function(e){return h(this,void 0,void 0,i.default.mark(function t(){var n;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=this.cache.get(e))){t.next=5;break}return t.abrupt("return",n);case 5:return t.abrupt("return",this._getItemFromServer(e));case 6:case"end":return t.stop()}},t,this)}))}},{key:"_getItemFromServer",value:function(e){return h(this,void 0,void 0,i.default.mark(function t(){var n;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.queryItems({index:e});case 2:if(!((n=t.sent).items.length<1)){t.next=7;break}throw new b.SyncError("No item with index "+e+" found",404,54151);case 7:return t.abrupt("return",n.items[0]);case 8:case"end":return t.stop()}},t,this)}))}},{key:"queryItems",value:function(e){return h(this,void 0,void 0,i.default.mark(function t(){var n,r,o,s,a=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=e||{},n=new d.UriBuilder(this.links.items).queryParam("From",e.from).queryParam("PageSize",e.limit).queryParam("Index",e.index).queryParam("PageToken",e.pageToken).queryParam("Order",e.order).build(),t.next=4,this.services.network.get(n);case 4:return o=(r=t.sent).body.items.map(function(e){return e.date_updated=new Date(e.date_updated),a.cache.get(e.index)?a._handleItemMutated(e.index,e.url,e.last_event_id,e.revision,e.data,e.date_updated,e.date_expires,!1,!0):a.cache.store(Number(e.index),new y.ListItem({index:Number(e.index),uri:e.url,revision:e.revision,lastEventId:e.last_event_id,dateUpdated:e.date_updated,dateExpires:e.date_expires,value:e.data}),e.last_event_id),a.cache.get(e.index)}),t.abrupt("return",new m.Paginator(o,function(e){return a.queryItems({pageToken:e})},(s=r.body.meta).previous_token,s.next_token));case 8:case"end":return t.stop()}},t,this)}))}},{key:"getItems",value:function(e){return h(this,void 0,void 0,i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d.validatePageSize((e=e||{}).pageSize),e.limit=e.pageSize||e.limit||50,e.order=e.order||"asc",t.abrupt("return",this.queryItems(e));case 5:case"end":return t.stop()}},t,this)}))}},{key:"getContext",value:function(){return h(this,void 0,void 0,i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.context){e.next=5;break}return e.next=3,this.services.network.get(this.links.context);case 3:this._updateContextIfRequired((t=e.sent).body.data,t.body.last_event_id);case 5:return e.abrupt("return",this.context);case 6:case"end":return e.stop()}},e,this)}))}},{key:"setTtl",value:function(e){return h(this,void 0,void 0,i.default.mark(function t(){var n;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d.validateMandatoryTtl(e),t.prev=1,n={ttl:e},t.next=5,this.services.network.post(this.uri,n);case 5:this.descriptor.date_expires=t.sent.body.date_expires,t.next=13;break;case 9:throw t.prev=9,t.t0=t.catch(1),404===t.t0.status&&this.onRemoved(!1),t.t0;case 13:case"end":return t.stop()}},t,this,[[1,9]])}))}},{key:"setItemTtl",value:function(e,t){return h(this,void 0,void 0,i.default.mark(function n(){var r,o;return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return d.validateMandatoryTtl(t),n.next=3,this.get(e);case 3:return r=n.sent,o={ttl:t},n.next=7,this.services.network.post(r.uri,o);case 7:r.updateDateExpires(n.sent.body.date_expires);case 9:case"end":return n.stop()}},n,this)}))}},{key:"removeList",value:function(){return h(this,void 0,void 0,i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.network.delete(this.uri);case 2:this.onRemoved(!0);case 3:case"end":return e.stop()}},e,this)}))}},{key:"onRemoved",value:function(e){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.emit("removed",{isLocal:e})}},{key:"shouldIgnoreEvent",value:function(e,t){return this.cache.isKnown(e,t)}},{key:"_update",value:function(e,t){var n=Number(e.item_index);switch(e.date_created=new Date(e.date_created),e.type){case"list_item_added":case"list_item_updated":this._handleItemMutated(n,e.item_url,e.id,e.item_revision,e.item_data,e.date_created,void 0,"list_item_added"===e.type,!0);break;case"list_item_removed":this._handleItemRemoved(n,e.id,e.item_data,e.date_created,!0);break;case"list_context_updated":this._handleContextUpdate(e.context_data,e.id,e.date_created);break;case"list_removed":this.onRemoved(!1)}t&&this._advanceLastEventId(e.id,e.list_revision)}},{key:"_advanceLastEventId",value:function(e,t){this.lastEventId<e&&(this.descriptor.last_event_id=e,t&&(this.descriptor.revision=t))}},{key:"_updateRootDateUpdated",value:function(e){(!this.descriptor.date_updated||e.getTime()>this.descriptor.date_updated.getTime())&&(this.descriptor.date_updated=e,this.services.storage.update(this.type,this.sid,this.uniqueName,{date_updated:e}))}},{key:"_handleItemMutated",value:function(e,t,n,r,i,o,s,a,u){if(this.shouldIgnoreEvent(e,n))p.default.trace("Item ",e," update skipped, current:",this.lastEventId,", remote:",n);else{this._updateRootDateUpdated(o);var c=this.cache.get(e);if(c)c.lastEventId<=n&&(c.update(n,r,i,o),void 0!==s&&c.updateDateExpires(s),this.emitItemMutationEvent(c,u,!1));else{var l=new y.ListItem({index:e,uri:t,lastEventId:n,revision:r,value:i,dateUpdated:o,dateExpires:s});this.cache.store(e,l,n),this.emitItemMutationEvent(l,u,a)}}}},{key:"emitItemMutationEvent",value:function(e,t,n){this.emit(n?"itemAdded":"itemUpdated",{item:e,isLocal:!t})}},{key:"_handleItemRemoved",value:function(e,t,n,r,i){this._updateRootDateUpdated(r),this.cache.delete(e,t),this.emit("itemRemoved",{index:e,isLocal:!i,value:n})}},{key:"_handleContextUpdate",value:function(e,t,n){this._updateRootDateUpdated(n),this._updateContextIfRequired(e,t)&&this.emit("contextUpdated",{context:e,isLocal:!1})}},{key:"_updateContextIfRequired",value:function(e,t){return!this.contextEventId||t>this.contextEventId?(this.context=e,this.contextEventId=t,!0):(p.default.trace("Context update skipped, current:",this.lastEventId,", remote:",t),!1)}},{key:"uri",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"links",get:function(){return this.descriptor.links}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"type",get:function(){return"list"}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}},{key:"dateUpdated",get:function(){return this.descriptor.date_updated}}],[{key:"type",get:function(){return"list"}}]),t}();t.SyncList=w,t.default=w},sOR5:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},t7NR:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},t8x9:function(e,t,n){var r=n("77Pl"),i=n("lOnJ"),o=n("dSzd")("species");e.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||void 0==(n=r(s)[o])?t:i(n)}},tLDX:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("AMGY").a.Symbol,i="function"==typeof r&&"function"==typeof r.for?r.for("rxSubscriber"):"@@rxSubscriber"},tUtP:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n("//Fk")),i=c(n("ifoU")),o=c(n("HSQo")),s=c(n("Zrlr")),a=c(n("wxAW")),u=c(n("XVn5"));function c(e){return e&&e.__esModule?e:{default:e}}function l(e){return e>=200&&e<300}var f=function(){function e(t){var n=this;(0,s.default)(this,e),(0,o.default)(this,{_activeRequests:{value:new i.default},_socket:{value:t}}),this._socket.on("reply",this._processReply.bind(this)),this._socket.on("disconnected",function(){n._activeRequests.forEach(function(e){clearTimeout(e.timeout),e.reject(new Error("Twilsock disconnected"))}),n._activeRequests.clear()})}return(0,a.default)(e,[{key:"_processReply",value:function(e){var t=this._activeRequests.get(e.id);t&&(clearTimeout(t.timeout),this._activeRequests.delete(e.id),setTimeout(function(){var n;l(e.status.code)?(n=e)&&n.header&&n.header.http_status&&!l(e.header.http_status.code)?t.reject({status:e.header.http_status.code,description:e.header.http_status.status,body:e.body}):t.resolve(e):t.reject(new Error("Transport failure: "+e.status.status))},0))}},{key:"_storeRequest",value:function(e,t,n){var r={resolve:t,reject:n,timeout:setTimeout(function(){u.default.debug("request",e,"is timed out"),n(new Error("Twilsock: request timeout: "+e))},3e4)};this._activeRequests.set(e,r)}},{key:"send",value:function(e,t,n){var i=this;return new r.default(function(r,o){i._socket.isConnected||(u.default.info("Can not send upstream message. Twilsock is not in connected state"),o(new Error("Twilsock is not connected")));var s=i._socket.sendUpstreamMessage(e,t,n);u.default.trace("message sent: ",{id:s,address:e,headers:t,body:n}),i._storeRequest(s,r,o)})}},{key:"putNotificationContext",value:function(e,t){var n=this;return new r.default(function(r,i){n._socket.isConnected||(u.default.info("Can not send put notification context. Twilsock is not in connected state"),i(new Error("Twilsock is not connected")));var o=n._socket.send({method:"put_notification_ctx",notification_ctx_id:e},t);n._storeRequest(o,r,i)})}},{key:"deleteNotificationContext",value:function(e){var t=this;return new r.default(function(n,r){t._socket.isConnected||(u.default.info("Can not send delete notification context. Twilsock is not in connected state"),r(new Error("Twilsock is not connected")));var i=t._socket.send({method:"delete_notification_ctx",notification_ctx_id:e});t._storeRequest(i,n,r)})}},{key:"shutdown",value:function(){this._activeRequests.forEach(function(e){clearTimeout(e.timeout),e.reject(new Error("Twilsock: request cancelled by user"))}),this._activeRequests.clear()}}]),e}();t.default=f,e.exports=t.default},tZ2B:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("TToO"),i=function(e){function t(){e.apply(this,arguments)}return Object(r.__extends)(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(n("OVmG").a)},tss7:function(e,t,n){"use strict";var r=a(n("Zx67")),i=a(n("Zrlr")),o=a(n("zwoO")),s=a(n("Pf15"));function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n("FTGv"),c=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments[3];(0,i.default)(this,t);var u=(0,o.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n,s));return u.body=a,u}return(0,s.default)(t,u.SyncError),t}();t.SyncNetworkError=c,t.default=c},ttyz:function(e,t,n){"use strict";var r=n("9C8M"),i=n("LIJb");e.exports=n("qo66")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},txox:function(e,t,n){"use strict";var r=o(n("Zrlr")),i=o(n("wxAW"));function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s="https://cds.twilio.com",a="/v4/Subscriptions",u="/v3/Maps",c="/v3/Lists",l="/v3/Documents",f="/v3/Streams",h=function(){function e(t,n){(0,r.default)(this,e);var i,o,h=(n=(n=n||{}).Sync||n.DataSync||{}).cdsUri||s;this._token=t,this.settings={subscriptionsUri:h+a,documentsUri:h+l,listsUri:h+c,mapsUri:h+u,streamsUri:h+f,sessionStorageEnabled:(i=n,o="enableSessionStorage",!i||"undefined"==typeof i[o]||i[o])}}return(0,i.default)(e,[{key:"updateToken",value:function(e){this._token=e}},{key:"token",get:function(){return this._token}},{key:"subscriptionsUri",get:function(){return this.settings.subscriptionsUri}},{key:"documentsUri",get:function(){return this.settings.documentsUri}},{key:"listsUri",get:function(){return this.settings.listsUri}},{key:"mapsUri",get:function(){return this.settings.mapsUri}},{key:"streamsUri",get:function(){return this.settings.streamsUri}},{key:"backoffConfig",get:function(){return this.settings.backoffConfig||{}}},{key:"sessionStorageEnabled",get:function(){return this.settings.sessionStorageEnabled}}]),e}();t.Configuration=h},u2KI:function(e,t,n){e.exports={default:n("O4R0"),__esModule:!0}},ujcs:function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+e[t+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=c}return(d?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*u-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[n+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+d]=255&s,d+=p,s/=256,c-=8);e[n+d-p]|=128*v}},uqUo:function(e,t,n){var r=n("kM2E"),i=n("FeBl"),o=n("S82l");e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],s={};s[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",s)}},urP9:function(e,t,n){"use strict";var r=s(n("Zrlr")),i=s(n("wxAW")),o=s(n("mvHQ"));function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("FTGv");function u(e){return!isNaN(parseInt(e))&&isFinite(e)}function c(e){return u(e)&&e>=0}t.deepClone=function(e){return JSON.parse((0,o.default)(e))},t.validateOptionalTtl=function(e){if(void 0!==e&&!c(e))throw new a.default("Invalid TTL value, expected a positive integer, was '"+e+"'",400,54011)},t.validateMandatoryTtl=function(e){if(!c(e))throw new a.default("Invalid TTL value, expected a positive integer, was '"+e+"'",400,54011)},t.validatePageSize=function(e){var t;if(!(void 0===e||u(t=e)&&t>0))throw new a.default("Invalid pageSize parameter. Expected a positive integer, was '"+e+"'.",400,54455)};var l=function(){function e(t){(0,r.default)(this,e),this.base=t,this.args=new Array,this.paths=new Array}return(0,i.default)(e,[{key:"pathSegment",value:function(e){return this.paths.push(encodeURIComponent(e)),this}},{key:"queryParam",value:function(e,t){return"undefined"!=typeof t&&this.args.push(encodeURIComponent(e)+"="+encodeURIComponent(t)),this}},{key:"build",value:function(){var e=this.base;return this.paths.length&&(e+="/"+this.paths.join("/")),this.args.length&&(e+="?"+this.args.join("&")),e}}]),e}();t.UriBuilder=l},"us/S":function(e,t,n){e.exports={default:n("Xd32"),__esModule:!0}},"vFc/":function(e,t,n){var r=n("TcQ7"),i=n("QRG4"),o=n("fkB2");e.exports=function(e){return function(t,n,s){var a,u=r(t),c=i(u.length),l=o(s,c);if(e&&n!=n){for(;c>l;)if((a=u[l++])!=a)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},"vIB/":function(e,t,n){"use strict";var r=n("O4g8"),i=n("kM2E"),o=n("880/"),s=n("hJx8"),a=n("D2L2"),u=n("/bQp"),c=n("94VQ"),l=n("e6n0"),f=n("PzxK"),h=n("dSzd")("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,v,y,m,_){c(n,t,v);var g,b,w,k=function(e){if(!d&&e in S)return S[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},x=t+" Iterator",C="values"==y,E=!1,S=e.prototype,T=S[h]||S["@@iterator"]||y&&S[y],O=!d&&T||k(y),P=y?C?k("entries"):O:void 0,A="Array"==t&&S.entries||T;if(A&&(w=f(A.call(new e)))!==Object.prototype&&w.next&&(l(w,x,!0),r||a(w,h)||s(w,h,p)),C&&T&&"values"!==T.name&&(E=!0,O=function(){return T.call(this)}),r&&!_||!d&&!E&&S[h]||s(S,h,O),u[t]=O,u[x]=p,y)if(g={values:C?O:k("values"),keys:m?O:k("keys"),entries:P},_)for(b in g)b in S||o(S,b,g[b]);else i(i.P+i.F*(d||E),t,g);return g}},vzCy:function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,s,a,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(o(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(a=Array.prototype.slice.call(arguments,1),s=(c=n.slice()).length,u=0;u<s;u++)c[u].apply(this,a);return!0},n.prototype.on=n.prototype.addListener=function(e,t){var s;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(s=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var n,o,s,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=(n=this._events[e]).length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(a=s;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){o=a;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},wcmj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=_(n("//Fk")),i=_(n("HSQo")),o=_(n("Zx67")),s=_(n("Zrlr")),a=_(n("wxAW")),u=_(n("zwoO")),c=_(n("Pf15")),l=_(n("itFT")),f=_(n("vzCy")),h=_(n("J5uf")),d=_(n("94Ke")),p=_(n("9Rex")),v=_(n("r/lS")),y=_(n("Wl86")),m=n("55yF");function _(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e,n){(0,s.default)(this,t);var r=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this));if(!e)throw new Error("Token is required for Notifications client");(n=n||{}).logLevel=n.logLevel||"error",h.default.setLevel(n.logLevel);var a=n.minTokenRefreshInterval||1e4,c=n.productId||"notifications";n.twilsockClient=n.twilsockClient||new v.default(e,n),n.transport=n.transport||new y.default(n.twilsockClient),n.emsClient=n.emsClient||new m.EMSClient(n);var f,_,g,b=n.twilsockClient,w=n.transport,k=new l.default(null,n);return(0,i.default)(r,{_config:{value:k},_emsClient:{value:n.emsClient},_registrar:{value:new p.default(c,w,b,k)},_twilsock:{value:b},_reliableTransportState:{value:{overall:!1,transport:!1,registration:!1,lastEmitted:null}},updateToken:{value:(f=r._updateToken.bind(r),_=a,g=new d.default(1,_,1,d.default.strategy.LEAK),function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift(f),g.schedule.apply(g,e)}),enumerable:!0},connectionState:{get:function(){return"disconnected"===r._twilsock.state?"disconnected":"disconnecting"===r._twilsock.state?"disconnecting":"connected"===r._twilsock.state&&r._reliableTransportState.registration?"connected":"rejected"===r._twilsock.state?"denied":"connecting"}}}),r._emsClient.setToken(e).then(function(e){r._config.updateToken(e.token),r._registrar.updateToken()}).catch(function(e){h.default.warn("Failed to set token",e)}),r._onTransportStateChange(r._twilsock.connected),r._registrar.on("transportReady",function(e){r._onRegistrationStateChange(e?"registered":"")}),r._registrar.on("stateChanged",function(e){r._onRegistrationStateChange(e)}),r._registrar.on("needReliableTransport",r._onNeedReliableTransport.bind(r)),r._twilsock.on("message",function(e,t){return r._routeMessage(e,t)}),r._twilsock.on("connected",function(e){r._onTransportStateChange(!0),r._registrar.setNotificationId("twilsock",e)}),r._twilsock.on("disconnected",function(){r._onTransportStateChange(!1)}),r}return(0,c.default)(t,f.default),(0,a.default)(t,[{key:"_routeMessage",value:function(e,t){h.default.trace("Message arrived: ",e,t),this.emit("message",e,t)}},{key:"_onNeedReliableTransport",value:function(e){e?this._twilsock.connect():this._twilsock.disconnect()}},{key:"_onRegistrationStateChange",value:function(e){this._reliableTransportState.registration="registered"===e,this._updateTransportState()}},{key:"_onTransportStateChange",value:function(e){this._reliableTransportState.transport=e,this._updateTransportState()}},{key:"_updateTransportState",value:function(){var e=this._reliableTransportState.transport&&this._reliableTransportState.registration;this._reliableTransportState.overall!==e&&(this._reliableTransportState.overall=e,h.default.info("Transport ready "+e),this.emit("transportReady",e)),this._reliableTransportState.lastEmitted!==this.connectionState&&(this._reliableTransportState.lastEmitted=this.connectionState,this.emit("connectionStateChanged",this.connectionState))}},{key:"subscribe",value:function(e,t){return h.default.trace("Add subscriptions for message type: ",e,t=t||"twilsock"),this._registrar.subscribe(e,t)}},{key:"unsubscribe",value:function(e,t){return h.default.trace("Remove subscriptions for message type: ",e,t=t||"twilsock"),this._registrar.unsubscribe(e,t)}},{key:"handlePushNotification",value:function(e){h.default.warn("Push message passed, but no functionality implemented yet: "+e)}},{key:"setPushRegistrationId",value:function(e,t){this._registrar.setNotificationId(t||"gcm",e)}},{key:"_updateToken",value:function(e){var t=this;return h.default.info("authTokenUpdated"),this._fpaToken===e?r.default.resolve():(this._twilsock.updateToken(e),this._emsClient.setToken(e).then(function(e){return e.token}).then(function(e){t._config.updateToken(e),t._registrar.updateToken()}))}}]),t}();t.default=g,e.exports=t.default},woOf:function(e,t,n){e.exports={default:n("V3tA"),__esModule:!0}},wxAW:function(e,t,n){"use strict";t.__esModule=!0;var r,i=(r=n("C4MV"))&&r.__esModule?r:{default:r};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},"x+Ry":function(e,t,n){"use strict";var r=a(n("//Fk")),i=a(n("ifoU")),o=a(n("wxAW")),s=a(n("Zrlr"));function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n("Jh8B"),c=function(){function e(t){(0,s.default)(this,e),this.services=t,this.consumptionHorizonRequests=new i.default,this.consumptionHorizonUpdateTimer=null}return(0,o.default)(e,[{key:"getReportInterval",value:function(){return this.services.session.getConsumptionReportInterval().then(function(e){return 1e3*e.seconds})}},{key:"delayedSendConsumptionHorizon",value:function(e){var t=this;null===this.consumptionHorizonUpdateTimer&&(this.sendConsumptionReport(!0),this.consumptionHorizonUpdateTimer=setTimeout(function(){t.sendConsumptionReport(!1)},e))}},{key:"sendConsumptionReport",value:function(e){var t=this,n=[],r=new i.default;this.consumptionHorizonRequests.forEach(function(e,t){n.push(e.entry),r.set(t,e.promises)}),n.length>0&&this.services.session.addCommand("consumptionReportV2",{report:n}).then(function(e){return t.processConsumptionReportResponse(e,r)}).catch(function(e){return t.processConsumptionReportError(e,r)}),e||(this.consumptionHorizonUpdateTimer=null),this.consumptionHorizonRequests.clear()}},{key:"processConsumptionReportResponse",value:function(e,t){e&&e.report&&Array.isArray(e.report)&&e.report.length>0&&e.report.forEach(function(e){var n=e;if(t.has(n.channelSid)){var r=null;"undefined"!=typeof n.unreadMessagesCount&&null!=n.unreadMessagesCount&&(r=n.unreadMessagesCount),t.get(n.channelSid).forEach(function(e){return e.resolve(r)}),t.delete(n.channelSid)}}),this.processConsumptionReportError(new u.SessionError("Error while setting LastConsumedMessageIndex",null),t)}},{key:"processConsumptionReportError",value:function(e,t){t.forEach(function(t){return t.forEach(function(t){return t.reject(e)})})}},{key:"updateLastConsumedMessageIndexForChannel",value:function(e,t){var n=this;return new r.default(function(r,i){n.addPendingConsumptionHorizonRequest(e,{channelSid:e,messageIdx:t},{resolve:r,reject:i}),n.getReportInterval().then(function(e){return n.delayedSendConsumptionHorizon(e)})})}},{key:"advanceLastConsumedMessageIndexForChannel",value:function(e,t,n){var i=this,o=this.consumptionHorizonRequests.get(e);return new r.default(function(r,s){i.addPendingConsumptionHorizonRequest(e,o&&o.entry?o.entry.messageIdx>=t?o.entry:{channelSid:e,messageIdx:t}:null!==n&&t<n?{channelSid:e,messageIdx:n}:{channelSid:e,messageIdx:t},{resolve:r,reject:s}),i.getReportInterval().then(function(e){return i.delayedSendConsumptionHorizon(e)})})}},{key:"addPendingConsumptionHorizonRequest",value:function(e,t,n){if(this.consumptionHorizonRequests.has(e)){var r=this.consumptionHorizonRequests.get(e);r.entry=t,r.promises.push(n)}else this.consumptionHorizonRequests.set(e,{entry:t,promises:[n]})}}]),e}();t.ConsumptionHorizon=c},x35b:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("WT6e"),i=function(){},o=function(){this.title="app"},s=n("TToO"),a=function(){},u=["en",[["a","p"],["AM","PM"]],[["AM","PM"],,],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",,"{1} 'at' {0}"],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],c={},l=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}(),f=new r.l("UseV4Plurals"),h=function(){},d=function(e){function t(t,n){var r=e.call(this)||this;return r.locale=t,r.deprecatedPluralFn=n,r}return Object(s.__extends)(t,e),t.prototype.getPluralCategory=function(e,t){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(t||this.locale,e):function(e){return function(e){var t=e.toLowerCase().replace(/_/g,"-"),n=c[t];if(n)return n;var r=t.split("-")[0];if(n=c[r])return n;if("en"===r)return u;throw new Error('Missing locale data for the locale "'+e+'".')}(e)[17]}(t||this.locale)(e)){case l.Zero:return"zero";case l.One:return"one";case l.Two:return"two";case l.Few:return"few";case l.Many:return"many";default:return"other"}},t}(h);function p(e,t){t=encodeURIComponent(t);for(var n=0,r=e.split(";");n<r.length;n++){var i=r[n],o=i.indexOf("="),s=-1==o?[i,""]:[i.slice(0,o),i.slice(o+1)],a=s[1];if(s[0].trim()===t)return decodeURIComponent(a)}return null}var v=function(){function e(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}return Object.defineProperty(e.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),e}(),y=function(){function e(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._differ=null}return Object.defineProperty(e.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(e){Object(r.L)()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(e)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngForTemplate",{set:function(e){e&&(this._template=e)},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){if("ngForOf"in e){var t=e.ngForOf.currentValue;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(e){throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((n=t).name||typeof n)+"'. NgFor only supports binding to Iterables such as Arrays.")}}var n},e.prototype.ngDoCheck=function(){if(this._differ){var e=this._differ.diff(this.ngForOf);e&&this._applyChanges(e)}},e.prototype._applyChanges=function(e){var t=this,n=[];e.forEachOperation(function(e,r,i){if(null==e.previousIndex){var o=t._viewContainer.createEmbeddedView(t._template,new v(null,t.ngForOf,-1,-1),i),s=new m(e,o);n.push(s)}else null==i?t._viewContainer.remove(r):(o=t._viewContainer.get(r),t._viewContainer.move(o,i),s=new m(e,o),n.push(s))});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);r=0;for(var i=this._viewContainer.length;r<i;r++){var o=this._viewContainer.get(r);o.context.index=r,o.context.count=i}e.forEachIdentityChange(function(e){t._viewContainer.get(e.currentIndex).context.$implicit=e.item})},e.prototype._perViewChange=function(e,t){e.context.$implicit=t.item},e}(),m=function(e,t){this.record=e,this.view=t},_=function(){function e(e,t){this._viewContainer=e,this._context=new g,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}return Object.defineProperty(e.prototype,"ngIf",{set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngIfThen",{set:function(e){this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngIfElse",{set:function(e){this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),e.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},e}(),g=function(){this.$implicit=null,this.ngIf=null},b=function(){},w=new r.l("DocumentToken"),k=n("YaPU"),x=n("+3/4"),C=n("BX3T"),E=n("PIsA"),S=n("tZ2B"),T=function(e){function t(t,n){e.call(this),this.sources=t,this.resultSelector=n}return Object(s.__extends)(t,e),t.create=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];if(null===e||0===arguments.length)return new x.a;var r=null;return"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&Object(C.a)(e[0])&&(e=e[0]),0===e.length?new x.a:new t(e,r)},t.prototype._subscribe=function(e){return new O(e,this.sources,this.resultSelector)},t}(k.a),O=function(e){function t(t,n,r){e.call(this,t),this.sources=n,this.resultSelector=r,this.completed=0,this.haveValues=0;var i=n.length;this.total=i,this.values=new Array(i);for(var o=0;o<i;o++){var s=n[o],a=Object(E.a)(this,s,null,o);a&&(a.outerIndex=o,this.add(a))}}return Object(s.__extends)(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.values[n]=t,i._hasValue||(i._hasValue=!0,this.haveValues++)},t.prototype.notifyComplete=function(e){var t=this.destination,n=this.haveValues,r=this.resultSelector,i=this.values,o=i.length;if(e._hasValue){if(this.completed++,this.completed===o){if(n===o){var s=r?r.apply(this,i):i;t.next(s)}t.complete()}}else t.complete()},t}(S.a),P=T.create,A=n("AMGY");function I(e){var t=e.subscriber;t.closed||(t.next(e.value),t.complete())}function M(e){var t=e.subscriber;t.closed||t.error(e.err)}var R=function(e){function t(t,n){e.call(this),this.promise=t,this.scheduler=n}return Object(s.__extends)(t,e),t.create=function(e,n){return new t(e,n)},t.prototype._subscribe=function(e){var t=this,n=this.promise,r=this.scheduler;if(null==r)this._isScalar?e.closed||(e.next(this.value),e.complete()):n.then(function(n){t.value=n,t._isScalar=!0,e.closed||(e.next(n),e.complete())},function(t){e.closed||e.error(t)}).then(null,function(e){A.a.setTimeout(function(){throw e})});else if(this._isScalar){if(!e.closed)return r.schedule(I,0,{value:this.value,subscriber:e})}else n.then(function(n){t.value=n,t._isScalar=!0,e.closed||e.add(r.schedule(I,0,{value:n,subscriber:e}))},function(t){e.closed||e.add(r.schedule(M,0,{err:t,subscriber:e}))}).then(null,function(e){A.a.setTimeout(function(){throw e})})},t}(k.a).create,j=n("OVmG");function N(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new D(e,t))}}var D=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new F(e,this.project,this.thisArg))},e}(),F=function(e){function t(t,n,r){e.call(this,t),this.project=n,this.count=0,this.thisArg=r||this}return Object(s.__extends)(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(j.a);function U(e,t){return N(e,t)(this)}var L=null;function V(){return L}var B,q={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},z={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},H={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};r.W.Node&&(B=r.W.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))});var W,G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.__extends)(t,e),t.prototype.parse=function(e){throw new Error("parse not implemented")},t.makeCurrent=function(){var e;e=new t,L||(L=e)},t.prototype.hasProperty=function(e,t){return t in e},t.prototype.setProperty=function(e,t,n){e[t]=n},t.prototype.getProperty=function(e,t){return e[t]},t.prototype.invoke=function(e,t,n){var r;(r=e)[t].apply(r,n)},t.prototype.logError=function(e){window.console&&(console.error?console.error(e):console.log(e))},t.prototype.log=function(e){window.console&&window.console.log&&window.console.log(e)},t.prototype.logGroup=function(e){window.console&&window.console.group&&window.console.group(e)},t.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return q},enumerable:!0,configurable:!0}),t.prototype.contains=function(e,t){return B.call(e,t)},t.prototype.querySelector=function(e,t){return e.querySelector(t)},t.prototype.querySelectorAll=function(e,t){return e.querySelectorAll(t)},t.prototype.on=function(e,t,n){e.addEventListener(t,n,!1)},t.prototype.onAndCancel=function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}},t.prototype.dispatchEvent=function(e,t){e.dispatchEvent(t)},t.prototype.createMouseEvent=function(e){var t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t},t.prototype.createEvent=function(e){var t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t},t.prototype.preventDefault=function(e){e.preventDefault(),e.returnValue=!1},t.prototype.isPrevented=function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue},t.prototype.getInnerHTML=function(e){return e.innerHTML},t.prototype.getTemplateContent=function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null},t.prototype.getOuterHTML=function(e){return e.outerHTML},t.prototype.nodeName=function(e){return e.nodeName},t.prototype.nodeValue=function(e){return e.nodeValue},t.prototype.type=function(e){return e.type},t.prototype.content=function(e){return this.hasProperty(e,"content")?e.content:e},t.prototype.firstChild=function(e){return e.firstChild},t.prototype.nextSibling=function(e){return e.nextSibling},t.prototype.parentElement=function(e){return e.parentNode},t.prototype.childNodes=function(e){return e.childNodes},t.prototype.childNodesAsList=function(e){for(var t=e.childNodes,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r];return n},t.prototype.clearNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},t.prototype.appendChild=function(e,t){e.appendChild(t)},t.prototype.removeChild=function(e,t){e.removeChild(t)},t.prototype.replaceChild=function(e,t,n){e.replaceChild(t,n)},t.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},t.prototype.insertBefore=function(e,t,n){e.insertBefore(n,t)},t.prototype.insertAllBefore=function(e,t,n){n.forEach(function(n){return e.insertBefore(n,t)})},t.prototype.insertAfter=function(e,t,n){e.insertBefore(n,t.nextSibling)},t.prototype.setInnerHTML=function(e,t){e.innerHTML=t},t.prototype.getText=function(e){return e.textContent},t.prototype.setText=function(e,t){e.textContent=t},t.prototype.getValue=function(e){return e.value},t.prototype.setValue=function(e,t){e.value=t},t.prototype.getChecked=function(e){return e.checked},t.prototype.setChecked=function(e,t){e.checked=t},t.prototype.createComment=function(e){return this.getDefaultDocument().createComment(e)},t.prototype.createTemplate=function(e){var t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t},t.prototype.createElement=function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)},t.prototype.createElementNS=function(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)},t.prototype.createTextNode=function(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)},t.prototype.createScriptTag=function(e,t,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(e,t),r},t.prototype.createStyleElement=function(e,t){var n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n},t.prototype.createShadowRoot=function(e){return e.createShadowRoot()},t.prototype.getShadowRoot=function(e){return e.shadowRoot},t.prototype.getHost=function(e){return e.host},t.prototype.clone=function(e){return e.cloneNode(!0)},t.prototype.getElementsByClassName=function(e,t){return e.getElementsByClassName(t)},t.prototype.getElementsByTagName=function(e,t){return e.getElementsByTagName(t)},t.prototype.classList=function(e){return Array.prototype.slice.call(e.classList,0)},t.prototype.addClass=function(e,t){e.classList.add(t)},t.prototype.removeClass=function(e,t){e.classList.remove(t)},t.prototype.hasClass=function(e,t){return e.classList.contains(t)},t.prototype.setStyle=function(e,t,n){e.style[t]=n},t.prototype.removeStyle=function(e,t){e.style[t]=""},t.prototype.getStyle=function(e,t){return e.style[t]},t.prototype.hasStyle=function(e,t,n){var r=this.getStyle(e,t)||"";return n?r==n:r.length>0},t.prototype.tagName=function(e){return e.tagName},t.prototype.attributeMap=function(e){for(var t=new Map,n=e.attributes,r=0;r<n.length;r++){var i=n.item(r);t.set(i.name,i.value)}return t},t.prototype.hasAttribute=function(e,t){return e.hasAttribute(t)},t.prototype.hasAttributeNS=function(e,t,n){return e.hasAttributeNS(t,n)},t.prototype.getAttribute=function(e,t){return e.getAttribute(t)},t.prototype.getAttributeNS=function(e,t,n){return e.getAttributeNS(t,n)},t.prototype.setAttribute=function(e,t,n){e.setAttribute(t,n)},t.prototype.setAttributeNS=function(e,t,n,r){e.setAttributeNS(t,n,r)},t.prototype.removeAttribute=function(e,t){e.removeAttribute(t)},t.prototype.removeAttributeNS=function(e,t,n){e.removeAttributeNS(t,n)},t.prototype.templateAwareRoot=function(e){return this.isTemplateElement(e)?this.content(e):e},t.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},t.prototype.getDefaultDocument=function(){return document},t.prototype.getBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},t.prototype.getTitle=function(e){return e.title},t.prototype.setTitle=function(e,t){e.title=t||""},t.prototype.elementMatches=function(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))},t.prototype.isTemplateElement=function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName},t.prototype.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},t.prototype.isCommentNode=function(e){return e.nodeType===Node.COMMENT_NODE},t.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},t.prototype.hasShadowRoot=function(e){return null!=e.shadowRoot&&e instanceof HTMLElement},t.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},t.prototype.importIntoDoc=function(e){return document.importNode(this.templateAwareRoot(e),!0)},t.prototype.adoptNode=function(e){return document.adoptNode(e)},t.prototype.getHref=function(e){return e.getAttribute("href")},t.prototype.getEventKey=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&H.hasOwnProperty(t)&&(t=H[t]))}return z[t]||t},t.prototype.getGlobalEventTarget=function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null},t.prototype.getHistory=function(){return window.history},t.prototype.getLocation=function(){return window.location},t.prototype.getBaseHref=function(e){var t,n=Z||(Z=document.querySelector("base"))?Z.getAttribute("href"):null;return null==n?null:(t=n,W||(W=document.createElement("a")),W.setAttribute("href",t),"/"===W.pathname.charAt(0)?W.pathname:"/"+W.pathname)},t.prototype.resetBaseElement=function(){Z=null},t.prototype.getUserAgent=function(){return window.navigator.userAgent},t.prototype.setData=function(e,t,n){this.setAttribute(e,"data-"+t,n)},t.prototype.getData=function(e,t){return this.getAttribute(e,"data-"+t)},t.prototype.getComputedStyle=function(e){return getComputedStyle(e)},t.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},t.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},t.prototype.supportsCookies=function(){return!0},t.prototype.getCookie=function(e){return p(document.cookie,e)},t.prototype.setCookie=function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)},t}(function(e){function t(){var t=e.call(this)||this;t._animationPrefix=null,t._transitionEnd=null;try{var n=t.createElement("div",document);if(null!=t.getStyle(n,"animationName"))t._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],i=0;i<r.length;i++)if(null!=t.getStyle(n,r[i]+"AnimationName")){t._animationPrefix="-"+r[i].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach(function(e){null!=t.getStyle(n,e)&&(t._transitionEnd=o[e])})}catch(e){t._animationPrefix=null,t._transitionEnd=null}return t}return Object(s.__extends)(t,e),t.prototype.getDistributedNodes=function(e){return e.getDistributedNodes()},t.prototype.resolveAndSetHref=function(e,t,n){e.href=null==n?t:t+"/../"+n},t.prototype.supportsDOMEvents=function(){return!0},t.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},t.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},t.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},t.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},t}(function(){function e(){this.resourceLoaderType=null}return Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e},enumerable:!0,configurable:!0}),e}())),Z=null,Q=w;function J(){return!!window.history.pushState}var K=function(e){function t(t){var n=e.call(this)||this;return n._doc=t,n._init(),n}return Object(s.__extends)(t,e),t.prototype._init=function(){this.location=V().getLocation(),this._history=V().getHistory()},t.prototype.getBaseHrefFromDOM=function(){return V().getBaseHref(this._doc)},t.prototype.onPopState=function(e){V().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)},t.prototype.onHashChange=function(e){V().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)},Object.defineProperty(t.prototype,"pathname",{get:function(){return this.location.pathname},set:function(e){this.location.pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),t.prototype.pushState=function(e,t,n){J()?this._history.pushState(e,t,n):this.location.hash=n},t.prototype.replaceState=function(e,t,n){J()?this._history.replaceState(e,t,n):this.location.hash=n},t.prototype.forward=function(){this._history.forward()},t.prototype.back=function(){this._history.back()},t.ctorParameters=function(){return[{type:void 0,decorators:[{type:r.k,args:[Q]}]}]},t}(a),Y=function(){function e(e){this._doc=e,this._dom=V()}return e.prototype.addTag=function(e,t){return void 0===t&&(t=!1),e?this._getOrCreateElement(e,t):null},e.prototype.addTags=function(e,t){var n=this;return void 0===t&&(t=!1),e?e.reduce(function(e,r){return r&&e.push(n._getOrCreateElement(r,t)),e},[]):[]},e.prototype.getTag=function(e){return e&&this._dom.querySelector(this._doc,"meta["+e+"]")||null},e.prototype.getTags=function(e){if(!e)return[];var t=this._dom.querySelectorAll(this._doc,"meta["+e+"]");return t?[].slice.call(t):[]},e.prototype.updateTag=function(e,t){if(!e)return null;t=t||this._parseSelector(e);var n=this.getTag(t);return n?this._setMetaElementAttributes(e,n):this._getOrCreateElement(e,!0)},e.prototype.removeTag=function(e){this.removeTagElement(this.getTag(e))},e.prototype.removeTagElement=function(e){e&&this._dom.remove(e)},e.prototype._getOrCreateElement=function(e,t){if(void 0===t&&(t=!1),!t){var n=this._parseSelector(e),r=this.getTag(n);if(r&&this._containsAttributes(e,r))return r}var i=this._dom.createElement("meta");this._setMetaElementAttributes(e,i);var o=this._dom.getElementsByTagName(this._doc,"head")[0];return this._dom.appendChild(o,i),i},e.prototype._setMetaElementAttributes=function(e,t){var n=this;return Object.keys(e).forEach(function(r){return n._dom.setAttribute(t,r,e[r])}),t},e.prototype._parseSelector=function(e){var t=e.name?"name":"property";return t+'="'+e[t]+'"'},e.prototype._containsAttributes=function(e,t){var n=this;return Object.keys(e).every(function(r){return n._dom.getAttribute(t,r)===e[r]})},e}(),X=new r.l("TRANSITION_ID"),$=[{provide:r.b,useFactory:function(e,t,n){return function(){n.get(r.c).donePromise.then(function(){var n=V();Array.prototype.slice.apply(n.querySelectorAll(t,"style[ng-transition]")).filter(function(t){return n.getAttribute(t,"ng-transition")===e}).forEach(function(e){return n.remove(e)})})}},deps:[X,Q,r.m],multi:!0}],ee=function(){function e(){}return e.init=function(){Object(r.N)(new e)},e.prototype.addToWindow=function(e){r.W.getAngularTestability=function(t,n){void 0===n&&(n=!0);var r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.W.getAllAngularTestabilities=function(){return e.getAllTestabilities()},r.W.getAllAngularRootElements=function(){return e.getAllRootElements()},r.W.frameworkStabilizers||(r.W.frameworkStabilizers=[]),r.W.frameworkStabilizers.push(function(e){var t=r.W.getAllAngularTestabilities(),n=t.length,i=!1,o=function(t){i=i||t,0==--n&&e(i)};t.forEach(function(e){e.whenStable(o)})})},e.prototype.findTestabilityInTree=function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?V().isShadowRoot(t)?this.findTestabilityInTree(e,V().getHost(t),!0):this.findTestabilityInTree(e,V().parentElement(t),!0):null},e}(),te=function(){function e(e){this._doc=e}return e.prototype.getTitle=function(){return V().getTitle(this._doc)},e.prototype.setTitle=function(e){V().setTitle(this._doc,e)},e}();function ne(e,t){"undefined"!=typeof COMPILED&&COMPILED||((r.W.ng=r.W.ng||{})[e]=t)}var re={ApplicationRef:r.e,NgZone:r.s};function ie(e){return Object(r.K)(e)}var oe=new r.l("EventManagerPlugins"),se=function(){function e(e,t){var n=this;this._zone=t,this._eventNameToPlugin=new Map,e.forEach(function(e){return e.manager=n}),this._plugins=e.slice().reverse()}return e.prototype.addEventListener=function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)},e.prototype.addGlobalEventListener=function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)},e.prototype.getZone=function(){return this._zone},e.prototype._findPluginFor=function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event "+e)},e}(),ae=function(){function e(e){this._doc=e}return e.prototype.addGlobalEventListener=function(e,t,n){var r=V().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target "+r+" for event "+t);return this.addEventListener(r,t,n)},e}(),ue=function(){function e(){this._stylesSet=new Set}return e.prototype.addStyles=function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)},e.prototype.onStylesAdded=function(e){},e.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},e}(),ce=function(e){function t(t){var n=e.call(this)||this;return n._doc=t,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(t.head),n}return Object(s.__extends)(t,e),t.prototype._addStylesToHost=function(e,t){var n=this;e.forEach(function(e){var r=n._doc.createElement("style");r.textContent=e,n._styleNodes.add(t.appendChild(r))})},t.prototype.addHost=function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)},t.prototype.removeHost=function(e){this._hostNodes.delete(e)},t.prototype.onStylesAdded=function(e){var t=this;this._hostNodes.forEach(function(n){return t._addStylesToHost(e,n)})},t.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(e){return V().remove(e)})},t}(ue),le={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},fe=/%COMP%/g,he="_nghost-%COMP%",de="_ngcontent-%COMP%";function pe(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?pe(e,i,n):(i=i.replace(fe,e),n.push(i))}return n}function ve(e){return function(t){!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var ye=function(){function e(e,t){this.eventManager=e,this.sharedStylesHost=t,this.rendererByCompId=new Map,this.defaultRenderer=new me(e)}return e.prototype.createRenderer=function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case r.F.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new we(this.eventManager,this.sharedStylesHost,t),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case r.F.Native:return new ke(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var i=pe(t.id,t.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}},e.prototype.begin=function(){},e.prototype.end=function(){},e}(),me=function(){function e(e){this.eventManager=e,this.data=Object.create(null)}return e.prototype.destroy=function(){},e.prototype.createElement=function(e,t){return t?document.createElementNS(le[t],e):document.createElement(e)},e.prototype.createComment=function(e){return document.createComment(e)},e.prototype.createText=function(e){return document.createTextNode(e)},e.prototype.appendChild=function(e,t){e.appendChild(t)},e.prototype.insertBefore=function(e,t,n){e&&e.insertBefore(t,n)},e.prototype.removeChild=function(e,t){e&&e.removeChild(t)},e.prototype.selectRootElement=function(e){var t="string"==typeof e?document.querySelector(e):e;if(!t)throw new Error('The selector "'+e+'" did not match any elements');return t.textContent="",t},e.prototype.parentNode=function(e){return e.parentNode},e.prototype.nextSibling=function(e){return e.nextSibling},e.prototype.setAttribute=function(e,t,n,r){if(r){t=r+":"+t;var i=le[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)},e.prototype.removeAttribute=function(e,t,n){if(n){var r=le[n];r?e.removeAttributeNS(r,t):e.removeAttribute(n+":"+t)}else e.removeAttribute(t)},e.prototype.addClass=function(e,t){e.classList.add(t)},e.prototype.removeClass=function(e,t){e.classList.remove(t)},e.prototype.setStyle=function(e,t,n,i){i&r.y.DashCase?e.style.setProperty(t,n,i&r.y.Important?"important":""):e.style[t]=n},e.prototype.removeStyle=function(e,t,n){n&r.y.DashCase?e.style.removeProperty(t):e.style[t]=""},e.prototype.setProperty=function(e,t,n){ge(t,"property"),e[t]=n},e.prototype.setValue=function(e,t){e.nodeValue=t},e.prototype.listen=function(e,t,n){return ge(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ve(n)):this.eventManager.addEventListener(e,t,ve(n))},e}(),_e="@".charCodeAt(0);function ge(e,t){if(e.charCodeAt(0)===_e)throw new Error("Found the synthetic "+t+" "+e+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var be,we=function(e){function t(t,n,r){var i=e.call(this,t)||this;i.component=r;var o=pe(r.id,r.styles,[]);return n.addStyles(o),i.contentAttr=de.replace(fe,r.id),i.hostAttr=he.replace(fe,r.id),i}return Object(s.__extends)(t,e),t.prototype.applyToHost=function(t){e.prototype.setAttribute.call(this,t,this.hostAttr,"")},t.prototype.createElement=function(t,n){var r=e.prototype.createElement.call(this,t,n);return e.prototype.setAttribute.call(this,r,this.contentAttr,""),r},t}(me),ke=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;o.sharedStylesHost=n,o.hostEl=r,o.component=i,o.shadowRoot=r.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var s=pe(i.id,i.styles,[]),a=0;a<s.length;a++){var u=document.createElement("style");u.textContent=s[a],o.shadowRoot.appendChild(u)}return o}return Object(s.__extends)(t,e),t.prototype.nodeOrShadowRoot=function(e){return e===this.hostEl?this.shadowRoot:e},t.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},t.prototype.appendChild=function(t,n){return e.prototype.appendChild.call(this,this.nodeOrShadowRoot(t),n)},t.prototype.insertBefore=function(t,n,r){return e.prototype.insertBefore.call(this,this.nodeOrShadowRoot(t),n,r)},t.prototype.removeChild=function(t,n){return e.prototype.removeChild.call(this,this.nodeOrShadowRoot(t),n)},t.prototype.parentNode=function(t){return this.nodeOrShadowRoot(e.prototype.parentNode.call(this,this.nodeOrShadowRoot(t)))},t}(me),xe="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},Ce=xe("addEventListener"),Ee=xe("removeEventListener"),Se={},Te="__zone_symbol__propagationStopped";"undefined"!=typeof Zone&&Zone[xe("BLACK_LISTED_EVENTS")]&&(be={});var Oe=function(e){return!!be&&be.hasOwnProperty(e)},Pe=function(e){var t=Se[e.type];if(t){var n=this[t];if(n){var r=[e];if(1===n.length)return(s=n[0]).zone!==Zone.current?s.zone.run(s.handler,this,r):s.handler.apply(this,r);for(var i=n.slice(),o=0;o<i.length&&!0!==e[Te];o++){var s;(s=i[o]).zone!==Zone.current?s.zone.run(s.handler,this,r):s.handler.apply(this,r)}}}},Ae=function(e){function t(t,n){var r=e.call(this,t)||this;return r.ngZone=n,r.patchEvent(),r}return Object(s.__extends)(t,e),t.prototype.patchEvent=function(){if(Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var e=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Te]=!0),e&&e.apply(this,arguments)}}},t.prototype.supports=function(e){return!0},t.prototype.addEventListener=function(e,t,n){var i=this,o=n;if(!e[Ce]||r.s.isInAngularZone()&&!Oe(t))e.addEventListener(t,o,!1);else{var s=Se[t];s||(s=Se[t]=xe("ANGULAR"+t+"FALSE"));var a=e[s],u=a&&a.length>0;a||(a=e[s]=[]);var c=Oe(t)?Zone.root:Zone.current;if(0===a.length)a.push({zone:c,handler:o});else{for(var l=!1,f=0;f<a.length;f++)if(a[f].handler===o){l=!0;break}l||a.push({zone:c,handler:o})}u||e[Ce](t,Pe,!1)}return function(){return i.removeEventListener(e,t,o)}},t.prototype.removeEventListener=function(e,t,n){var r=e[Ee];if(!r)return e.removeEventListener.apply(e,[t,n,!1]);var i=Se[t],o=i&&e[i];if(!o)return e.removeEventListener.apply(e,[t,n,!1]);for(var s=!1,a=0;a<o.length;a++)if(o[a].handler===n){s=!0,o.splice(a,1);break}s?0===o.length&&r.apply(e,[t,Pe,!1]):e.removeEventListener.apply(e,[t,n,!1])},t}(ae),Ie={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Me=new r.l("HammerGestureConfig"),Re=function(){function e(){this.events=[],this.overrides={}}return e.prototype.buildHammer=function(e){var t=new Hammer(e);for(var n in t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!0}),this.overrides)t.get(n).set(this.overrides[n]);return t},e}(),je=function(e){function t(t,n){var r=e.call(this,t)||this;return r._config=n,r}return Object(s.__extends)(t,e),t.prototype.supports=function(e){if(!Ie.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e))return!1;if(!window.Hammer)throw new Error("Hammer.js is not loaded, can not bind "+e+" event");return!0},t.prototype.addEventListener=function(e,t,n){var r=this,i=this.manager.getZone();return t=t.toLowerCase(),i.runOutsideAngular(function(){var o=r._config.buildHammer(e),s=function(e){i.runGuarded(function(){n(e)})};return o.on(t,s),function(){return o.off(t,s)}})},t.prototype.isCustomEvent=function(e){return this._config.events.indexOf(e)>-1},t}(ae),Ne=["alt","control","meta","shift"],De={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},Fe=function(e){function t(t){return e.call(this,t)||this}return Object(s.__extends)(t,e),t.prototype.supports=function(e){return null!=t.parseEventName(e)},t.prototype.addEventListener=function(e,n,r){var i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return V().onAndCancel(e,i.domEventName,o)})},t.parseEventName=function(e){var n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;var i=t._normalizeKey(n.pop()),o="";if(Ne.forEach(function(e){var t=n.indexOf(e);t>-1&&(n.splice(t,1),o+=e+".")}),o+=i,0!=n.length||0===i.length)return null;var s={};return s.domEventName=r,s.fullKey=o,s},t.getEventFullKey=function(e){var t="",n=V().getEventKey(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),Ne.forEach(function(r){r!=n&&(0,De[r])(e)&&(t+=r+".")}),t+=n},t.eventCallback=function(e,n,r){return function(i){t.getEventFullKey(i)===e&&r.runGuarded(function(){return n(i)})}},t._normalizeKey=function(e){switch(e){case"esc":return"escape";default:return e}},t}(ae),Ue=function(){function e(e,t){this.defaultDoc=e,this.DOM=t;var n=this.DOM.createHtmlDocument();if(this.inertBodyElement=n.body,null==this.inertBodyElement){var r=this.DOM.createElement("html",n);this.inertBodyElement=this.DOM.createElement("body",n),this.DOM.appendChild(r,this.inertBodyElement),this.DOM.appendChild(n,r)}this.DOM.setInnerHTML(this.inertBodyElement,'<svg><g onload="this.parentNode.remove()"></g></svg>'),!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.DOM.setInnerHTML(this.inertBodyElement,'<svg><p><style><img src="</style><img src=x onerror=alert(1)//">'),this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return e.prototype.getInertBodyElement_XHR=function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(e){return null}var t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(null);var n=t.response.body;return n.removeChild(n.firstChild),n},e.prototype.getInertBodyElement_DOMParser=function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(e){return null}},e.prototype.getInertBodyElement_InertDocument=function(e){var t=this.DOM.createElement("template");return"content"in t?(this.DOM.setInnerHTML(t,e),t):(this.DOM.setInnerHTML(this.inertBodyElement,e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},e.prototype.stripCustomNsAttrs=function(e){var t=this;this.DOM.attributeMap(e).forEach(function(n,r){"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||t.DOM.removeAttribute(e,r)});for(var n=0,r=this.DOM.childNodesAsList(e);n<r.length;n++){var i=r[n];this.DOM.isElementNode(i)&&this.stripCustomNsAttrs(i)}},e}(),Le=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Ve=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Be(e){return(e=String(e)).match(Le)||e.match(Ve)?e:(Object(r.L)()&&V().log("WARNING: sanitizing unsafe URL value "+e+" (see http://g.co/ng/security#xss)"),"unsafe:"+e)}function qe(e){for(var t={},n=0,r=e.split(",");n<r.length;n++)t[r[n]]=!0;return t}function ze(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0,i=e;r<i.length;r++){var o=i[r];for(var s in o)o.hasOwnProperty(s)&&(n[s]=!0)}return n}var He,We=qe("area,br,col,hr,img,wbr"),Ge=qe("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ze=qe("rp,rt"),Qe=ze(Ze,Ge),Je=ze(We,ze(Ge,qe("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ze(Ze,qe("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Qe),Ke=qe("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ye=qe("srcset"),Xe=ze(Ke,Ye,qe("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width")),$e=function(){function e(){this.sanitizedSomething=!1,this.buf=[],this.DOM=V()}return e.prototype.sanitizeChildren=function(e){for(var t=this.DOM.firstChild(e);t;)if(this.DOM.isElementNode(t)?this.startElement(t):this.DOM.isTextNode(t)?this.chars(this.DOM.nodeValue(t)):this.sanitizedSomething=!0,this.DOM.firstChild(t))t=this.DOM.firstChild(t);else for(;t;){this.DOM.isElementNode(t)&&this.endElement(t);var n=this.checkClobberedElement(t,this.DOM.nextSibling(t));if(n){t=n;break}t=this.checkClobberedElement(t,this.DOM.parentElement(t))}return this.buf.join("")},e.prototype.startElement=function(e){var t=this,n=this.DOM.nodeName(e).toLowerCase();Je.hasOwnProperty(n)?(this.buf.push("<"),this.buf.push(n),this.DOM.attributeMap(e).forEach(function(e,n){var r,i=n.toLowerCase();Xe.hasOwnProperty(i)?(Ke[i]&&(e=Be(e)),Ye[i]&&(r=e,e=(r=String(r)).split(",").map(function(e){return Be(e.trim())}).join(", ")),t.buf.push(" "),t.buf.push(n),t.buf.push('="'),t.buf.push(nt(e)),t.buf.push('"')):t.sanitizedSomething=!0}),this.buf.push(">")):this.sanitizedSomething=!0},e.prototype.endElement=function(e){var t=this.DOM.nodeName(e).toLowerCase();Je.hasOwnProperty(t)&&!We.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))},e.prototype.chars=function(e){this.buf.push(nt(e))},e.prototype.checkClobberedElement=function(e,t){if(t&&this.DOM.contains(e,t))throw new Error("Failed to sanitize html because the element is clobbered: "+this.DOM.getOuterHTML(e));return t},e}(),et=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tt=/([^\#-~ |!])/g;function nt(e){return e.replace(/&/g,"&amp;").replace(et,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(tt,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var rt=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),it=/^url\(([^)]+)\)$/,ot=function(){},st=function(e){function t(t){var n=e.call(this)||this;return n._doc=t,n}return Object(s.__extends)(t,e),t.prototype.sanitize=function(e,t){if(null==t)return null;switch(e){case r.A.NONE:return t;case r.A.HTML:return t instanceof ut?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){var n=V(),i=null;try{He=He||new Ue(e,n);var o=t?String(t):"";i=He.getInertBodyElement(o);var s=5,a=o;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,o=a,a=n.getInnerHTML(i),i=He.getInertBodyElement(o)}while(o!==a);var u=new $e,c=u.sanitizeChildren(n.getTemplateContent(i)||i);return Object(r.L)()&&u.sanitizedSomething&&n.log("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),c}finally{if(i)for(var l=n.getTemplateContent(i)||i,f=0,h=n.childNodesAsList(l);f<h.length;f++)n.removeChild(l,h[f])}}(this._doc,String(t)));case r.A.STYLE:return t instanceof ct?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),function(e){if(!(e=String(e).trim()))return"";var t=e.match(it);return t&&Be(t[1])===t[1]||e.match(rt)&&function(e){for(var t=!0,n=!0,r=0;r<e.length;r++){var i=e.charAt(r);"'"===i&&n?t=!t:'"'===i&&t&&(n=!n)}return t&&n}(e)?e:(Object(r.L)()&&V().log("WARNING: sanitizing unsafe style value "+e+" (see http://g.co/ng/security#xss)."),"unsafe")}(t));case r.A.SCRIPT:if(t instanceof lt)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case r.A.URL:return t instanceof ht||t instanceof ft?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),Be(String(t)));case r.A.RESOURCE_URL:if(t instanceof ht)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+e+" (see http://g.co/ng/security#xss)")}},t.prototype.checkNotSafeValue=function(e,t){if(e instanceof at)throw new Error("Required a safe "+t+", got a "+e.getTypeName()+" (see http://g.co/ng/security#xss)")},t.prototype.bypassSecurityTrustHtml=function(e){return new ut(e)},t.prototype.bypassSecurityTrustStyle=function(e){return new ct(e)},t.prototype.bypassSecurityTrustScript=function(e){return new lt(e)},t.prototype.bypassSecurityTrustUrl=function(e){return new ft(e)},t.prototype.bypassSecurityTrustResourceUrl=function(e){return new ht(e)},t}(ot),at=function(){function e(e){this.changingThisBreaksApplicationSecurity=e}return e.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},e}(),ut=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.__extends)(t,e),t.prototype.getTypeName=function(){return"HTML"},t}(at),ct=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.__extends)(t,e),t.prototype.getTypeName=function(){return"Style"},t}(at),lt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.__extends)(t,e),t.prototype.getTypeName=function(){return"Script"},t}(at),ft=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.__extends)(t,e),t.prototype.getTypeName=function(){return"URL"},t}(at),ht=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.__extends)(t,e),t.prototype.getTypeName=function(){return"ResourceURL"},t}(at),dt=[{provide:r.u,useValue:"browser"},{provide:r.v,useValue:function(){G.makeCurrent(),ee.init()},multi:!0},{provide:a,useClass:K,deps:[Q]},{provide:Q,useFactory:function(){return document},deps:[]}],pt=Object(r.H)(r.M,"browser",dt);function vt(){return new r.i}var yt=function(){function e(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return e.withServerTransition=function(t){return{ngModule:e,providers:[{provide:r.a,useValue:t.appId},{provide:X,useExisting:r.a},$]}},e}();"undefined"!=typeof window&&window;var mt=function(){function e(){}return Object.defineProperty(e.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.reset=function(e){void 0===e&&(e=void 0),this.control&&this.control.reset(e)},e.prototype.hasError=function(e,t){return!!this.control&&this.control.hasError(e,t)},e.prototype.getError=function(e,t){return this.control?this.control.getError(e,t):null},e}(),_t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.__extends)(t,e),Object.defineProperty(t.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),t}(mt);function gt(e){return null==e||0===e.length}var bt=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,wt=function(){function e(){}return e.min=function(e){return function(t){if(gt(t.value)||gt(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}},e.max=function(e){return function(t){if(gt(t.value)||gt(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}},e.required=function(e){return gt(e.value)?{required:!0}:null},e.requiredTrue=function(e){return!0===e.value?null:{required:!0}},e.email=function(e){return bt.test(e.value)?null:{email:!0}},e.minLength=function(e){return function(t){if(gt(t.value))return null;var n=t.value?t.value.length:0;return n<e?{minlength:{requiredLength:e,actualLength:n}}:null}},e.maxLength=function(e){return function(t){var n=t.value?t.value.length:0;return n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}},e.pattern=function(t){return t?("string"==typeof t?(r="","^"!==t.charAt(0)&&(r+="^"),r+=t,"$"!==t.charAt(t.length-1)&&(r+="$"),n=new RegExp(r)):(r=t.toString(),n=t),function(e){if(gt(e.value))return null;var t=e.value;return n.test(t)?null:{pattern:{requiredPattern:r,actualValue:t}}}):e.nullValidator;var n,r},e.nullValidator=function(e){return null},e.compose=function(e){if(!e)return null;var t=e.filter(kt);return 0==t.length?null:function(e){return Ct(function(e,n){return t.map(function(t){return t(e)})}(e))}},e.composeAsync=function(e){if(!e)return null;var t=e.filter(kt);return 0==t.length?null:function(e){var n=function(e,n){return t.map(function(t){return t(e)})}(e).map(xt);return U.call(P(n),Ct)}},e}();function kt(e){return null!=e}function xt(e){var t=Object(r._0)(e)?R(e):e;if(!Object(r.Z)(t))throw new Error("Expected validator to return Promise or Observable.");return t}function Ct(e){var t=e.reduce(function(e,t){return null!=t?Object(s.__assign)({},e,t):e},{});return 0===Object.keys(t).length?null:t}var Et=new r.l("NgValueAccessor"),St=function(){function e(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}(),Tt=new r.l("CompositionEventMode"),Ot=function(){function e(e,t,n){var r;this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(r=V()?V().getUserAgent():"",!/android (\d+)/.test(r.toLowerCase())))}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._handleInput=function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)},e.prototype._compositionStart=function(){this._composing=!0},e.prototype._compositionEnd=function(e){this._composing=!1,this._compositionMode&&this.onChange(e)},e}();function Pt(e){return e.validate?function(t){return e.validate(t)}:e}function At(e){return e.validate?function(t){return e.validate(t)}:e}var It=function(){function e(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},e.prototype.registerOnChange=function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}();function Mt(){throw new Error("unimplemented")}var Rt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._parent=null,t.name=null,t.valueAccessor=null,t._rawValidators=[],t._rawAsyncValidators=[],t}return Object(s.__extends)(t,e),Object.defineProperty(t.prototype,"validator",{get:function(){return Mt()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"asyncValidator",{get:function(){return Mt()},enumerable:!0,configurable:!0}),t}(mt),jt=function(){function e(){this._accessors=[]}return e.prototype.add=function(e,t){this._accessors.push([e,t])},e.prototype.remove=function(e){for(var t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)},e.prototype.select=function(e){var t=this;this._accessors.forEach(function(n){t._isSameGroup(n,e)&&n[1]!==e&&n[1].fireUncheck(e.value)})},e.prototype._isSameGroup=function(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name},e}(),Nt=function(){function e(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}return e.prototype.ngOnInit=function(){this._control=this._injector.get(Rt),this._checkName(),this._registry.add(this._control,this)},e.prototype.ngOnDestroy=function(){this._registry.remove(this)},e.prototype.writeValue=function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},e.prototype.registerOnChange=function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}},e.prototype.fireUncheck=function(e){this.writeValue(e)},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},e.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},e}();function Dt(e,t){return t.path.concat([e])}function Ft(e,t){e||Lt(t,"Cannot find control with"),t.valueAccessor||Lt(t,"No value accessor for form control with"),e.validator=wt.compose([e.validator,t.validator]),e.asyncValidator=wt.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(function(n){e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Ut(e,t)})}(e,t),function(e,t){e.registerOnChange(function(e,n){t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Ut(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange(function(e){t.valueAccessor.setDisabledState(e)}),t._rawValidators.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(function(){return e.updateValueAndValidity()})}),t._rawAsyncValidators.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(function(){return e.updateValueAndValidity()})})}function Ut(e,t){t.viewToModelUpdate(e._pendingValue),e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),e._pendingChange=!1}function Lt(e,t){var n;throw n=e.path.length>1?"path: '"+e.path.join(" -> ")+"'":e.path[0]?"name: '"+e.path+"'":"unspecified name attribute",new Error(t+" "+n)}function Vt(e){return null!=e?wt.compose(e.map(Pt)):null}function Bt(e){return null!=e?wt.composeAsync(e.map(At)):null}var qt=[St,function(){function e(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))},e.prototype.registerOnChange=function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}(),It,function(){function e(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=r._1}return Object.defineProperty(e.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=function(e,t){return null==e?""+t:(t&&"object"==typeof t&&(t="Object"),(e+": "+t).slice(0,50))}(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)},e.prototype.registerOnChange=function(e){var t=this;this.onChange=function(n){t.value=t._getOptionValue(n),e(t.value)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._registerOption=function(){return(this._idCounter++).toString()},e.prototype._getOptionId=function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(this._compareWith(this._optionMap.get(r),e))return r}return null},e.prototype._getOptionValue=function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e},e}(),function(){function e(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=r._1}return Object.defineProperty(e.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){var t,n=this;if(this.value=e,Array.isArray(e)){var r=e.map(function(e){return n._getOptionId(e)});t=function(e,t){e._setSelected(r.indexOf(t.toString())>-1)}}else t=function(e,t){e._setSelected(!1)};this._optionMap.forEach(t)},e.prototype.registerOnChange=function(e){var t=this;this.onChange=function(n){var r=[];if(n.hasOwnProperty("selectedOptions"))for(var i=n.selectedOptions,o=0;o<i.length;o++){var s=i.item(o),a=t._getOptionValue(s.value);r.push(a)}else for(i=n.options,o=0;o<i.length;o++)(s=i.item(o)).selected&&(a=t._getOptionValue(s.value),r.push(a));t.value=r,e(r)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._registerOption=function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t},e.prototype._getOptionId=function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(this._compareWith(this._optionMap.get(r)._value,e))return r}return null},e.prototype._getOptionValue=function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e},e}(),Nt],zt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.__extends)(t,e),t.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},t.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(t.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return Dt(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validator",{get:function(){return Vt(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"asyncValidator",{get:function(){return Bt(this._asyncValidators)},enumerable:!0,configurable:!0}),t.prototype._checkParentType=function(){},t}(_t),Ht=function(){function e(e){this._cd=e}return Object.defineProperty(e.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0}),e}(),Wt=function(e){function t(t){return e.call(this,t)||this}return Object(s.__extends)(t,e),t}(Ht),Gt=function(e){function t(t){return e.call(this,t)||this}return Object(s.__extends)(t,e),t}(Ht);function Zt(e){var t=Jt(e)?e.validators:e;return Array.isArray(t)?Vt(t):t||null}function Qt(e,t){var n=Jt(t)?t.asyncValidators:e;return Array.isArray(n)?Bt(n):n||null}function Jt(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var Kt=function(){function e(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return"VALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"invalid",{get:function(){return"INVALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pending",{get:function(){return"PENDING"==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return"DISABLED"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return"DISABLED"!==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateOn",{get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"},enumerable:!0,configurable:!0}),e.prototype.setValidators=function(e){this.validator=Zt(e)},e.prototype.setAsyncValidators=function(e){this.asyncValidator=Qt(e)},e.prototype.clearValidators=function(){this.validator=null},e.prototype.clearAsyncValidators=function(){this.asyncValidator=null},e.prototype.markAsTouched=function(e){void 0===e&&(e={}),this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)},e.prototype.markAsUntouched=function(e){void 0===e&&(e={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},e.prototype.markAsDirty=function(e){void 0===e&&(e={}),this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)},e.prototype.markAsPristine=function(e){void 0===e&&(e={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},e.prototype.markAsPending=function(e){void 0===e&&(e={}),this.status="PENDING",this._parent&&!e.onlySelf&&this._parent.markAsPending(e)},e.prototype.disable=function(e){void 0===e&&(e={}),this.status="DISABLED",this.errors=null,this._forEachChild(function(t){t.disable(Object(s.__assign)({},e,{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(e),this._onDisabledChange.forEach(function(e){return e(!0)})},e.prototype.enable=function(e){void 0===e&&(e={}),this.status="VALID",this._forEachChild(function(t){t.enable(Object(s.__assign)({},e,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(e),this._onDisabledChange.forEach(function(e){return e(!1)})},e.prototype._updateAncestors=function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),this._parent._updatePristine(),this._parent._updateTouched())},e.prototype.setParent=function(e){this._parent=e},e.prototype.updateValueAndValidity=function(e){void 0===e&&(e={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)},e.prototype._updateTreeValidity=function(e){void 0===e&&(e={emitEvent:!0}),this._forEachChild(function(t){return t._updateTreeValidity(e)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})},e.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"},e.prototype._runValidator=function(){return this.validator?this.validator(this):null},e.prototype._runAsyncValidator=function(e){var t=this;if(this.asyncValidator){this.status="PENDING";var n=xt(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(function(n){return t.setErrors(n,{emitEvent:e})})}},e.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},e.prototype.setErrors=function(e,t){void 0===t&&(t={}),this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)},e.prototype.get=function(e){return function(e,t,n){return null==t?null:(t instanceof Array||(t=t.split(".")),t instanceof Array&&0===t.length?null:t.reduce(function(e,t){return e instanceof Xt?e.controls[t]||null:e instanceof $t&&e.at(t)||null},e))}(this,e)},e.prototype.getError=function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null},e.prototype.hasError=function(e,t){return!!this.getError(e,t)},Object.defineProperty(e.prototype,"root",{get:function(){for(var e=this;e._parent;)e=e._parent;return e},enumerable:!0,configurable:!0}),e.prototype._updateControlsErrors=function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)},e.prototype._initObservables=function(){this.valueChanges=new r.j,this.statusChanges=new r.j},e.prototype._calculateStatus=function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"},e.prototype._anyControlsHaveStatus=function(e){return this._anyControls(function(t){return t.status===e})},e.prototype._anyControlsDirty=function(){return this._anyControls(function(e){return e.dirty})},e.prototype._anyControlsTouched=function(){return this._anyControls(function(e){return e.touched})},e.prototype._updatePristine=function(e){void 0===e&&(e={}),this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},e.prototype._updateTouched=function(e){void 0===e&&(e={}),this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},e.prototype._isBoxedValue=function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e},e.prototype._registerOnCollectionChange=function(e){this._onCollectionChange=e},e.prototype._setUpdateStrategy=function(e){Jt(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)},e}(),Yt=function(e){function t(t,n,r){void 0===t&&(t=null);var i=e.call(this,Zt(n),Qt(r,n))||this;return i._onChange=[],i._applyFormState(t),i._setUpdateStrategy(n),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i._initObservables(),i}return Object(s.__extends)(t,e),t.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(function(e){return e(n.value,!1!==t.emitViewToModelChange)}),this.updateValueAndValidity(t)},t.prototype.patchValue=function(e,t){void 0===t&&(t={}),this.setValue(e,t)},t.prototype.reset=function(e,t){void 0===e&&(e=null),void 0===t&&(t={}),this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1},t.prototype._updateValue=function(){},t.prototype._anyControls=function(e){return!1},t.prototype._allControlsDisabled=function(){return this.disabled},t.prototype.registerOnChange=function(e){this._onChange.push(e)},t.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},t.prototype.registerOnDisabledChange=function(e){this._onDisabledChange.push(e)},t.prototype._forEachChild=function(e){},t.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))},t.prototype._applyFormState=function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e},t}(Kt),Xt=function(e){function t(t,n,r){var i=e.call(this,Zt(n),Qt(r,n))||this;return i.controls=t,i._initObservables(),i._setUpdateStrategy(n),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return Object(s.__extends)(t,e),t.prototype.registerControl=function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)},t.prototype.addControl=function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},t.prototype.removeControl=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()},t.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},t.prototype.contains=function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled},t.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this._checkAllValuesPresent(e),Object.keys(e).forEach(function(r){n._throwIfControlMissing(r),n.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)},t.prototype.patchValue=function(e,t){var n=this;void 0===t&&(t={}),Object.keys(e).forEach(function(r){n.controls[r]&&n.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)},t.prototype.reset=function(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this._forEachChild(function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t),this._updatePristine(t),this._updateTouched(t)},t.prototype.getRawValue=function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof Yt?t.value:t.getRawValue(),e})},t.prototype._syncPendingControls=function(){var e=this._reduceChildren(!1,function(e,t){return!!t._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e},t.prototype._throwIfControlMissing=function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: "+e+".")},t.prototype._forEachChild=function(e){var t=this;Object.keys(this.controls).forEach(function(n){return e(t.controls[n],n)})},t.prototype._setUpControls=function(){var e=this;this._forEachChild(function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)})},t.prototype._updateValue=function(){this.value=this._reduceValue()},t.prototype._anyControls=function(e){var t=this,n=!1;return this._forEachChild(function(r,i){n=n||t.contains(i)&&e(r)}),n},t.prototype._reduceValue=function(){var e=this;return this._reduceChildren({},function(t,n,r){return(n.enabled||e.disabled)&&(t[r]=n.value),t})},t.prototype._reduceChildren=function(e,t){var n=e;return this._forEachChild(function(e,r){n=t(n,e,r)}),n},t.prototype._allControlsDisabled=function(){for(var e=0,t=Object.keys(this.controls);e<t.length;e++)if(this.controls[t[e]].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled},t.prototype._checkAllValuesPresent=function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control with name: '"+n+"'.")})},t}(Kt),$t=function(e){function t(t,n,r){var i=e.call(this,Zt(n),Qt(r,n))||this;return i.controls=t,i._initObservables(),i._setUpdateStrategy(n),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return Object(s.__extends)(t,e),t.prototype.at=function(e){return this.controls[e]},t.prototype.push=function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()},t.prototype.insert=function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()},t.prototype.removeAt=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity()},t.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(t.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),t.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this._checkAllValuesPresent(e),e.forEach(function(e,r){n._throwIfControlMissing(r),n.at(r).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)},t.prototype.patchValue=function(e,t){var n=this;void 0===t&&(t={}),e.forEach(function(e,r){n.at(r)&&n.at(r).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)},t.prototype.reset=function(e,t){void 0===e&&(e=[]),void 0===t&&(t={}),this._forEachChild(function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t),this._updatePristine(t),this._updateTouched(t)},t.prototype.getRawValue=function(){return this.controls.map(function(e){return e instanceof Yt?e.value:e.getRawValue()})},t.prototype._syncPendingControls=function(){var e=this.controls.reduce(function(e,t){return!!t._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e},t.prototype._throwIfControlMissing=function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)},t.prototype._forEachChild=function(e){this.controls.forEach(function(t,n){e(t,n)})},t.prototype._updateValue=function(){var e=this;this.value=this.controls.filter(function(t){return t.enabled||e.disabled}).map(function(e){return e.value})},t.prototype._anyControls=function(e){return this.controls.some(function(t){return t.enabled&&e(t)})},t.prototype._setUpControls=function(){var e=this;this._forEachChild(function(t){return e._registerControl(t)})},t.prototype._checkAllValuesPresent=function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control at index: "+n+".")})},t.prototype._allControlsDisabled=function(){for(var e=0,t=this.controls;e<t.length;e++)if(t[e].enabled)return!1;return this.controls.length>0||this.disabled},t.prototype._registerControl=function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)},t}(Kt),en=Promise.resolve(null),tn=function(e){function t(t,n){var i=e.call(this)||this;return i.submitted=!1,i._directives=[],i.ngSubmit=new r.j,i.form=new Xt({},Vt(t),Bt(n)),i}return Object(s.__extends)(t,e),t.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(t.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),t.prototype.addControl=function(e){var t=this;en.then(function(){var n=t._findContainer(e.path);e.control=n.registerControl(e.name,e.control),Ft(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),t._directives.push(e)})},t.prototype.getControl=function(e){return this.form.get(e.path)},t.prototype.removeControl=function(e){var t=this;en.then(function(){var n,r,i=t._findContainer(e.path);i&&i.removeControl(e.name),(r=(n=t._directives).indexOf(e))>-1&&n.splice(r,1)})},t.prototype.addFormGroup=function(e){var t=this;en.then(function(){var n=t._findContainer(e.path),r=new Xt({});(function(e,t){null==e&&Lt(t,"Cannot find control with"),e.validator=wt.compose([e.validator,t.validator]),e.asyncValidator=wt.composeAsync([e.asyncValidator,t.asyncValidator])})(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})},t.prototype.removeFormGroup=function(e){var t=this;en.then(function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name)})},t.prototype.getFormGroup=function(e){return this.form.get(e.path)},t.prototype.updateModel=function(e,t){var n=this;en.then(function(){n.form.get(e.path).setValue(t)})},t.prototype.setValue=function(e){this.control.setValue(e)},t.prototype.onSubmit=function(e){return this.submitted=!0,t=this._directives,this.form._syncPendingControls(),t.forEach(function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)}),this.ngSubmit.emit(e),!1;var t},t.prototype.onReset=function(){this.resetForm()},t.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},t.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},t.prototype._findContainer=function(e){return e.pop(),e.length?this.form.get(e):this.form},t}(_t),nn='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',rn='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',on=function(){function e(){}return e.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      \n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')},e.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+nn+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+rn)},e.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},e.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+nn+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+rn)},e}(),sn=function(e){function t(t,n,r){var i=e.call(this)||this;return i._parent=t,i._validators=n,i._asyncValidators=r,i}return Object(s.__extends)(t,e),t.prototype._checkParentType=function(){this._parent instanceof t||this._parent instanceof tn||on.modelGroupParentException()},t}(zt),an=Promise.resolve(null),un=function(e){function t(t,n,i,o){var s=e.call(this)||this;return s.control=new Yt,s._registered=!1,s.update=new r.j,s._parent=t,s._rawValidators=n||[],s._rawAsyncValidators=i||[],s.valueAccessor=function(e,t){if(!t)return null;var n=void 0,r=void 0,i=void 0;return t.forEach(function(t){var o;t.constructor===Ot?n=t:(o=t,qt.some(function(e){return o.constructor===e})?(r&&Lt(e,"More than one built-in value accessor matches form control with"),r=t):(i&&Lt(e,"More than one custom value accessor matches form control with"),i=t))}),i||r||n||(Lt(e,"No valid value accessor for form control with"),null)}(s,o),s}return Object(s.__extends)(t,e),t.prototype.ngOnChanges=function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,t){if(!e.hasOwnProperty("model"))return!1;var n=e.model;return!!n.isFirstChange()||!Object(r._1)(t,n.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},t.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(t.prototype,"path",{get:function(){return this._parent?Dt(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validator",{get:function(){return Vt(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"asyncValidator",{get:function(){return Bt(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),t.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},t.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},t.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},t.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},t.prototype._setUpStandalone=function(){Ft(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},t.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},t.prototype._checkParentType=function(){!(this._parent instanceof sn)&&this._parent instanceof zt?on.formGroupNameException():this._parent instanceof sn||this._parent instanceof tn||on.modelParentException()},t.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||on.missingNameException()},t.prototype._updateValue=function(e){var t=this;an.then(function(){t.control.setValue(e,{emitViewToModelChange:!1})})},t.prototype._updateDisabled=function(e){var t=this,n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;an.then(function(){r&&!t.control.disabled?t.control.disable():!r&&t.control.disabled&&t.control.enable()})},t}(Rt),cn=function(){},ln=function(){},fn=function(){},hn=n("Veqx").a.of,dn=n("Qnch");function pn(e,t){return function(n){return n.lift(new vn(e,t))}}var vn=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new yn(e,this.predicate,this.thisArg))},e}(),yn=function(e){function t(t,n,r){e.call(this,t),this.predicate=n,this.thisArg=r,this.count=0}return Object(s.__extends)(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(j.a),mn=function(){},_n=function(){},gn=function(){function e(e){var t=this;this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?function(){t.headers=new Map,e.split("\n").forEach(function(e){var n=e.indexOf(":");if(n>0){var r=e.slice(0,n),i=r.toLowerCase(),o=e.slice(n+1).trim();t.maybeSetNormalizedName(r,i),t.headers.has(i)?t.headers.get(i).push(o):t.headers.set(i,[o])}})}:function(){t.headers=new Map,Object.keys(e).forEach(function(n){var r=e[n],i=n.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(t.headers.set(i,r),t.maybeSetNormalizedName(n,i))})}:this.headers=new Map}return e.prototype.has=function(e){return this.init(),this.headers.has(e.toLowerCase())},e.prototype.get=function(e){this.init();var t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null},e.prototype.keys=function(){return this.init(),Array.from(this.normalizedNames.values())},e.prototype.getAll=function(e){return this.init(),this.headers.get(e.toLowerCase())||null},e.prototype.append=function(e,t){return this.clone({name:e,value:t,op:"a"})},e.prototype.set=function(e,t){return this.clone({name:e,value:t,op:"s"})},e.prototype.delete=function(e,t){return this.clone({name:e,value:t,op:"d"})},e.prototype.maybeSetNormalizedName=function(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)},e.prototype.init=function(){var t=this;this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(e){return t.applyUpdate(e)}),this.lazyUpdate=null))},e.prototype.copyFrom=function(e){var t=this;e.init(),Array.from(e.headers.keys()).forEach(function(n){t.headers.set(n,e.headers.get(n)),t.normalizedNames.set(n,e.normalizedNames.get(n))})},e.prototype.clone=function(t){var n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n},e.prototype.applyUpdate=function(e){var t=e.name.toLowerCase();switch(e.op){case"a":case"s":var n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);var r=("a"===e.op?this.headers.get(t):void 0)||[];r.push.apply(r,n),this.headers.set(t,r);break;case"d":var i=e.value;if(i){var o=this.headers.get(t);if(!o)return;0===(o=o.filter(function(e){return-1===i.indexOf(e)})).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}},e.prototype.forEach=function(e){var t=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return e(t.normalizedNames.get(n),t.headers.get(n))})},e}(),bn=function(){function e(){}return e.prototype.encodeKey=function(e){return wn(e)},e.prototype.encodeValue=function(e){return wn(e)},e.prototype.decodeKey=function(e){return decodeURIComponent(e)},e.prototype.decodeValue=function(e){return decodeURIComponent(e)},e}();function wn(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var kn=function(){function e(e){void 0===e&&(e={});var t,n,r,i=this;if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new bn,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(t=e.fromString,n=this.encoder,r=new Map,t.length>0&&t.split("&").forEach(function(e){var t=e.indexOf("="),i=-1==t?[n.decodeKey(e),""]:[n.decodeKey(e.slice(0,t)),n.decodeValue(e.slice(t+1))],o=i[0],s=i[1],a=r.get(o)||[];a.push(s),r.set(o,a)}),r)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(function(t){var n=e.fromObject[t];i.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}return e.prototype.has=function(e){return this.init(),this.map.has(e)},e.prototype.get=function(e){this.init();var t=this.map.get(e);return t?t[0]:null},e.prototype.getAll=function(e){return this.init(),this.map.get(e)||null},e.prototype.keys=function(){return this.init(),Array.from(this.map.keys())},e.prototype.append=function(e,t){return this.clone({param:e,value:t,op:"a"})},e.prototype.set=function(e,t){return this.clone({param:e,value:t,op:"s"})},e.prototype.delete=function(e,t){return this.clone({param:e,value:t,op:"d"})},e.prototype.toString=function(){var e=this;return this.init(),this.keys().map(function(t){var n=e.encoder.encodeKey(t);return e.map.get(t).map(function(t){return n+"="+e.encoder.encodeValue(t)}).join("&")}).join("&")},e.prototype.clone=function(t){var n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([t]),n},e.prototype.init=function(){var e=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(t){return e.map.set(t,e.cloneFrom.map.get(t))}),this.updates.forEach(function(t){switch(t.op){case"a":case"s":var n=("a"===t.op?e.map.get(t.param):void 0)||[];n.push(t.value),e.map.set(t.param,n);break;case"d":if(void 0===t.value){e.map.delete(t.param);break}var r=e.map.get(t.param)||[],i=r.indexOf(t.value);-1!==i&&r.splice(i,1),r.length>0?e.map.set(t.param,r):e.map.delete(t.param)}}),this.cloneFrom=null)},e}();function xn(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function Cn(e){return"undefined"!=typeof Blob&&e instanceof Blob}function En(e){return"undefined"!=typeof FormData&&e instanceof FormData}var Sn=function(){function e(e,t,n,r){var i;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new gn),this.params){var o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{var s=t.indexOf("?");this.urlWithParams=t+(-1===s?"?":s<t.length-1?"&":"")+o}}else this.params=new kn,this.urlWithParams=t}return e.prototype.serializeBody=function(){return null===this.body?null:xn(this.body)||Cn(this.body)||En(this.body)||"string"==typeof this.body?this.body:this.body instanceof kn?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},e.prototype.detectContentTypeHeader=function(){return null===this.body?null:En(this.body)?null:Cn(this.body)?this.body.type||null:xn(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof kn?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null},e.prototype.clone=function(t){void 0===t&&(t={});var n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress,u=t.headers||this.headers,c=t.params||this.params;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce(function(e,n){return e.set(n,t.setHeaders[n])},u)),t.setParams&&(c=Object.keys(t.setParams).reduce(function(e,n){return e.set(n,t.setParams[n])},c)),new e(n,r,o,{params:c,headers:u,reportProgress:a,responseType:i,withCredentials:s})},e}(),Tn=function(){var e={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return e[e.Sent]="Sent",e[e.UploadProgress]="UploadProgress",e[e.ResponseHeader]="ResponseHeader",e[e.DownloadProgress]="DownloadProgress",e[e.Response]="Response",e[e.User]="User",e}(),On=function(){return function(e,t,n){void 0===t&&(t=200),void 0===n&&(n="OK"),this.headers=e.headers||new gn,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}(),Pn=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.type=Tn.ResponseHeader,n}return Object(s.__extends)(t,e),t.prototype.clone=function(e){return void 0===e&&(e={}),new t({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})},t}(On),An=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.type=Tn.Response,n.body=void 0!==t.body?t.body:null,n}return Object(s.__extends)(t,e),t.prototype.clone=function(e){return void 0===e&&(e={}),new t({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})},t}(On),In=function(e){function t(t){var n=e.call(this,t,0,"Unknown Error")||this;return n.name="HttpErrorResponse",n.ok=!1,n.message=n.status>=200&&n.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):"Http failure response for "+(t.url||"(unknown url)")+": "+t.status+" "+t.statusText,n.error=t.error||null,n}return Object(s.__extends)(t,e),t}(On);function Mn(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}var Rn=function(){function e(e){this.handler=e}return e.prototype.request=function(e,t,n){var r,i=this;if(void 0===n&&(n={}),e instanceof Sn)r=e;else{var o;o=n.headers instanceof gn?n.headers:new gn(n.headers);var s=void 0;n.params&&(s=n.params instanceof kn?n.params:new kn({fromObject:n.params})),r=new Sn(e,t,void 0!==n.body?n.body:null,{headers:o,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}var a=(function(e,t){return function(e,t){return Object(dn.a)(e,t,1)}(e,t)(this)}).call(hn(r),function(e){return i.handler.handle(e)});if(e instanceof Sn||"events"===n.observe)return a;var u=(function(e,t){return pn(e,t)(this)}).call(a,function(e){return e instanceof An});switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return U.call(u,function(e){if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body});case"blob":return U.call(u,function(e){if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body});case"text":return U.call(u,function(e){if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body});case"json":default:return U.call(u,function(e){return e.body})}case"response":return u;default:throw new Error("Unreachable: unhandled observe type "+n.observe+"}")}},e.prototype.delete=function(e,t){return void 0===t&&(t={}),this.request("DELETE",e,t)},e.prototype.get=function(e,t){return void 0===t&&(t={}),this.request("GET",e,t)},e.prototype.head=function(e,t){return void 0===t&&(t={}),this.request("HEAD",e,t)},e.prototype.jsonp=function(e,t){return this.request("JSONP",e,{params:(new kn).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})},e.prototype.options=function(e,t){return void 0===t&&(t={}),this.request("OPTIONS",e,t)},e.prototype.patch=function(e,t,n){return void 0===n&&(n={}),this.request("PATCH",e,Mn(n,t))},e.prototype.post=function(e,t,n){return void 0===n&&(n={}),this.request("POST",e,Mn(n,t))},e.prototype.put=function(e,t,n){return void 0===n&&(n={}),this.request("PUT",e,Mn(n,t))},e}(),jn=function(){function e(e,t){this.next=e,this.interceptor=t}return e.prototype.handle=function(e){return this.interceptor.intercept(e,this.next)},e}(),Nn=new r.l("HTTP_INTERCEPTORS"),Dn=function(){function e(){}return e.prototype.intercept=function(e,t){return t.handle(e)},e}(),Fn=/^\)\]\}',?\n/,Un=function(){},Ln=function(){function e(){}return e.prototype.build=function(){return new XMLHttpRequest},e}(),Vn=function(){function e(e){this.xhrFactory=e}return e.prototype.handle=function(e){var t=this;if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new k.a(function(n){var r=t.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach(function(e,t){return r.setRequestHeader(e,t.join(","))}),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){var i=e.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(e.responseType){var o=e.responseType.toLowerCase();r.responseType="json"!==o?o:"text"}var s=e.serializeBody(),a=null,u=function(){if(null!==a)return a;var t=1223===r.status?204:r.status,n=r.statusText||"OK",i=new gn(r.getAllResponseHeaders()),o=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(r)||e.url;return a=new Pn({headers:i,status:t,statusText:n,url:o})},c=function(){var t=u(),i=t.headers,o=t.status,s=t.statusText,a=t.url,c=null;204!==o&&(c="undefined"==typeof r.response?r.responseText:r.response),0===o&&(o=c?200:0);var l=o>=200&&o<300;if("json"===e.responseType&&"string"==typeof c){var f=c;c=c.replace(Fn,"");try{c=""!==c?JSON.parse(c):null}catch(e){c=f,l&&(l=!1,c={error:e,text:c})}}l?(n.next(new An({body:c,headers:i,status:o,statusText:s,url:a||void 0})),n.complete()):n.error(new In({error:c,headers:i,status:o,statusText:s,url:a||void 0}))},l=function(e){var t=new In({error:e,status:r.status||0,statusText:r.statusText||"Unknown Error"});n.error(t)},f=!1,h=function(t){f||(n.next(u()),f=!0);var i={type:Tn.DownloadProgress,loaded:t.loaded};t.lengthComputable&&(i.total=t.total),"text"===e.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},d=function(e){var t={type:Tn.UploadProgress,loaded:e.loaded};e.lengthComputable&&(t.total=e.total),n.next(t)};return r.addEventListener("load",c),r.addEventListener("error",l),e.reportProgress&&(r.addEventListener("progress",h),null!==s&&r.upload&&r.upload.addEventListener("progress",d)),r.send(s),n.next({type:Tn.Sent}),function(){r.removeEventListener("error",l),r.removeEventListener("load",c),e.reportProgress&&(r.removeEventListener("progress",h),null!==s&&r.upload&&r.upload.removeEventListener("progress",d)),r.abort()}})},e}(),Bn=new r.l("XSRF_COOKIE_NAME"),qn=new r.l("XSRF_HEADER_NAME"),zn=function(){},Hn=function(){function e(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return e.prototype.getToken=function(){if("server"===this.platform)return null;var e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=p(e,this.cookieName),this.lastCookieString=e),this.lastToken},e}(),Wn=function(){function e(e,t){this.tokenService=e,this.headerName=t}return e.prototype.intercept=function(e,t){var n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);var r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)},e}(),Gn=function(){function e(e,t){this.backend=e,this.injector=t,this.chain=null}return e.prototype.handle=function(e){if(null===this.chain){var t=this.injector.get(Nn,[]);this.chain=t.reduceRight(function(e,t){return new jn(e,t)},this.backend)}return this.chain.handle(e)},e}(),Zn=function(){function e(){}return e.disable=function(){return{ngModule:e,providers:[{provide:Wn,useClass:Dn}]}},e.withOptions=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[t.cookieName?{provide:Bn,useValue:t.cookieName}:[],t.headerName?{provide:qn,useValue:t.headerName}:[]]}},e}(),Qn=function(){},Jn=n("5NG4"),Kn=n.n(Jn),Yn=n("g5jc"),Xn=n("x6VL"),$n=function(e){function t(t){e.call(this),this._value=t}return Object(s.__extends)(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Xn.a;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(Yn.a),er=function(){function e(e){this.httpClient=e,this._messages=[],this.messagesSubject=new $n([]),this.messages$=this.messagesSubject.asObservable()}return e.prototype.registerListeners=function(e){var t=this;e.on("channelJoined",function(e){t.channel=e,e.on("messageAdded",function(e){t.addMessage(e.author,e.body)}),e.on("memberJoined",function(e){t.addMessage("System",e.identity+" has joined! \ud83c\udf89")})})},e.prototype.addMessage=function(e,t){this._messages.push({user:e,text:t}),this.messagesSubject.next(this._messages.slice())},e.prototype.sendMessage=function(e){this.channel.sendMessage(e)},e.prototype.enterChat=function(e,t){var n=this;return new Promise(function(r,i){n.httpClient.get("https://camel-hippopotamus-7503.twil.io/chat-token?deice=web&identity="+t).subscribe(function(t){n.token=t.token,Kn.a.create(n.token).then(function(t){return n.client=t,n.registerListeners(t),t.getChannelByUniqueName(e)}).then(function(e){return n.channel=e},function(){return n.client.createChannel({uniqueName:e})}).then(function(e){return e.join()}).then(function(e){e.getMessages().then(function(e){e.items.forEach(function(e){return n.addMessage(e.author,e.body)}),r()}).catch(function(e){i(e)})}).catch(function(e){i(e)})})})},e}();k.a.prototype.map=U;var tr=function(){function e(e){this.httpClient=e}return e.prototype.generateName=function(){return this.httpClient.post("https://api.codetunnel.net/random-nick",{},{}).map(function(e){return e.nickname})},e}();n("GK6M"),n("fKB6"),n("VwZZ"),n("1Q68"),n("N4j0"),n("cQXm"),n("etqZ"),Math.pow(2,53),n("TILf"),n("+CnV"),n("8D5t"),Error,Error,n("gIN1"),n("f9aG"),n("/nXB"),n("Jwyl"),n("1Bqh"),n("0P3J"),n("3a3m"),n("lAP5"),Error;var nr,rr=function(){function e(e){this.httpClient=e}return e.prototype.getSentimentScoreForText=function(e,t){return this.httpClient.post("https://northeurope.api.cognitive.microsoft.com/text/analytics/v2.0/sentiment",function(e,t){return{documents:[{language:t,id:"not-needed-yet",text:e}]}}(e,t),{headers:new gn({"Content-Type":"application/json","Ocp-Apim-Subscription-Key":"a6b28b568f674e99bd445be3b37401c9"})})},e.prototype.isMessagePositiveSentiment=function(e,t){return this.getSentimentScoreForText(e,t).pipe(pn(function(e){return e.documents.length>0}),N(function(e){return e.documents[0].score>=.5}))},e}();!function(e){e.DA="da",e.NL="nl",e.EN="en",e.FI="fi",e.FR="fr",e.DE="de",e.EL="el",e.IT="it",e.JA="ja",e.KO="ko",e.NO="no",e.PL="pl",e.PT="pt",e.RU="ru",e.ES="es",e.SV="sv",e.TR="tr"}(nr||(nr={}));var ir=function(){function e(e,t,n){this.twilioChatService=e,this.funnyNamesService=t,this.textAnalysisService=n,this.messages=[],this.inputMsg="",this.chatConnected=!1}return e.prototype.ngOnInit=function(){var e=this;this.funnyNamesService.generateName().subscribe(function(t){e.nickname=t,e.twilioChatService.enterChat("ngry-chat",t).then(function(){return e.chatConnected=!0}),e.twilioChatService.messages$.subscribe(function(t){return e.messages=t})})},e.prototype._handleClick=function(){var e=this;this.textAnalysisService.isMessagePositiveSentiment(this.inputMsg,nr.EN).subscribe(function(t){t?e.twilioChatService.sendMessage(e.inputMsg):confirm("Are you sure you want to post?")&&e.twilioChatService.sendMessage(e.inputMsg)})},e}(),or=r.T({encapsulation:0,styles:[["#message[_ngcontent-%COMP%]{height:70px;display:-ms-grid;display:grid;-ms-grid-rows:auto;-ms-grid-columns:auto 2.9rem;grid-template:auto/auto 2.9rem;-ms-flex-line-pack:center;align-content:center}#message[_ngcontent-%COMP%]   .send-input[_ngcontent-%COMP%]{padding:10px 0 10px 20px;font-size:1.2rem;border:1px solid #333;border-right:transparent;border-radius:15px 0 0 15px;height:100%}#message[_ngcontent-%COMP%]   .send-btn[_ngcontent-%COMP%]{padding:10px 0;border:1px solid #333;border-left:transparent;border-radius:0 15px 15px 0}#message[_ngcontent-%COMP%]   .send-btn[_ngcontent-%COMP%]:hover{cursor:pointer}#conversation[_ngcontent-%COMP%]{grid-area:conversation;padding:10px 0 10px 10px}"]],data:{}});function sr(e){return r._11(0,[(e()(),r.V(0,0,null,null,3,"h2",[],null,null,null,null,null)),(e()(),r._10(-1,null,["You are logged in as "])),(e()(),r.V(2,0,null,null,1,"b",[],null,null,null,null,null)),(e()(),r._10(3,null,["",""]))],null,function(e,t){e(t,3,0,t.component.nickname)})}function ar(e){return r._11(0,[(e()(),r.V(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),r._10(1,null,["\n   "," - ","\n  "]))],null,function(e,t){e(t,1,0,t.context.$implicit.user,t.context.$implicit.text)})}function ur(e){return r._11(0,[(e()(),r.V(0,0,null,null,4,"nav",[["id","nav"]],null,null,null,null,null)),(e()(),r._10(-1,null,["\n  "])),(e()(),r.Q(16777216,null,null,1,null,sr)),r.U(3,16384,null,0,_,[r.E,r.B],{ngIf:[0,"ngIf"]},null),(e()(),r._10(-1,null,["\n"])),(e()(),r._10(-1,null,["\n"])),(e()(),r.V(6,0,null,null,15,"form",[["id","message"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var i=!0;return"submit"===t&&(i=!1!==r._5(e,8).onSubmit(n)&&i),"reset"===t&&(i=!1!==r._5(e,8).onReset()&&i),i},null,null)),r.U(7,16384,null,0,cn,[],null,null),r.U(8,4210688,null,0,tn,[[8,null],[8,null]],null,null),r._7(2048,null,_t,null,[tn]),r.U(10,16384,null,0,Gt,[_t],null,null),(e()(),r._10(-1,null,["\n    "])),(e()(),r.V(12,0,null,null,5,"input",[["class","send-input"],["name","inputMsg"],["placeholder","send"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var i=!0,o=e.component;return"input"===t&&(i=!1!==r._5(e,13)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==r._5(e,13).onTouched()&&i),"compositionstart"===t&&(i=!1!==r._5(e,13)._compositionStart()&&i),"compositionend"===t&&(i=!1!==r._5(e,13)._compositionEnd(n.target.value)&&i),"ngModelChange"===t&&(i=!1!==(o.inputMsg=n)&&i),i},null,null)),r.U(13,16384,null,0,Ot,[r.w,r.h,[2,Tt]],null,null),r._7(1024,null,Et,function(e){return[e]},[Ot]),r.U(15,671744,null,0,un,[[2,_t],[8,null],[8,null],[2,Et]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r._7(2048,null,Rt,null,[un]),r.U(17,16384,null,0,Wt,[Rt],null,null),(e()(),r._10(-1,null,["\n    "])),(e()(),r.V(19,0,null,null,1,"button",[["class","material-icons send-btn"]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component._handleClick()&&r),r},null,null)),(e()(),r._10(-1,null,["send"])),(e()(),r._10(-1,null,["\n"])),(e()(),r._10(-1,null,["\n"])),(e()(),r.V(23,0,null,null,4,"main",[["id","conversation"]],null,null,null,null,null)),(e()(),r._10(-1,null,["\n  Conversation\n  "])),(e()(),r.Q(16777216,null,null,1,null,ar)),r.U(26,802816,null,0,y,[r.E,r.B,r.n],{ngForOf:[0,"ngForOf"]},null),(e()(),r._10(-1,null,["\n"])),(e()(),r._10(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,3,0,n.nickname),e(t,15,0,"inputMsg",n.inputMsg),e(t,26,0,n.messages)},function(e,t){var n=t.component;e(t,6,0,r._5(t,10).ngClassUntouched,r._5(t,10).ngClassTouched,r._5(t,10).ngClassPristine,r._5(t,10).ngClassDirty,r._5(t,10).ngClassValid,r._5(t,10).ngClassInvalid,r._5(t,10).ngClassPending),e(t,12,0,r._5(t,17).ngClassUntouched,r._5(t,17).ngClassTouched,r._5(t,17).ngClassPristine,r._5(t,17).ngClassDirty,r._5(t,17).ngClassValid,r._5(t,17).ngClassInvalid,r._5(t,17).ngClassPending),e(t,19,0,!n.chatConnected)})}var cr=r.T({encapsulation:0,styles:[['#layout[_ngcontent-%COMP%]{margin:0 20px;display:-ms-grid;display:grid;-ms-grid-rows:60px 40px auto;grid-template-rows:60px 40px auto;grid-template-areas:"header" "nav" "chat"}@media (min-width:992px){#layout[_ngcontent-%COMP%]{width:960px;margin:0 auto}}#header[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:1;grid-area:header;display:-ms-grid;display:grid;-ms-flex-line-pack:center;align-content:center}#header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-left:10px}#nav[_ngcontent-%COMP%]{-ms-grid-row:2;-ms-grid-column:1;grid-area:nav;display:-ms-grid;display:grid;-ms-flex-line-pack:center;align-content:center}#nav[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding-left:20px}app-chat[_ngcontent-%COMP%]{-ms-grid-row:3;-ms-grid-column:1;grid-area:chat}']],data:{}});function lr(e){return r._11(0,[(e()(),r.V(0,0,null,null,10,"div",[["id","layout"]],null,null,null,null,null)),(e()(),r._10(-1,null,["\n  "])),(e()(),r.V(2,0,null,null,4,"header",[["id","header"]],null,null,null,null,null)),(e()(),r._10(-1,null,["\n    "])),(e()(),r.V(4,0,null,null,1,"h1",[],null,null,null,null,null)),(e()(),r._10(-1,null,["ngrychat"])),(e()(),r._10(-1,null,["\n  "])),(e()(),r._10(-1,null,["\n  "])),(e()(),r.V(8,0,null,null,1,"app-chat",[],null,null,null,ur,or)),r.U(9,114688,null,0,ir,[er,tr,rr],null,null),(e()(),r._10(-1,null,["\n"])),(e()(),r._10(-1,null,["\n"]))],function(e,t){e(t,9,0)},null)}var fr=r.R("app-root",o,function(e){return r._11(0,[(e()(),r.V(0,0,null,null,1,"app-root",[],null,null,null,lr,cr)),r.U(1,49152,null,0,o,[],null,null)],null,null)},{},{},[]),hr=function(){},dr=function(e){},pr=function(){},vr=function(){function e(e){if(e)throw new Error("CoreModule is already loaded. Import it in the AppModule ONLY")}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:hr,useValue:t},rr]}},e}(),yr=r.S(i,[o],function(e){return r._2([r._3(512,r.g,r.O,[[8,[fr]],[3,r.g],r.q]),r._3(5120,r.p,r._8,[[3,r.p]]),r._3(4608,h,d,[r.p,[2,f]]),r._3(4608,r.f,r.f,[]),r._3(5120,r.a,r.X,[]),r._3(5120,r.n,r._4,[]),r._3(5120,r.o,r._6,[]),r._3(4608,ot,st,[w]),r._3(6144,r.z,null,[ot]),r._3(4608,Me,Re,[]),r._3(5120,oe,function(e,t,n,r,i){return[new Ae(e,t),new Fe(n),new je(r,i)]},[w,r.s,w,w,Me]),r._3(4608,se,se,[oe,r.s]),r._3(135680,ce,ce,[w]),r._3(4608,ye,ye,[se,ce]),r._3(6144,r.x,null,[ye]),r._3(6144,ue,null,[ce]),r._3(4608,r.C,r.C,[r.s]),r._3(4608,Y,Y,[w]),r._3(4608,te,te,[w]),r._3(4608,jt,jt,[]),r._3(4608,dr,dr,[[2,hr]]),r._3(4608,Ln,Ln,[]),r._3(6144,Un,null,[Ln]),r._3(4608,Vn,Vn,[Un]),r._3(6144,_n,null,[Vn]),r._3(4608,mn,Gn,[_n,r.m]),r._3(4608,Rn,Rn,[mn]),r._3(4608,er,er,[Rn]),r._3(4608,tr,tr,[Rn]),r._3(4608,zn,Hn,[w,r.u,Bn]),r._3(4608,Wn,Wn,[zn,qn]),r._3(5120,Nn,function(e){return[e]},[Wn]),r._3(4608,rr,rr,[Rn]),r._3(512,b,b,[]),r._3(1024,r.i,vt,[]),r._3(1024,r.b,function(e){return[(t=e,ne("probe",ie),ne("coreTokens",Object(s.__assign)({},re,(t||[]).reduce(function(e,t){return e[t.name]=t.token,e},{}))),function(){return ie})];var t},[[2,r.r]]),r._3(512,r.c,r.c,[[2,r.b]]),r._3(131584,r.e,r.e,[r.s,r.P,r.m,r.i,r.g,r.c]),r._3(512,r.d,r.d,[r.e]),r._3(512,yt,yt,[[3,yt]]),r._3(512,ln,ln,[]),r._3(512,fn,fn,[]),r._3(512,pr,pr,[]),r._3(512,vr,vr,[[3,vr]]),r._3(512,Zn,Zn,[]),r._3(512,Qn,Qn,[]),r._3(512,i,i,[]),r._3(256,hr,{},[]),r._3(256,Bn,"XSRF-TOKEN",[]),r._3(256,qn,"X-XSRF-TOKEN",[])])});Object(r.I)(),pt().bootstrapModuleFactory(yr).catch(function(e){return console.log(e)})},x6VL:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("TToO"),i=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return Object(r.__extends)(t,e),t}(Error)},x9iu:function(e,t,n){"use strict";var r=a(n("Xxa5")),i=a(n("Zrlr")),o=a(n("wxAW")),s=a(n("//Fk"));function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(t,n,r){(0,i.default)(this,e),this.config=t,this.network=n,this._update(r)}return(0,o.default)(e,[{key:"getContentUrl",value:function(){return e=this,void 0,t=void 0,n=r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.network.get(this.config.baseUrl+"/"+this.sid);case 2:return this._update(e.sent.body),e.abrupt("return",s.default.resolve(this.state.contentDirectUrl));case 5:case"end":return e.stop()}},e,this)}),new(t||(t=s.default))(function(r,i){function o(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){e.done?r(e.value):new t(function(t){t(e.value)}).then(o,s)}a((n=n.apply(e,[])).next())});var e,t,n}},{key:"_update",value:function(e){this.state={sid:e.sid,serviceSid:e.service_sid,channelSid:e.channel_sid,messageSid:e.message_sid,dateCreated:e.date_created?new Date(e.date_created):null,dateUpdated:e.date_updated?new Date(e.date_updated):null,size:e.size,contentType:e.content_type,url:e.url,contentUrl:e.links.content,contentDirectUrl:e.links.content_direct_temporary,filename:e.filename?e.filename:null}}},{key:"sid",get:function(){return this.state.sid}},{key:"serviceSid",get:function(){return this.state.serviceSid}},{key:"dateCreated",get:function(){return this.state.dateCreated}},{key:"dateUpdated",get:function(){return this.state.dateUpdated}},{key:"contentType",get:function(){return this.state.contentType}},{key:"size",get:function(){return this.state.size}},{key:"fileName",get:function(){return this.state.filename}}]),e}();t.Media=u},xGkn:function(e,t,n){"use strict";var r=n("4mcu"),i=n("EGZi"),o=n("/bQp"),s=n("TcQ7");e.exports=n("vIB/")(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},"xH/j":function(e,t,n){var r=n("hJx8");e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},xIvG:function(e,t,n){"use strict";var r=u(n("Zx67")),i=u(n("Zrlr")),o=u(n("wxAW")),s=u(n("zwoO")),a=u(n("Pf15"));function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var c=n("vzCy"),l=function(e){function t(e,n){(0,i.default)(this,t);var o=(0,s.default)(this,(t.__proto__||(0,r.default)(t)).call(this));return o.services=e,o.removalHandler=n,o.subscriptionState="none",o}return(0,a.default)(t,c.EventEmitter),(0,o.default)(t,[{key:"_advanceLastEventId",value:function(e,t){}},{key:"reportFailure",value:function(e){404===e.status?this.onRemoved(!1):this.emit("failure",e)}},{key:"_subscribe",value:function(){return this.services.router.subscribe(this.sid,this),this}},{key:"_unsubscribe",value:function(){return this.services.router.unsubscribe(this.sid,this),this}},{key:"_setSubscriptionState",value:function(e){this.subscriptionState=e,this.emit("_subscriptionStateChanged",e)}},{key:"close",value:function(){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName)}}]),t}();t.SyncEntity=l,t.default=l},xnc9:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},zHwk:function(e,t,n){"use strict";var r=n("TToO").__extends;Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this)||this;return n.minDelay=t.min,n.maxDelay=t.max,n.initialDelay=t.initial||0,n.maxAttemptsCount=t.maxAttemptsCount||0,n.maxAttemptsTime=t.maxAttemptsTime||0,n.randomness=t.randomness||0,n.inProgress=!1,n.attemptNum=0,n.prevDelay=0,n.currDelay=0,n}return r(t,e),t.prototype.attempt=function(){clearTimeout(this.timeout),this.attemptNum++,this.timeout=null,this.emit("attempt",this)},t.prototype.nextDelay=function(e){if("number"==typeof e)return this.prevDelay=0,this.currDelay=e,e;if(0==this.attemptNum)return this.initialDelay;if(1==this.attemptNum)return this.currDelay=this.minDelay,this.currDelay;var t=this.currDelay+this.prevDelay;return this.prevDelay=this.currDelay,this.currDelay=t,t},t.prototype.randomize=function(e){var t=e*this.randomness,n=Math.round(Math.random()*t*2-t);return Math.max(0,e+n)},t.prototype.scheduleAttempt=function(e){var t=this;if(this.maxAttemptsCount&&this.attemptNum>=this.maxAttemptsCount)return this.cleanup(),this.emit("failed",new Error("Maximum attempt count limit reached")),void this.reject(new Error("Maximum attempt count reached"));var n=this.nextDelay(e);n=this.randomize(n),this.maxAttemptsTime&&this.startTimestamp+this.maxAttemptsTime<Date.now()+n&&(this.cleanup(),this.emit("failed",new Error("Maximum attempt time limit reached")),this.reject(new Error("Maximum attempt time limit reached"))),this.timeout=setTimeout(function(){return t.attempt()},n)},t.prototype.cleanup=function(){clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.attemptNum=0,this.prevDelay=0,this.currDelay=0},t.prototype.start=function(){var e=this;if(this.inProgress)throw new Error("Retrier is already in progress");return this.inProgress=!0,new Promise(function(t,n){e.resolve=t,e.reject=n,e.startTimestamp=Date.now(),e.scheduleAttempt(e.initialDelay)})},t.prototype.cancel=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.emit("cancelled"),this.reject(new Error("Cancelled")))},t.prototype.succeeded=function(e){this.emit("succeeded",e),this.resolve(e)},t.prototype.failed=function(e,t){if(this.timeout)throw new Error("Retrier attempt is already in progress");this.scheduleAttempt(t)},t.prototype.run=function(e){var t=this;return this.on("attempt",function(){e().then(function(e){return t.succeeded(e)}).catch(function(e){return t.failed(e)})}),this.start()},t}(n("vzCy").EventEmitter);t.Retrier=i,t.default=i},zQR9:function(e,t,n){"use strict";var r=n("h65t")(!0);n("vIB/")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},zwQy:function(e,t,n){"use strict";var r=u(n("//Fk")),i=u(n("Dd8w")),o=u(n("mvHQ")),s=u(n("Zrlr")),a=u(n("wxAW"));function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var c=n("DlMc"),l=n("JuVV"),f=n("FTGv"),h=n("tss7"),d=n("zHwk"),p=n("Wl86");function v(e){if(e.body&&e.body.message)return e.body.message;switch(e.status){case 429:return"Throttled by server";case 404:return"Not found from server";default:return"Error from server"}}function y(e){return e.body?e.body.code:0}function m(e){return 409===e.status?new h.SyncNetworkError(v(e),e.status,y(e),e.body):e.status?new f.SyncError(v(e),e.status,y(e)):e instanceof p.TwilsockUnavailableError?e:new f.SyncError(e.message,0,0)}var _=function(){function e(t,n,r,i){(0,s.default)(this,e),this.productId=t,this.clientInfo=n,this.config=r,this.transport=i}return(0,a.default)(e,[{key:"createHeaders",value:function(){return{"Content-Type":"application/json","Twilio-Sync-Client-Info":(0,o.default)(this.clientInfo),"Twilio-Request-Id":"RQ"+c.v4().replace(/-/g,""),"X-Twilio-Product-Id":this.productId,"X-Twilio-Token":this.config.token}}},{key:"backoffConfig",value:function(){return(0,i.default)({min:4e3,max:6e4,maxAttemptsTime:9e4,randomness:.2},this.config.backoffConfig)}},{key:"executeWithRetry",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new r.default(function(r,i){var o=[502,503,504];n&&o.push(429);var s=new d.default(t.backoffConfig());s.on("attempt",function(){e().then(function(e){return s.succeeded(e)}).catch(function(e){if(-1!==o.indexOf(e.status)){var t=parseInt(e.headers?e.headers["Retry-After"]:null);s.failed(m(e),isNaN(t)?null:1e3*t)}else"Twilsock disconnected"===e.message?s.failed(m(e)):e.message&&-1!==e.message.indexOf("Twilsock: request timeout")?s.failed(m(e)):(s.removeAllListeners(),s.cancel(),i(m(e)))})}),s.on("succeeded",function(e){r(e)}),s.on("cancelled",function(e){return i(m(e))}),s.on("failed",function(e){return i(m(e))}),s.start()})}},{key:"get",value:function(e){var t=this,n=this.createHeaders();return l.default.debug("GET",e,"ID:",n["Twilio-Request-Id"]),this.executeWithRetry(function(){return t.transport.get(e,n)},!0)}},{key:"post",value:function(e,t,n,r){var i=this,o=this.createHeaders();return"undefined"!=typeof n&&null!==n&&(o["If-Match"]=n),l.default.debug("POST",e,"ID:",o["Twilio-Request-Id"]),this.executeWithRetry(function(){return i.transport.post(e,o,t,r)},!1)}},{key:"put",value:function(e,t,n){var r=this,i=this.createHeaders();return"undefined"!=typeof n&&null!==n&&(i["If-Match"]=n),l.default.debug("PUT",e,"ID:",i["Twilio-Request-Id"]),this.executeWithRetry(function(){return r.transport.put(e,i,t)},!1)}},{key:"delete",value:function(e){var t=this,n=this.createHeaders();return l.default.debug("DELETE",e,"ID:",n["Twilio-Request-Id"]),this.executeWithRetry(function(){return t.transport.delete(e,n)},!1)}}]),e}();t.Network=_,t.default=_},zwoO:function(e,t,n){"use strict";t.__esModule=!0;var r,i=(r=n("pFYg"))&&r.__esModule?r:{default:r};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}}},[0]);